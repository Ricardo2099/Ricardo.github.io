import{a as W,b as Me,c as _f,d as M,e as Zw,f as fu,g as Jw,h as Xw,i as eI,j as wf,k as tI,l as la,m as If,n as pu,o as nI,p as rI,q as Ef,r as Fe,s as si,t as En,u as gu,v as da,w as iI,x as oI,y as Ir,z as Nt}from"./chunk-U3NIYLHF.js";var Cf=null;var Df=1,sI=Symbol("SIGNAL");function Te(n){let e=Cf;return Cf=n,e}function aI(){return Cf}var Tf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jx(n){if(!(Mf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Df)){if(!n.producerMustRecompute(n)&&!Sf(n)){n.dirty=!1,n.lastCleanEpoch=Df;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Df}}function bf(n){return n&&(n.nextProducerIndex=0),Te(n)}function cI(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Mf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)xf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Sf(n){Rf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(jx(t),r!==t.version))return!0}return!1}function Af(n){if(Rf(n),Mf(n))for(let e=0;e<n.producerNode.length;e++)xf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function xf(n,e){if(Bx(n),n.liveConsumerNode.length===1&&Ux(n))for(let r=0;r<n.producerNode.length;r++)xf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Rf(i),i.producerIndexOfThis[r]=e}}function Mf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Rf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Bx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Ux(n){return n.producerNode!==void 0}function $x(){throw new Error}var Hx=$x;function uI(n){Hx=n}function oe(n){return typeof n=="function"}function ao(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var mu=ao(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ai(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof mu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{lI(o)}catch(s){e=e??[],s instanceof mu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new mu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)lI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ai(t,e)}remove(e){let{_finalizers:t}=this;t&&ai(t,e),e instanceof n&&e._removeParent(this)}};Ue.EMPTY=(()=>{let n=new Ue;return n.closed=!0,n})();var Nf=Ue.EMPTY;function yu(n){return n instanceof Ue||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function lI(n){oe(n)?n():n.unsubscribe()}var ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var co={setTimeout(n,e,...t){let{delegate:r}=co;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=co;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vu(n){co.setTimeout(()=>{let{onUnhandledError:e}=ln;if(e)e(n);else throw n})}function ha(){}var dI=Pf("C",void 0,void 0);function hI(n){return Pf("E",void 0,n)}function fI(n){return Pf("N",n,void 0)}function Pf(n,e,t){return{kind:n,value:e,error:t}}var ci=null;function uo(n){if(ln.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ci;if(ci=null,t)throw r}}else n()}function pI(n){ln.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=n)}var ui=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yu(e)&&e.add(this)):this.destination=Gx}static create(e,t,r){return new Wn(e,t,r)}next(e){this.isStopped?Of(fI(e),this):this._next(e)}error(e){this.isStopped?Of(hI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Of(dI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qx=Function.prototype.bind;function kf(n,e){return qx.call(n,e)}var Ff=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){_u(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){_u(r)}else _u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_u(t)}}},Wn=class extends ui{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ln.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&kf(e.next,o),error:e.error&&kf(e.error,o),complete:e.complete&&kf(e.complete,o)}):i=e}this.destination=new Ff(i)}};function _u(n){ln.useDeprecatedSynchronousErrorHandling?pI(n):vu(n)}function zx(n){throw n}function Of(n,e){let{onStoppedNotification:t}=ln;t&&co.setTimeout(()=>t(n,e))}var Gx={closed:!0,next:ha,error:zx,complete:ha};var lo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ct(n){return n}function Lf(...n){return Vf(n)}function Vf(n){return n.length===0?Ct:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Kx(t)?t:new Wn(t,r,i);return uo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=gI(r),new r((i,o)=>{let s=new Wn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[lo](){return this}pipe(...t){return Vf(t)(this)}toPromise(t){return t=gI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function gI(n){var e;return(e=n??ln.Promise)!==null&&e!==void 0?e:Promise}function Wx(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function Kx(n){return n&&n instanceof ui||Wx(n)&&yu(n)}function jf(n){return oe(n?.lift)}function le(n){return e=>{if(jf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Bf(n,e,t,r,i)}var Bf=class extends ui{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ho(){return le((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var fo=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,jf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return ho()(this)}};var mI=ao(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new wu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new mI}next(t){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Nf:(this.currentObservers=null,o.push(t),new Ue(()=>{this.currentObservers=null,ai(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new wu(e,t),n})(),wu=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Nf}};var lt=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fa={now(){return(fa.delegate||Date).now()},delegate:void 0};var Iu=class extends ze{constructor(e=1/0,t=1/0,r=fa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Eu=class extends Ue{constructor(e,t){super()}schedule(e,t=0){return this}};var pa={setInterval(n,e,...t){let{delegate:r}=pa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var po=class extends Eu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ai(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var go=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};go.now=fa.now;var mo=class extends go{constructor(e,t=go.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ga=new mo(po);var Du=class extends po{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Cu=class extends mo{};var Uf=new Cu(Du);var Tt=new pe(n=>n.complete());function yI(n){return n&&oe(n.schedule)}function $f(n){return n[n.length-1]}function vI(n){return oe($f(n))?n.pop():void 0}function Dn(n){return yI($f(n))?n.pop():void 0}function _I(n,e){return typeof $f(n)=="number"?n.pop():e}var Tu=n=>n&&typeof n.length=="number"&&typeof n!="function";function bu(n){return oe(n?.then)}function Su(n){return oe(n[lo])}function Au(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function xu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Qx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mu=Qx();function Ru(n){return oe(n?.[Mu])}function Nu(n){return Jw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield fu(t.read());if(i)return yield fu(void 0);yield yield fu(r)}}finally{t.releaseLock()}})}function Pu(n){return oe(n?.getReader)}function Le(n){if(n instanceof pe)return n;if(n!=null){if(Su(n))return Yx(n);if(Tu(n))return Zx(n);if(bu(n))return Jx(n);if(Au(n))return wI(n);if(Ru(n))return Xx(n);if(Pu(n))return eM(n)}throw xu(n)}function Yx(n){return new pe(e=>{let t=n[lo]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Zx(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Jx(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,vu)})}function Xx(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wI(n){return new pe(e=>{tM(n,e).catch(t=>e.error(t))})}function eM(n){return wI(Nu(n))}function tM(n,e){var t,r,i,o;return Zw(this,void 0,void 0,function*(){try{for(t=Xw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Zt(n,e=0){return le((t,r)=>{t.subscribe(he(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function dn(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function II(n,e){return Le(n).pipe(dn(e),Zt(e))}function EI(n,e){return Le(n).pipe(dn(e),Zt(e))}function DI(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function CI(n,e){return new pe(t=>{let r;return Pt(t,e,()=>{r=n[Mu](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function ku(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function TI(n,e){return ku(Nu(n),e)}function bI(n,e){if(n!=null){if(Su(n))return II(n,e);if(Tu(n))return DI(n,e);if(bu(n))return EI(n,e);if(Au(n))return ku(n,e);if(Ru(n))return CI(n,e);if(Pu(n))return TI(n,e)}throw xu(n)}function De(n,e){return e?bI(n,e):Le(n)}function ee(...n){let e=Dn(n);return De(n,e)}function yo(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function Hf(n){return!!n&&(n instanceof pe||oe(n.lift)&&oe(n.subscribe))}var Kn=ao(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(n,e){return le((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:nM}=Array;function rM(n,e){return nM(e)?n(...e):n(e)}function SI(n){return ne(e=>rM(n,e))}var{isArray:iM}=Array,{getPrototypeOf:oM,prototype:sM,keys:aM}=Object;function AI(n){if(n.length===1){let e=n[0];if(iM(e))return{args:e,keys:null};if(cM(e)){let t=aM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function cM(n){return n&&typeof n=="object"&&oM(n)===sM}function xI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ma(...n){let e=Dn(n),t=vI(n),{args:r,keys:i}=AI(n);if(r.length===0)return De([],e);let o=new pe(uM(r,e,i?s=>xI(i,s):Ct));return t?o.pipe(SI(t)):o}function uM(n,e,t=Ct){return r=>{MI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)MI(e,()=>{let l=De(n[u],e),h=!1;l.subscribe(he(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function MI(n,e,t){n?Pt(t,n,e):e()}function RI(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=R=>l<r?b(R):u.push(R),b=R=>{o&&e.next(R),l++;let N=!1;Le(t(R,h++)).subscribe(he(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let B=u.shift();s?Pt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(he(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ze(n,e,t=1/0){return oe(e)?Ze((r,i)=>ne((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>RI(r,i,n,t)))}function Er(n=1/0){return Ze(Ct,n)}function NI(){return Er(1)}function vo(...n){return NI()(De(n,Dn(n)))}function Ou(n){return new pe(e=>{Le(n()).subscribe(e)})}function qf(...n){let e=Dn(n),t=_I(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):Er(t)(De(r,e)):Tt}function dt(n,e){return le((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Dr(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=Le(n(s,Dr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function PI(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(he(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function li(n,e){return oe(e)?Ze(n,e,1):Ze(n,1)}function Cr(n){return le((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qn(n){return n<=0?()=>Tt:le((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function zf(n){return ne(()=>n)}function Gf(n,e=Ct){return n=n??lM,le((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function lM(n,e){return n===e}function Fu(n=dM){return le((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dM(){return new Kn}function ya(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Jt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?dt((i,o)=>n(i,o,r)):Ct,Qn(1),t?Cr(e):Fu(()=>new Kn))}function _o(n){return n<=0?()=>Tt:le((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?dt((i,o)=>n(i,o,r)):Ct,_o(1),t?Cr(e):Fu(()=>new Kn))}function va(){return le((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function di(n,e){return le(PI(n,e,arguments.length>=2,!0))}function kI(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let R=s;v(),R?.unsubscribe()};return le((R,N)=>{l++,!p&&!h&&m();let B=u=u??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Kf(b,i))}),B.subscribe(N),!s&&l>0&&(s=new Wn({next:z=>B.next(z),error:z=>{p=!0,m(),a=Kf(v,t,z),B.error(z)},complete:()=>{h=!0,m(),a=Kf(v,r),B.complete()}}),Le(R).subscribe(s))})(o)}}function Kf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Wn({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function Lu(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,kI({connector:()=>new Iu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function hi(...n){let e=Dn(n);return le((t,r)=>{(e?vo(n,t,e):vo(n,t)).subscribe(r)})}function $e(n,e){return le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(n(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Vu(n,e){return oe(e)?$e(()=>n,e):$e(()=>n)}function Qf(n){return le((e,t)=>{Le(n).subscribe(he(t,()=>t.complete(),ha)),!t.closed&&e.subscribe(t)})}function rt(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ct}var yE="https://g.co/ng/security#xss",te=class extends Error{constructor(e,t){super(Up(e,t)),this.code=e}};function Up(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ma(n){return{toString:n}.toString()}var ju="__parameters__";function hM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function vE(n,e,t){return Ma(()=>{let r=hM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(ju)?u[ju]:Object.defineProperty(u,ju,{value:[]})[ju];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var er=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function OI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var fM=Ae({__forward_ref__:Ae});function _E(n){return n.__forward_ref__=_E,n.toString=function(){return kt(this())},n}function en(n){return wE(n)?n():n}function wE(n){return typeof n=="function"&&n.hasOwnProperty(fM)&&n.__forward_ref__===_E}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function vl(n){return FI(n,EE)||FI(n,DE)}function IE(n){return vl(n)!==null}function FI(n,e){return n.hasOwnProperty(e)?n[e]:null}function pM(n){let e=n&&(n[EE]||n[DE]);return e||null}function LI(n){return n&&(n.hasOwnProperty(VI)||n.hasOwnProperty(gM))?n[VI]:null}var EE=Ae({\u0275prov:Ae}),VI=Ae({\u0275inj:Ae}),DE=Ae({ngInjectableDef:Ae}),gM=Ae({ngInjectorDef:Ae}),Q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function CE(n){return n&&!!n.\u0275providers}var mM=Ae({\u0275cmp:Ae}),yM=Ae({\u0275dir:Ae}),vM=Ae({\u0275pipe:Ae}),_M=Ae({\u0275mod:Ae}),Gu=Ae({\u0275fac:Ae}),wa=Ae({__NG_ELEMENT_ID__:Ae}),jI=Ae({__NG_ENV_ID__:Ae});function Ea(n){return typeof n=="string"?n:n==null?"":String(n)}function wM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ea(n)}function IM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new te(-200,n)}function $p(n,e){throw new te(-201,!1)}var de=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(de||{}),ip;function TE(){return ip}function Xt(n){let e=ip;return ip=n,e}function bE(n,e,t){let r=vl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&de.Optional)return null;if(e!==void 0)return e;$p(n,"Injector")}var EM={},Da=EM,op="__NG_DI_FLAG__",Wu="ngTempTokenPath",DM="ngTokenPath",CM=/\n/gm,TM="\u0275",BI="__source",Co;function bM(){return Co}function Tr(n){let e=Co;return Co=n,e}function SM(n,e=de.Default){if(Co===void 0)throw new te(-203,!1);return Co===null?bE(n,void 0,e):Co.get(n,e&de.Optional?null:void 0,e)}function O(n,e=de.Default){return(TE()||SM)(en(n),e)}function j(n,e=de.Default){return O(n,_l(e))}function _l(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sp(n){let e=[];for(let t=0;t<n.length;t++){let r=en(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=de.Default;for(let s=0;s<r.length;s++){let a=r[s],u=AM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function SE(n,e){return n[op]=e,n.prototype[op]=e,n}function AM(n){return n[op]}function xM(n,e,t,r){let i=n[Wu];throw e[BI]&&i.unshift(e[BI]),n.message=MM(`
`+n.message,i,t,r),n[DM]=i,n[Wu]=null,n}function MM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==TM?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(CM,`
  `)}`}var Oo=SE(vE("Optional"),8);var Hp=SE(vE("SkipSelf"),4);function bo(n,e){let t=n.hasOwnProperty(Gu);return t?n[Gu]:null}function qp(n,e){n.forEach(t=>Array.isArray(t)?qp(t,e):e(t))}function AE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ku(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Ca={},Cn=[],So=new Q(""),xE=new Q("",-1),ME=new Q(""),Qu=class{get(e,t=Da){if(t===Da){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return t}},RE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(RE||{}),bn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(bn||{}),Ar=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ar||{});function RM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function ap(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];PM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function NM(n){return n===3||n===4||n===6}function PM(n){return n.charCodeAt(0)===64}function zp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?UI(n,t,i,null,e[++r]):UI(n,t,i,null,null))}}return n}function UI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var NE="ng-template";function kM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Gp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Gp(n){return n.type===4&&n.value!==NE}function OM(n,e,t){let r=n.type===4&&!t?NE:n.value;return e===r}function FM(n,e,t){let r=4,i=n.attrs,o=i!==null?jM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!hn(r)&&!hn(u))return!1;if(s&&hn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!OM(n,u,t)||u===""&&e.length===1){if(hn(r))return!1;s=!0}}else if(r&8){if(i===null||!kM(n,i,u,t)){if(hn(r))return!1;s=!0}}else{let l=e[++a],h=LM(u,i,Gp(n),t);if(h===-1){if(hn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(hn(r))return!1;s=!0}}}}return hn(r)||s}function hn(n){return(n&1)===0}function LM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return BM(e,n)}function VM(n,e,t=!1){for(let r=0;r<e.length;r++)if(FM(n,e[r],t))return!0;return!1}function jM(n){for(let e=0;e<n.length;e++){let t=n[e];if(NM(t))return e}return n.length}function BM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $I(n,e){return n?":not("+e.trim()+")":e}function UM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hn(s)&&(e+=$I(o,i),i=""),r=s,o=o||!hn(r);t++}return i!==""&&(e+=$I(o,i)),e}function $M(n){return n.map(UM).join(",")}function HM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hn(i))break;i=o}r++}return{attrs:e,classes:t}}function at(n){return Ma(()=>{let e=LE(n),t=Me(W({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===RE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||bn.Emulated,styles:n.styles||Cn,_:null,schemas:n.schemas||null,tView:null,id:""});VE(t);let r=n.dependencies;return t.directiveDefs=qI(r,!1),t.pipeDefs=qI(r,!0),t.id=GM(t),t})}function qM(n){return xr(n)||PE(n)}function zM(n){return n!==null}function _t(n){return Ma(()=>({type:n.type,bootstrap:n.bootstrap||Cn,declarations:n.declarations||Cn,imports:n.imports||Cn,exports:n.exports||Cn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function HI(n,e){if(n==null)return Ca;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Ar.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Ar.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ra(n){return Ma(()=>{let e=LE(n);return VE(e),e})}function xr(n){return n[mM]||null}function PE(n){return n[yM]||null}function kE(n){return n[vM]||null}function OE(n){let e=xr(n)||PE(n)||kE(n);return e!==null?e.standalone:!1}function FE(n,e){let t=n[_M]||null;if(!t&&e===!0)throw new Error(`Type ${kt(n)} does not have '\u0275mod' property.`);return t}function LE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ca,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Cn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:HI(n.inputs,e),outputs:HI(n.outputs),debugInfo:null}}function VE(n){n.features?.forEach(e=>e(n))}function qI(n,e){if(!n)return null;let t=e?kE:qM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(zM)}function GM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function WM(...n){return{\u0275providers:jE(!0,n),\u0275fromNgModule:!0}}function jE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return qp(e,s=>{let a=s;cp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BE(i,o),t}function BE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Wp(i,o=>{e(o,r)})}}function cp(n,e,t,r){if(n=en(n),!n)return!1;let i=null,o=LI(n),s=!o&&xr(n);if(!o&&!s){let u=n.ngModule;if(o=LI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)cp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{qp(o.imports,h=>{cp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&BE(l,e)}if(!a){let l=bo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Cn},i),e({provide:ME,useValue:i,multi:!0},i),e({provide:So,useValue:()=>O(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Wp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Wp(n,e){for(let t of n)CE(t)&&(t=t.\u0275providers),Array.isArray(t)?Wp(t,e):e(t)}var KM=Ae({provide:String,useValue:Ae});function UE(n){return n!==null&&typeof n=="object"&&KM in n}function QM(n){return!!(n&&n.useExisting)}function YM(n){return!!(n&&n.useFactory)}function up(n){return typeof n=="function"}var wl=new Q(""),$u={},ZM={},Yf;function Kp(){return Yf===void 0&&(Yf=new Qu),Yf}var qt=class{},Ta=class extends qt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dp(e,s=>this.processProvider(s)),this.records.set(xE,wo(void 0,this)),i.has("environment")&&this.records.set(qt,wo(void 0,this));let o=this.records.get(wl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ME,Cn,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Tr(this),r=Xt(void 0),i;try{return e()}finally{Tr(t),Xt(r)}}get(e,t=Da,r=de.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(jI))return e[jI](this);r=_l(r);let i,o=Tr(this),s=Xt(void 0);try{if(!(r&de.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=rR(e)&&vl(e);l&&this.injectableDefInScope(l)?u=wo(lp(e),$u):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&de.Self?Kp():this.parent;return t=r&de.Optional&&t===Da?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Wu]=a[Wu]||[]).unshift(kt(e)),o)throw a;return xM(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Tr(o)}}resolveInjectorInitializers(){let e=Te(null),t=Tr(this),r=Xt(void 0),i;try{let o=this.get(So,Cn,de.Self);for(let s of o)s()}finally{Tr(t),Xt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(e){e=en(e);let t=up(e)?e:en(e&&e.provide),r=XM(e);if(!up(e)&&e.multi===!0){let i=this.records.get(t);i||(i=wo(void 0,$u,!0),i.factory=()=>sp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===$u&&(t.value=ZM,t.value=t.factory()),typeof t.value=="object"&&t.value&&nR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function lp(n){let e=vl(n),t=e!==null?e.factory:bo(n);if(t!==null)return t;if(n instanceof Q)throw new te(204,!1);if(n instanceof Function)return JM(n);throw new te(204,!1)}function JM(n){if(n.length>0)throw new te(204,!1);let t=pM(n);return t!==null?()=>t.factory(n):()=>new n}function XM(n){if(UE(n))return wo(void 0,n.useValue);{let e=eR(n);return wo(e,$u)}}function eR(n,e,t){let r;if(up(n)){let i=en(n);return bo(i)||lp(i)}else if(UE(n))r=()=>en(n.useValue);else if(YM(n))r=()=>n.useFactory(...sp(n.deps||[]));else if(QM(n))r=()=>O(en(n.useExisting));else{let i=en(n&&(n.useClass||n.provide));if(tR(n))r=()=>new i(...sp(n.deps));else return bo(i)||lp(i)}return r}function wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tR(n){return!!n.deps}function nR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function rR(n){return typeof n=="function"||typeof n=="object"&&n instanceof Q}function dp(n,e){for(let t of n)Array.isArray(t)?dp(t,e):t&&CE(t)?dp(t.\u0275providers,e):e(t)}function xn(n,e){n instanceof Ta&&n.assertNotDestroyed();let t,r=Tr(n),i=Xt(void 0);try{return e()}finally{Tr(r),Xt(i)}}function $E(){return TE()!==void 0||bM()!=null}function iR(n){if(!$E())throw new te(-203,!1)}function oR(n){let e=er.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function sR(n){return typeof n=="function"}var tr=0,ge=1,se=2,St=3,fn=4,pn=5,Yu=6,zI=7,Yn=8,Ao=9,Sn=10,zt=11,ba=12,GI=13,Fo=14,An=15,xo=16,Io=17,Mo=18,Il=19,HE=20,Sr=21,Zf=22,tn=23,Zn=25,qE=1;var gi=7,Zu=8,Ju=9,nn=10,Xu=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Xu||{});function fi(n){return Array.isArray(n)&&typeof n[qE]=="object"}function nr(n){return Array.isArray(n)&&n[qE]===!0}function zE(n){return(n.flags&4)!==0}function El(n){return n.componentOffset>-1}function GE(n){return(n.flags&1)===1}function Na(n){return!!n.template}function hp(n){return(n[se]&512)!==0}var fp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function WE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Dl(){return KE}function KE(n){return n.type.prototype.ngOnChanges&&(n.setInput=cR),aR}Dl.ngInherit=!0;function aR(){let n=YE(this),e=n?.current;if(e){let t=n.previous;if(t===Ca)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function cR(n,e,t,r,i){let o=this.declaredInputs[r],s=YE(n)||uR(n,{previous:Ca,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new fp(l&&l.currentValue,t,u===Ca),WE(n,e,i,t)}var QE="__ngSimpleChanges__";function YE(n){return n[QE]||null}function uR(n,e){return n[QE]=e}var WI=null;var br=function(n,e,t){WI?.(n,e,t)},lR="svg",dR="math";function Jn(n){for(;Array.isArray(n);)n=n[tr];return n}function hR(n,e){return Jn(e[n])}function Mn(n,e){return Jn(e[n.index])}function ZE(n,e){return n.data[e]}function fR(n,e){return n[e]}function Lo(n,e){let t=e[n];return fi(t)?t:t[tr]}function Qp(n){return(n[se]&128)===128}function pR(n){return nr(n[St])}function el(n,e){return e==null?null:n[e]}function JE(n){n[Io]=0}function XE(n){n[se]&1024||(n[se]|=1024,Qp(n)&&Tl(n))}function gR(n,e){for(;n>0;)e=e[Fo],n--;return e}function Cl(n){return!!(n[se]&9216||n[tn]?.dirty)}function pp(n){n[Sn].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Cl(n)&&Tl(n)}function Tl(n){n[Sn].changeDetectionScheduler?.notify(0);let e=mi(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Qp(e)));)e=mi(e)}function eD(n,e){if((n[se]&256)===256)throw new te(911,!1);n[Sr]===null&&(n[Sr]=[]),n[Sr].push(e)}function mR(n,e){if(n[Sr]===null)return;let t=n[Sr].indexOf(e);t!==-1&&n[Sr].splice(t,1)}function mi(n){let e=n[St];return nr(e)?e[St]:e}var me={lFrame:lD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var tD=!1;function yR(){return me.lFrame.elementDepthCount}function vR(){me.lFrame.elementDepthCount++}function _R(){me.lFrame.elementDepthCount--}function nD(){return me.bindingsEnabled}function wR(){return me.skipHydrationRootTNode!==null}function IR(n){return me.skipHydrationRootTNode===n}function ER(){me.skipHydrationRootTNode=null}function st(){return me.lFrame.lView}function Vo(){return me.lFrame.tView}function Rn(){let n=rD();for(;n!==null&&n.type===64;)n=n.parent;return n}function rD(){return me.lFrame.currentTNode}function DR(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Pa(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function iD(){return me.lFrame.isParent}function CR(){me.lFrame.isParent=!1}function TR(){return me.lFrame.contextLView}function oD(){return tD}function KI(n){tD=n}function bR(){return me.lFrame.bindingIndex}function SR(n){return me.lFrame.bindingIndex=n}function sD(){return me.lFrame.bindingIndex++}function AR(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function xR(){return me.lFrame.inI18n}function MR(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,gp(e)}function RR(){return me.lFrame.currentDirectiveIndex}function gp(n){me.lFrame.currentDirectiveIndex=n}function aD(n){me.lFrame.currentQueryIndex=n}function NR(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[pn]:null}function cD(n,e,t){if(t&de.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&de.Host);)if(i=NR(o),i===null||(o=o[Fo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=uD();return r.currentTNode=e,r.lView=n,!0}function Yp(n){let e=uD(),t=n[ge];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function uD(){let n=me.lFrame,e=n===null?null:n.child;return e===null?lD(n):e}function lD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function dD(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var hD=dD;function Zp(){let n=dD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function PR(n){return(me.lFrame.contextLView=gR(n,me.lFrame.contextLView))[Yn]}function bl(){return me.lFrame.selectedIndex}function yi(n){me.lFrame.selectedIndex=n}function kR(){let n=me.lFrame;return ZE(n.tView,n.selectedIndex)}function OR(){return me.lFrame.currentNamespace}var fD=!0;function Jp(){return fD}function Xp(n){fD=n}function FR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=KE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function eg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Hu(n,e,t){pD(n,e,3,t)}function qu(n,e,t,r){(n[se]&3)===t&&pD(n,e,t,r)}function Jf(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function pD(n,e,t,r){let i=r!==void 0?n[Io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Io]+=65536),(a<o||o==-1)&&(LR(n,t,e,u),n[Io]=(n[Io]&4294901760)+u+2),u++}function QI(n,e){br(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),br(5,n,e)}}function LR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[Io]>>16&&(n[se]&3)===e&&(n[se]+=16384,QI(a,o)):QI(a,o)}var To=-1,Sa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function VR(n){return n instanceof Sa}function jR(n){return(n.flags&8)!==0}function BR(n){return(n.flags&16)!==0}var Xf={},mp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=_l(r);let i=this.injector.get(e,Xf,r);return i!==Xf||t===Xf?i:this.parentInjector.get(e,t,r)}};function gD(n){return n!==To}function tl(n){return n&32767}function UR(n){return n>>16}function nl(n,e){let t=UR(n),r=e;for(;t>0;)r=r[Fo],t--;return r}var yp=!0;function YI(n){let e=yp;return yp=n,e}var $R=256,mD=$R-1,yD=5,HR=0,Tn={};function qR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(wa)&&(r=t[wa]),r==null&&(r=t[wa]=HR++);let i=r&mD,o=1<<i;e.data[n+(i>>yD)]|=o}function vD(n,e){let t=_D(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,ep(r.data,n),ep(e,null),ep(r.blueprint,null));let i=tg(n,e),o=n.injectorIndex;if(gD(i)){let s=tl(i),a=nl(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function ep(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _D(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function tg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=CD(i),r===null)return To;if(t++,i=i[Fo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return To}function zR(n,e,t){qR(n,e,t)}function wD(n,e,t){if(t&de.Optional||n!==void 0)return n;$p(e,"NodeInjector")}function ID(n,e,t,r){if(t&de.Optional&&r===void 0&&(r=null),!(t&(de.Self|de.Host))){let i=n[Ao],o=Xt(void 0);try{return i?i.get(e,r,t&de.Optional):bE(e,r,t&de.Optional)}finally{Xt(o)}}return wD(r,e,t)}function ED(n,e,t,r=de.Default,i){if(n!==null){if(e[se]&2048&&!(r&de.Self)){let s=YR(n,e,t,r,Tn);if(s!==Tn)return s}let o=DD(n,e,t,r,Tn);if(o!==Tn)return o}return ID(e,t,r,i)}function DD(n,e,t,r,i){let o=KR(t);if(typeof o=="function"){if(!cD(e,n,r))return r&de.Host?wD(i,t,r):ID(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&de.Optional))$p(t);else return s}finally{hD()}}else if(typeof o=="number"){let s=null,a=_D(n,e),u=To,l=r&de.Host?e[An][pn]:null;for((a===-1||r&de.SkipSelf)&&(u=a===-1?tg(n,e):e[a+8],u===To||!JI(r,!1)?a=-1:(s=e[ge],a=tl(u),e=nl(u,e)));a!==-1;){let h=e[ge];if(ZI(o,a,h.data)){let p=GR(a,e,t,s,r,l);if(p!==Tn)return p}u=e[a+8],u!==To&&JI(r,e[ge].data[a+8]===l)&&ZI(o,a,e)?(s=h,a=tl(u),e=nl(u,e)):a=-1}}return i}function GR(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?El(a)&&yp:r!=s&&(a.type&3)!==0,l=i&de.Host&&o===a,h=WR(a,s,t,u,l);return h!==null?Aa(e,s,h,a):Tn}function WR(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<u&&t===b||v>=u&&b.type===t)return v}if(i){let v=s[u];if(v&&Na(v)&&v.type===t)return u}return null}function Aa(n,e,t,r){let i=n[t],o=e.data;if(VR(i)){let s=i;s.resolving&&IM(wM(o[t]));let a=YI(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Xt(s.injectImpl):null,h=cD(n,r,de.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&FR(t,o[t],e)}finally{l!==null&&Xt(l),YI(a),s.resolving=!1,hD()}}return i}function KR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(wa)?n[wa]:void 0;return typeof e=="number"?e>=0?e&mD:QR:e}function ZI(n,e,t){let r=1<<n;return!!(t[e+(n>>yD)]&r)}function JI(n,e){return!(n&de.Self)&&!(n&de.Host&&e)}var pi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ED(this._tNode,this._lView,e,_l(r),t)}};function QR(){return new pi(Rn(),st())}function ng(n){return Ma(()=>{let e=n.prototype.constructor,t=e[Gu]||vp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Gu]||vp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function vp(n){return wE(n)?()=>{let e=vp(en(n));return e&&e()}:bo(n)}function YR(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=DD(o,s,t,r|de.Self,Tn);if(a!==Tn)return a;let u=o.parent;if(!u){let l=s[HE];if(l){let h=l.get(t,Tn,r);if(h!==Tn)return h}u=CD(s),s=s[Fo]}o=u}return i}function CD(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[pn]:null}function XI(n,e=null,t=null,r){let i=TD(n,e,t,r);return i.resolveInjectorInitializers(),i}function TD(n,e=null,t=null,r,i=new Set){let o=[t||Cn,WM(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new Ta(o,e||Kp(),r||null,i)}var rn=class n{static{this.THROW_IF_NOT_FOUND=Da}static{this.NULL=new Qu}static create(e,t){if(Array.isArray(e))return XI({name:""},t,e,"");{let r=e.name??"";return XI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>O(xE)})}static{this.__NG_ELEMENT_ID__=-1}};var ZR=new Q("");ZR.__NG_ELEMENT_ID__=n=>{let e=Rn();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&de.Optional)return null;throw new te(204,!1)};var JR="ngOriginalError";function tp(n){return n[JR]}var bD=!0,rg=(()=>{class n{static{this.__NG_ELEMENT_ID__=XR}static{this.__NG_ENV_ID__=t=>t}}return n})(),_p=class extends rg{constructor(e){super(),this._lView=e}onDestroy(e){return eD(this._lView,e),()=>mR(this._lView,e)}};function XR(){return new _p(st())}var jo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var wp=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,$E()&&(this.destroyRef=j(rg,{optional:!0})??void 0,this.pendingTasks=j(jo,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},bt=wp;function rl(...n){}function SD(n){let e,t;function r(){n=rl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function eE(n){return queueMicrotask(()=>n()),()=>{n=rl}}var ig="isAngularZone",il=ig+"_ID",eN=0,ye=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bt(!1),this.onMicrotaskEmpty=new bt(!1),this.onStable=new bt(!1),this.onError=new bt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=bD}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,rN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ig)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,tN,rl,rl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},tN={};function og(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){SD(()=>{n.callbackScheduled=!1,Ip(n),n.isCheckStableRunning=!0,og(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ip(n)}function rN(n){let e=()=>{nN(n)},t=eN++;n._inner=n._inner.fork({name:"angular",properties:{[ig]:!0,[il]:t,[il+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(iN(u))return r.invokeTask(o,s,a,u);try{return tE(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),nE(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return tE(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!oN(u)&&e(),nE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ip(n),og(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ip(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function tE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nE(n){n._nesting--,og(n)}var ol=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bt,this.onMicrotaskEmpty=new bt,this.onStable=new bt,this.onError=new bt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function iN(n){return AD(n,"__ignore_ng_zone__")}function oN(n){return AD(n,"__scheduler_tick__")}function AD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function sN(n="zone.js",e){return n==="noop"?new ol:n==="zone.js"?new ye(e):n}var Xn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&tp(e);for(;t&&tp(t);)t=tp(t);return t||null}},aN=new Q("",{providedIn:"root",factory:()=>{let n=j(ye),e=j(Xn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function cN(){return Sl(Rn(),st())}function Sl(n,e){return new Al(Mn(n,e))}var Al=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=cN}}return n})();function xD(n){return(n.flags&128)===128}var MD=new Map,uN=0;function lN(){return uN++}function dN(n){MD.set(n[Il],n)}function Ep(n){MD.delete(n[Il])}var rE="__ngContext__";function vi(n,e){fi(e)?(n[rE]=e[Il],dN(e)):n[rE]=e}function RD(n){return PD(n[ba])}function ND(n){return PD(n[fn])}function PD(n){for(;n!==null&&!nr(n);)n=n[fn];return n}var Dp;function kD(n){Dp=n}function hN(){if(Dp!==void 0)return Dp;if(typeof document<"u")return document;throw new te(210,!1)}var xl=new Q("",{providedIn:"root",factory:()=>fN}),fN="ng",sg=new Q(""),Ot=new Q("",{providedIn:"platform",factory:()=>"unknown"});var ag=new Q("",{providedIn:"root",factory:()=>hN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pN="h",gN="b";var mN=()=>null;function cg(n,e,t=!1){return mN(n,e,t)}var OD=!1,yN=new Q("",{providedIn:"root",factory:()=>OD});var sl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yE})`}};function ug(n){return n instanceof sl?n.changingThisBreaksApplicationSecurity:n}function FD(n,e){let t=vN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${yE})`)}return t===e}function vN(n){return n instanceof sl&&n.getTypeName()||null}var _N=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function LD(n){return n=String(n),n.match(_N)?n:"unsafe:"+n}var lg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(lg||{});function VD(n){let e=wN();return e?e.sanitize(lg.URL,n)||"":FD(n,"URL")?ug(n):LD(Ea(n))}function wN(){let n=st();return n&&n[Sn].sanitizer}function jD(n){return n instanceof Function?n():n}function IN(n){return(n??j(rn)).get(Ot)==="browser"}var wi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(wi||{}),EN;function dg(n,e){return EN(n,e)}function Eo(n,e,t,r,i){if(r!=null){let o,s=!1;nr(r)?o=r:fi(r)&&(s=!0,r=r[tr]);let a=Jn(r);n===0&&t!==null?i==null?qD(e,t,a):al(e,t,a,i||null,!0):n===1&&t!==null?al(e,t,a,i||null,!0):n===2?LN(e,a,s):n===3&&e.destroyNode(a),o!=null&&jN(e,n,o,t,i)}}function DN(n,e){return n.createText(e)}function CN(n,e,t){n.setValue(e,t)}function BD(n,e,t){return n.createElement(e,t)}function TN(n,e){UD(n,e),e[tr]=null,e[pn]=null}function bN(n,e,t,r,i,o){r[tr]=i,r[pn]=e,Ml(n,r,t,1,i,o)}function UD(n,e){e[Sn].changeDetectionScheduler?.notify(9),Ml(n,e,e[zt],2,null,null)}function SN(n){let e=n[ba];if(!e)return np(n[ge],n);for(;e;){let t=null;if(fi(e))t=e[ba];else{let r=e[nn];r&&(t=r)}if(!t){for(;e&&!e[fn]&&e!==n;)fi(e)&&np(e[ge],e),e=e[St];e===null&&(e=n),fi(e)&&np(e[ge],e),t=e&&e[fn]}e=t}}function AN(n,e,t,r){let i=nn+r,o=t.length;r>0&&(t[i-1][fn]=e),r<o-nn?(e[fn]=t[i],AE(t,nn+r,e)):(t.push(e),e[fn]=null),e[St]=t;let s=e[xo];s!==null&&t!==s&&$D(s,e);let a=e[Mo];a!==null&&a.insertView(n),pp(e),e[se]|=128}function $D(n,e){let t=n[Ju],r=e[St];if(fi(r))n[se]|=Xu.HasTransplantedViews;else{let i=r[St][An];e[An]!==i&&(n[se]|=Xu.HasTransplantedViews)}t===null?n[Ju]=[e]:t.push(e)}function hg(n,e){let t=n[Ju],r=t.indexOf(e);t.splice(r,1)}function Cp(n,e){if(n.length<=nn)return;let t=nn+e,r=n[t];if(r){let i=r[xo];i!==null&&i!==n&&hg(i,r),e>0&&(n[t-1][fn]=r[fn]);let o=Ku(n,nn+e);TN(r[ge],r);let s=o[Mo];s!==null&&s.detachView(o[ge]),r[St]=null,r[fn]=null,r[se]&=-129}return r}function HD(n,e){if(!(e[se]&256)){let t=e[zt];t.destroyNode&&Ml(n,e,t,3,null,null),SN(e)}}function np(n,e){if(e[se]&256)return;let t=Te(null);try{e[se]&=-129,e[se]|=256,e[tn]&&Af(e[tn]),MN(n,e),xN(n,e),e[ge].type===1&&e[zt].destroy();let r=e[xo];if(r!==null&&nr(e[St])){r!==e[St]&&hg(r,e);let i=e[Mo];i!==null&&i.detachView(n)}Ep(e)}finally{Te(t)}}function xN(n,e){let t=n.cleanup,r=e[zI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[zI]=null);let i=e[Sr];if(i!==null){e[Sr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function MN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Sa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];br(4,a,u);try{u.call(a)}finally{br(5,a,u)}}else{br(4,i,o);try{o.call(i)}finally{br(5,i,o)}}}}}function RN(n,e,t){return NN(n,e.parent,t)}function NN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[tr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===bn.None||o===bn.Emulated)return null}return Mn(r,t)}}function al(n,e,t,r,i){n.insertBefore(e,t,r,i)}function qD(n,e,t){n.appendChild(e,t)}function iE(n,e,t,r,i){r!==null?al(n,e,t,r,i):qD(n,e,t)}function zD(n,e){return n.parentNode(e)}function PN(n,e){return n.nextSibling(e)}function kN(n,e,t){return FN(n,e,t)}function ON(n,e,t){return n.type&40?Mn(n,t):null}var FN=ON,oE;function fg(n,e,t,r){let i=RN(n,r,e),o=e[zt],s=r.parent||e[pn],a=kN(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)iE(o,i,t[u],a,!1);else iE(o,i,t,a,!1);oE!==void 0&&oE(o,r,e,t,i)}function _a(n,e){if(e!==null){let t=e.type;if(t&3)return Mn(e,n);if(t&4)return Tp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return _a(n,r);{let i=n[e.index];return nr(i)?Tp(-1,i):Jn(i)}}else{if(t&128)return _a(n,e.next);if(t&32)return dg(e,n)()||Jn(n[e.index]);{let r=GD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=mi(n[An]);return _a(i,r)}else return _a(n,e.next)}}}return null}function GD(n,e){if(e!==null){let r=n[An][pn],i=e.projection;return r.projection[i]}return null}function Tp(n,e){let t=nn+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return _a(r,i)}return e[gi]}function LN(n,e,t){n.removeChild(null,e,t)}function pg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&vi(Jn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)pg(n,e,t.child,r,i,o,!1),Eo(e,n,i,a,o);else if(u&32){let l=dg(t,r),h;for(;h=l();)Eo(e,n,i,h,o);Eo(e,n,i,a,o)}else u&16?VN(n,e,r,t,i,o):Eo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ml(n,e,t,r,i,o){pg(t,r,n.firstChild,e,i,o,!1)}function VN(n,e,t,r,i,o){let s=t[An],u=s[pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Eo(e,n,i,h,o)}else{let l=u,h=s[St];xD(r)&&(l.flags|=128),pg(n,e,l,h,i,o,!0)}}function jN(n,e,t,r,i){let o=t[gi],s=Jn(t);o!==s&&Eo(e,n,r,o,i);for(let a=nn;a<t.length;a++){let u=t[a];Ml(u[ge],u,n,e,r,o)}}function BN(n,e,t){n.setAttribute(e,"style",t)}function WD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function KD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&ap(n,e,r),i!==null&&WD(n,e,i),o!==null&&BN(n,e,o)}var Bo={};function re(n=1){QD(Vo(),st(),bl()+n,!1)}function QD(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Hu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&qu(e,o,0,t)}yi(t)}function He(n,e=de.Default){let t=st();if(t===null)return O(n,e);let r=Rn();return ED(r,t,en(n),e)}function YD(){let n="invalid";throw new Error(n)}function ZD(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&Ar.SignalBased&&(a=e[r][sI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ar.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):WE(e,a,r,o)}finally{Te(s)}}function UN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)yi(~i);else{let o=i,s=t[++r],a=t[++r];MR(s,o);let u=e[o];a(2,u)}}}finally{yi(-1)}}function Rl(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[tr]=i,p[se]=r|4|128|8|64,(l!==null||n&&n[se]&2048)&&(p[se]|=2048),JE(p),p[St]=p[Fo]=n,p[Yn]=t,p[Sn]=s||n&&n[Sn],p[zt]=a||n&&n[zt],p[Ao]=u||n&&n[Ao]||null,p[pn]=o,p[Il]=lN(),p[Yu]=h,p[HE]=l,p[An]=e.type==2?n[An]:p,p}function Nl(n,e,t,r,i){let o=n.data[e];if(o===null)o=$N(n,e,t,r,i),xR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=DR();o.injectorIndex=s===null?-1:s.injectorIndex}return Pa(o,!0),o}function $N(n,e,t,r,i){let o=rD(),s=iD(),a=s?o:o&&o.parent,u=n.data[e]=WN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function JD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function XD(n,e,t,r,i){let o=bl(),s=r&2;try{yi(-1),s&&e.length>Zn&&QD(n,e,Zn,!1),br(s?2:0,i),t(r,i)}finally{yi(o),br(s?3:1,i)}}function e0(n,e,t){if(zE(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Te(r)}}}function t0(n,e,t){nD()&&(eP(n,e,t,Mn(t,e)),(t.flags&64)===64&&s0(n,e,t))}function n0(n,e,t=Mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function r0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=gg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function gg(n,e,t,r,i,o,s,a,u,l,h){let p=Zn+r,m=p+i,v=HN(p,m),b=typeof l=="function"?l():l;return v[ge]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function HN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Bo);return t}function qN(n,e,t,r){let o=r.get(yN,OD)||t===bn.ShadowDom,s=n.selectRootElement(e,o);return zN(s),s}function zN(n){GN(n)}var GN=()=>null;function WN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return wR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function sE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Ar.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?aE(r,t,l,a,u):aE(r,t,l,a)}return r}function aE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function KN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;u=sE(0,p.inputs,h,u,v),l=sE(1,p.outputs,h,l,b);let R=u!==null&&s!==null&&!Gp(e)?uP(u,h,s):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function QN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function YN(n,e,t,r,i,o,s,a){let u=Mn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(mg(n,t,h,r,i),El(e)&&ZN(t,e.index)):e.type&3?(r=QN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function ZN(n,e){let t=Lo(e,n);t[se]&16||(t[se]|=64)}function i0(n,e,t,r){if(nD()){let i=r===null?null:{"":-1},o=nP(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&o0(n,e,t,s,i,a),i&&rP(t,r,i)}t.mergedAttrs=zp(t.mergedAttrs,t.attrs)}function o0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)zR(vD(t,e),n,r[l].type);oP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=JD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=zp(t.mergedAttrs,h.hostAttrs),sP(n,t,e,u,h),iP(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}KN(n,t,o)}function JN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;XN(s)!=a&&s.push(a),s.push(t,r,o)}}function XN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function eP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;El(t)&&aP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||vD(t,e),vi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Aa(e,n,a,t);if(vi(l,e),s!==null&&cP(e,a-i,l,u,t,s),Na(u)){let h=Lo(t.index,e);h[Yn]=Aa(e,n,a,t)}}}function s0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=RR();try{yi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];gp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&tP(u,l)}}finally{yi(-1),gp(s)}}function tP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function nP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(VM(e,s.selectors,!1))if(r||(r=[]),Na(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;bp(n,e,u)}else r.unshift(s),bp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function bp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}}function iP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Na(e)&&(t[""]=n)}}function oP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=bo(i.type,!0)),s=new Sa(o,Na(i),He);n.blueprint[r]=s,t[r]=s,JN(n,e,r,JD(n,t,i.hostVars,Bo),i)}function aP(n,e,t){let r=Mn(e,n),i=r0(t),o=n[Sn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Pl(n,Rl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function cP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];ZD(r,t,u,l,h,p)}}function uP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function a0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function c0(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];aD(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Pl(n,e){return n[ba]?n[GI][fn]=e:n[ba]=e,n[GI]=e,e}function Sp(n,e,t){aD(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function lP(n,e){let t=n[Ao],r=t?t.get(Xn,null):null;r&&r.handleError(e)}function mg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];ZD(h,l,r,a,u,i)}}function u0(n,e,t){let r=hR(e,n);CN(n[zt],r,t)}function dP(n,e){let t=Lo(e,n),r=t[ge];hP(r,t);let i=t[tr];i!==null&&t[Yu]===null&&(t[Yu]=cg(i,t[Ao])),yg(r,t,t[Yn])}function hP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function yg(n,e,t){Yp(e);try{let r=n.viewQuery;r!==null&&Sp(1,r,t);let i=n.template;i!==null&&XD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Mo]?.finishViewCreation(n),n.staticContentQueries&&c0(n,e),n.staticViewQueries&&Sp(2,n.viewQuery,t);let o=n.components;o!==null&&fP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Zp()}}function fP(n,e){for(let t=0;t<e.length;t++)dP(n,e[t])}function pP(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[se]&4096?4096:16,u=Rl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[xo]=l;let h=n[Mo];return h!==null&&(u[Mo]=h.createEmbeddedView(o)),yg(o,u,t),u}finally{Te(i)}}function cE(n,e){return!e||e.firstChild===null||xD(n)}function gP(n,e,t,r=!0){let i=e[ge];if(AN(i,e,n,t),r){let s=Tp(t,n),a=e[zt],u=zD(a,n[gi]);u!==null&&bN(i,n[pn],a,e,u,s)}let o=e[Yu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function cl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Jn(o)),nr(o)&&mP(o,r);let s=t.type;if(s&8)cl(n,e,t.child,r);else if(s&32){let a=dg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=GD(e,t);if(Array.isArray(a))r.push(...a);else{let u=mi(e[An]);cl(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function mP(n,e){for(let t=nn;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&cl(r[ge],r,i,e)}n[gi]!==n[tr]&&e.push(n[gi])}var l0=[];function yP(n){return n[tn]??vP(n)}function vP(n){let e=l0.pop()??Object.create(wP);return e.lView=n,e}function _P(n){n.lView[tn]!==n&&(n.lView=null,l0.push(n))}var wP=Me(W({},Tf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Tl(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function IP(n){let e=n[tn]??Object.create(EP);return e.lView=n,e}var EP=Me(W({},Tf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=mi(n.lView);for(;e&&!d0(e[ge]);)e=mi(e);e&&XE(e)},consumerOnSignalRead(){this.lView[tn]=this}});function d0(n){return n.type!==2}var DP=100;function h0(n,e=!0,t=0){let r=n[Sn],i=r.rendererFactory,o=!1;o||i.begin?.();try{CP(n,t)}catch(s){throw e&&lP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function CP(n,e){let t=oD();try{KI(!0),Ap(n,e);let r=0;for(;Cl(n);){if(r===DP)throw new te(103,!1);r++,Ap(n,1)}}finally{KI(t)}}function TP(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Sn].inlineEffectRunner?.flush(),Yp(e);let a=!0,u=null,l=null;o||(d0(n)?(l=yP(e),u=bf(l)):aI()===null?(a=!1,l=IP(e),u=bf(l)):e[tn]&&(Af(e[tn]),e[tn]=null));try{JE(e),SR(n.bindingStartIndex),t!==null&&XD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Hu(e,v,null)}else{let v=n.preOrderHooks;v!==null&&qu(e,v,0,null),Jf(e,0)}if(s||bP(e),f0(e,0),n.contentQueries!==null&&c0(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Hu(e,v)}else{let v=n.contentHooks;v!==null&&qu(e,v,1),Jf(e,1)}UN(n,e);let p=n.components;p!==null&&g0(e,p,0);let m=n.viewQuery;if(m!==null&&Sp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Hu(e,v)}else{let v=n.viewHooks;v!==null&&qu(e,v,2),Jf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Zf]){for(let v of e[Zf])v();e[Zf]=null}o||(e[se]&=-73)}catch(h){throw o||Tl(e),h}finally{l!==null&&(cI(l,u),a&&_P(l)),Zp()}}function f0(n,e){for(let t=RD(n);t!==null;t=ND(t))for(let r=nn;r<t.length;r++){let i=t[r];p0(i,e)}}function bP(n){for(let e=RD(n);e!==null;e=ND(e)){if(!(e[se]&Xu.HasTransplantedViews))continue;let t=e[Ju];for(let r=0;r<t.length;r++){let i=t[r];XE(i)}}}function SP(n,e,t){let r=Lo(e,n);p0(r,t)}function p0(n,e){Qp(n)&&Ap(n,e)}function Ap(n,e){let r=n[ge],i=n[se],o=n[tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Sf(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)TP(r,n,r.template,n[Yn]);else if(i&8192){f0(n,1);let a=r.components;a!==null&&g0(n,a,1)}}function g0(n,e,t){for(let r=0;r<e.length;r++)SP(n,e[r],t)}function m0(n,e){let t=oD()?64:1088;for(n[Sn].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=mi(n);if(hp(n)&&!r)return n;n=r}return null}var _i=class{get rootNodes(){let e=this._lView,t=e[ge];return cl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yn]}set context(e){this._lView[Yn]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[St];if(nr(e)){let t=e[Zu],r=t?t.indexOf(this):-1;r>-1&&(Cp(e,r),Ku(t,r))}this._attachedToViewContainer=!1}HD(this._lView[ge],this._lView)}onDestroy(e){eD(this._lView,e)}markForCheck(){m0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){pp(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,h0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=hp(this._lView),t=this._lView[xo];t!==null&&!e&&hg(t,this._lView),UD(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=hp(this._lView),r=this._lView[xo];r!==null&&!t&&$D(r,this._lView),pp(this._lView)}},kl=(()=>{class n{static{this.__NG_ELEMENT_ID__=MP}}return n})(),AP=kl,xP=class extends AP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=pP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _i(i)}};function MP(){return y0(Rn(),st())}function y0(n,e){return n.type&4?new xP(e,n,Sl(n,e)):null}var qq=new RegExp(`^(\\d+)*(${gN}|${pN})*(.*)`);var RP=()=>null;function uE(n,e){return RP(n,e)}var Ro=class{},vg=new Q("",{providedIn:"root",factory:()=>!1});var v0=new Q(""),_0=new Q(""),xp=class{},ul=class{};function NP(n){let e=Error(`No component factory found for ${kt(n)}.`);return e[PP]=n,e}var PP="ngComponent";var Mp=class{resolveComponentFactory(e){throw NP(e)}},No=class{static{this.NULL=new Mp}},Po=class{};var kP=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Rp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=OI(i,a);else if(o==2){let u=a,l=e[++s];r=OI(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ll=class extends No{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=xr(e);return new ko(t,this.ngModule)}};function lE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Ar.None;e?t.push({propName:s,templateName:r,isSignal:(a&Ar.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function OP(n){let e=n.toLowerCase();return e==="svg"?lR:e==="math"?dR:null}var ko=class extends ul{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=lE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return lE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$M(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new mp(e,s):e,u=a.get(Po,null);if(u===null)throw new te(407,!1);let l=a.get(kP,null),h=a.get(Ro,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?qN(m,r,this.componentDef.encapsulation,a):BD(m,v,OP(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let N=null;b!==null&&(N=cg(b,a,!0));let B=gg(0,null,null,1,0,null,null,null,null,null,null),z=Rl(null,B,null,R,null,null,p,m,a,null,N);Yp(z);let L,J,ie=null;try{let X=this.componentDef,I,y=null;X.findHostDirectiveDefs?(I=[],y=new Map,X.findHostDirectiveDefs(X,I,y),I.push(X)):I=[X];let w=FP(z,b);ie=LP(w,b,X,I,z,p,m),J=ZE(B,Zn),b&&BP(m,X,b,r),t!==void 0&&UP(J,this.ngContentSelectors,t),L=jP(ie,X,I,y,z,[$P]),yg(B,z,null)}catch(X){throw ie!==null&&Ep(ie),Ep(z),X}finally{Zp()}return new Np(this.componentType,L,Sl(J,z),z,J)}finally{Te(o)}}},Np=class extends xp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new _i(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;mg(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=Lo(this._tNode.index,o);m0(s,1)}}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FP(n,e){let t=n[ge],r=Zn;return n[r]=e,Nl(t,r,2,"#host",null)}function LP(n,e,t,r,i,o,s){let a=i[ge];VP(r,n,e,s);let u=null;e!==null&&(u=cg(e,i[Ao]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Rl(i,r0(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&bp(a,n,r.length-1),Pl(i,p),i[n.index]=p}function VP(n,e,t,r){for(let i of n)e.mergedAttrs=zp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Rp(e,e.mergedAttrs,!0),t!==null&&KD(r,t,e))}function jP(n,e,t,r,i,o){let s=Rn(),a=i[ge],u=Mn(s,i);o0(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Aa(i,a,p,s);vi(m,i)}s0(a,i,s),u&&vi(u,i);let l=Aa(i,a,s.directiveStart+s.componentOffset,s);if(n[Yn]=i[Yn]=l,o!==null)for(let h of o)h(l,e);return e0(a,s,i),l}function BP(n,e,t,r){if(r)ap(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=HM(e.selectors[0]);i&&ap(n,t,i),o&&o.length>0&&WD(n,t,o.join(" "))}}function UP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function $P(){let n=Rn();eg(st()[ge],n)}var Uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=HP}}return n})();function HP(){let n=Rn();return zP(n,st())}var qP=Uo,w0=class extends qP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Sl(this._hostTNode,this._hostLView)}get injector(){return new pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=tg(this._hostTNode,this._hostLView);if(gD(e)){let t=nl(e,this._hostLView),r=tl(e),i=t[ge].data[r+8];return new pi(i,t)}else return new pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=dE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=uE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,cE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!sR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new ko(xr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(qt,null);R&&(o=R)}let h=xr(u.componentType??{}),p=uE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,cE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(pR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[St],l=new w0(u,u[pn],u[St]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return gP(s,i,o,r),e.attachToViewContainerRef(),AE(rp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=dE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Cp(this._lContainer,t);r&&(Ku(rp(this._lContainer),t),HD(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=Cp(this._lContainer,t);return r&&Ku(rp(this._lContainer),t)!=null?new _i(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function dE(n){return n[Zu]}function rp(n){return n[Zu]||(n[Zu]=[])}function zP(n,e){let t,r=e[n.index];return nr(r)?t=r:(t=a0(r,e,null,n),e[n.index]=t,Pl(e,t)),WP(t,e,n,r),new w0(t,n,e)}function GP(n,e){let t=n[zt],r=t.createComment(""),i=Mn(e,n),o=zD(t,i);return al(t,o,r,PN(t,i),!1),r}var WP=YP,KP=()=>!1;function QP(n,e,t){return KP(n,e,t)}function YP(n,e,t,r){if(n[gi])return;let i;t.type&8?i=Jn(r):i=GP(e,t),n[gi]=i}var hE=new Set;function _g(n){hE.has(n)||(hE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ZP(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(t1))}return o}return dl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>n1(o));e.push(u)}),XP(),Promise.all(e).then(()=>{})}var dl=new Map,JP=new Set;function XP(){let n=dl;return dl=new Map,n}function e1(){return dl.size===0}function t1(n){return typeof n=="string"?n:n.text()}function n1(n){JP.delete(n)}var Mr=class{},xa=class{};var hl=class extends Mr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ll(this);let o=FE(e);this._bootstrapComponents=jD(o.bootstrap),this._r3Injector=TD(e,t,[{provide:Mr,useValue:this},{provide:No,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fl=class extends xa{constructor(e){super(),this.moduleType=e}create(e){return new hl(this.moduleType,e,[])}};function r1(n,e,t){return new hl(n,e,t,!1)}var Pp=class extends Mr{constructor(e){super(),this.componentFactoryResolver=new ll(this),this.instance=null;let t=new Ta([...e.providers,{provide:Mr,useValue:this},{provide:No,useValue:this.componentFactoryResolver}],e.parent||Kp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ol(n,e,t=null){return new Pp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function I0(n){return o1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function i1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function o1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function pl(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function s1(n,e,t,r){let i=pl(n,e,t);return pl(n,e+1,r)||i}function a1(n){return(n.flags&32)===32}function c1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Nl(e,n,4,s||null,a||null);i0(e,t,h,el(l,u)),eg(e,h);let p=h.tView=gg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function u1(n,e,t,r,i,o,s,a,u,l){let h=t+Zn,p=e.firstCreatePass?c1(h,e,n,r,i,o,s,a,u):e.data[h];Pa(p,!1);let m=l1(e,n,p,t);Jp()&&fg(e,n,m,p),vi(m,n);let v=a0(m,n,m,p);return n[h]=v,Pl(n,v),QP(v,p,n),GE(p)&&t0(e,n,p),u!=null&&n0(n,p,l),p}function Je(n,e,t,r,i,o,s,a){let u=st(),l=Vo(),h=el(l.consts,o);return u1(u,l,n,e,t,r,i,h,s,a),Je}var l1=d1;function d1(n,e,t,r){return Xp(!0),e[zt].createComment("")}var Do=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Do||{}),E0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),kp=class n{constructor(){this.ngZone=j(ye),this.scheduler=j(Ro),this.errorHandler=j(Xn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Do.EarlyRead,Do.Write,Do.MixedReadWrite,Do.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}},Op=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function wg(n,e){!e?.injector&&iR(wg);let t=e?.injector??j(rn);return IN(t)?(_g("NgAfterNextRender"),f1(n,t,e,!0)):p1}function h1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function f1(n,e,t,r){let i=e.get(E0);i.impl??=e.get(kp);let o=t?.phase??Do.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(rg):null,a=new Op(i.impl,h1(n,o),r,s);return i.impl.register(a),a}var p1={destroy(){}};function g1(n,e,t,r){return pl(n,sD(),t)?e+Ea(t)+r:Bo}function m1(n,e,t,r,i,o){let s=bR(),a=s1(n,s,t,i);return AR(2),a?e+Ea(t)+r+Ea(i)+o:Bo}function Ge(n,e,t){let r=st(),i=sD();if(pl(r,i,e)){let o=Vo(),s=kR();YN(o,s,r,n,e,r[zt],t,!1)}return Ge}function fE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";mg(n,t,o[s],s,r)}function y1(n,e,t,r,i,o){let s=e.consts,a=el(s,i),u=Nl(e,n,2,r,a);return i0(e,t,u,el(s,o)),u.attrs!==null&&Rp(u,u.attrs,!1),u.mergedAttrs!==null&&Rp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function K(n,e,t,r){let i=st(),o=Vo(),s=Zn+n,a=i[zt],u=o.firstCreatePass?y1(s,o,i,e,t,r):o.data[s],l=v1(o,i,u,a,e,n);i[s]=l;let h=GE(u);return Pa(u,!0),KD(a,l,u),!a1(u)&&Jp()&&fg(o,i,l,u),yR()===0&&vi(l,i),vR(),h&&(t0(o,i,u),e0(o,u,i)),r!==null&&n0(i,u),K}function F(){let n=Rn();iD()?CR():(n=n.parent,Pa(n,!1));let e=n;IR(e)&&ER(),_R();let t=Vo();return t.firstCreatePass&&(eg(t,n),zE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&jR(e)&&fE(t,e,st(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&BR(e)&&fE(t,e,st(),e.stylesWithoutHost,!1),F}function Gt(n,e,t,r){return K(n,e,t,r),F(),Gt}var v1=(n,e,t,r,i,o)=>(Xp(!0),BD(r,i,OR()));var gl="en-US";var _1=gl;function w1(n){typeof n=="string"&&(_1=n.toLowerCase().replace(/_/g,"-"))}function Ft(n=1){return PR(n)}function Lt(n){let e=TR();return fR(e,Zn+n)}function H(n,e=""){let t=st(),r=Vo(),i=n+Zn,o=r.firstCreatePass?Nl(r,i,1,e,null):r.data[i],s=I1(r,t,o,e,n);t[i]=s,Jp()&&fg(r,t,s,o),Pa(o,!1)}var I1=(n,e,t,r,i)=>(Xp(!0),DN(e[zt],r));function Ii(n){return ve("",n,""),Ii}function ve(n,e,t){let r=st(),i=g1(r,n,e,t);return i!==Bo&&u0(r,bl(),i),ve}function Ig(n,e,t,r,i){let o=st(),s=m1(o,n,e,t,r,i);return s!==Bo&&u0(o,bl(),s),Ig}var E1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=jE(!1,t.type),i=r.length>0?Ol([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(O(qt))})}}return n})();function D0(n){_g("NgStandalone"),n.getStandaloneInjector=e=>e.get(E1).getOrCreateStandaloneInjector(n)}function Vt(n,e){return y0(n,e)}var Bu=null;function D1(n){Bu!==null&&(n.defaultEncapsulation!==Bu.defaultEncapsulation||n.preserveWhitespaces!==Bu.preserveWhitespaces)||(Bu=n)}var Rr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},C0=new Rr("18.2.13");var Fl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Eg=new Q(""),ka=new Q(""),Ll=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Dg||(C1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(ye),O(Vl),O(ka))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Vl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Dg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function C1(n){Dg=n}var Dg;function Oa(n){return!!n&&typeof n.then=="function"}function T0(n){return!!n&&typeof n.subscribe=="function"}var jl=new Q(""),b0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(jl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Oa(o))t.push(o);else if(T0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cg=new Q("");function T1(){uI(()=>{throw new te(600,!1)})}function b1(n){return n.isBoundToModule}var S1=10;function A1(n,e,t){try{let r=t();return Oa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function S0(n,e){return Array.isArray(e)?e.reduce(S0,n):W(W({},n),e)}var Nr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(aN),this.afterRenderManager=j(E0),this.zonelessEnabled=j(vg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=j(jo).hasPendingTasks.pipe(ne(t=>!t)),this._injector=j(qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ul;if(!this._injector.get(b0).done){let m=!i&&OE(t),v=!1;throw new te(405,v)}let s;i?s=t:s=this._injector.get(No).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=b1(s)?void 0:this._injector.get(Mr),u=r||s.selector,l=s.create(rn.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Eg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),zu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new te(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Po,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<S1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)x1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Cl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;zu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Cg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function x1(n,e,t,r){if(!t&&!Cl(n))return;h0(n,e,t&&!r?0:1)}var Fp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Bl=(()=>{class n{compileModuleSync(t){return new fl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=FE(t),o=jD(i.declarations).reduce((s,a)=>{let u=xr(a);return u&&s.push(new ko(u)),s},[]);return new Fp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),M1=new Q("");function R1(n,e,t){let r=new fl(t);return Promise.resolve(r)}function pE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var N1=(()=>{class n{constructor(){this.zone=j(ye),this.changeDetectionScheduler=j(Ro),this.applicationRef=j(Nr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ye(Me(W({},A0()),{scheduleInRootZone:t})),[{provide:ye,useFactory:n},{provide:So,multi:!0,useFactory:()=>{let r=j(N1,{optional:!0});return()=>r.initialize()}},{provide:So,multi:!0,useFactory:()=>{let r=j(k1);return()=>{r.initialize()}}},e===!0?{provide:v0,useValue:!0}:[],{provide:_0,useValue:t??bD}]}function A0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var k1=(()=>{class n{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=j(ye),this.pendingTasks=j(jo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O1=(()=>{class n{constructor(){this.appRef=j(Nr),this.taskService=j(jo),this.ngZone=j(ye),this.zonelessEnabled=j(vg),this.disableScheduling=j(v0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ue,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(il):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(_0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ol||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?eE:SD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(il+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F1(){return typeof $localize<"u"&&$localize.locale||gl}var Tg=new Q("",{providedIn:"root",factory:()=>j(Tg,de.Optional|de.SkipSelf)||F1()});var ml=new Q("");function Uu(n){return!n.moduleRef}function L1(n){let e=Uu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ye);return t.run(()=>{Uu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Xn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Uu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ml);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ml);s.add(o),n.moduleRef.onDestroy(()=>{zu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return A1(r,t,()=>{let o=e.get(b0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Tg,gl);if(w1(s||gl),Uu(n)){let a=e.get(Nr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return V1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function V1(n,e){let t=n.injector.get(Nr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new te(-403,!1);e.push(n)}var x0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>sN(r?.ngZone,Me(W({},A0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[P1({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ro,useExisting:O1}],u=r1(t.moduleType,this.injector,a);return L1({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=S0({},r);return R1(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ml,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(rn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ia=null,M0=new Q("");function j1(n){if(Ia&&!Ia.get(M0,!1))throw new te(400,!1);T1(),Ia=n;let e=n.get(x0);return $1(n),e}function bg(n,e,t=[]){let r=`Platform: ${e}`,i=new Q(r);return(o=[])=>{let s=R0();if(!s||s.injector.get(M0,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):j1(B1(a,r))}return U1(i)}}function B1(n=[],e){return rn.create({name:e,providers:[{provide:wl,useValue:"platform"},{provide:ml,useValue:new Set([()=>Ia=null])},...n]})}function U1(n){let e=R0();if(!e)throw new te(401,!1);return e}function R0(){return Ia?.get(x0)??null}function $1(n){n.get(sg,null)?.forEach(t=>t())}function Sg(){return!1}var Fa=(()=>{class n{static{this.__NG_ELEMENT_ID__=H1}}return n})();function H1(n){return q1(Rn(),st(),(n&16)===16)}function q1(n,e,t){if(El(n)&&!t){let r=Lo(n.index,e);return new _i(r,r)}else if(n.type&175){let r=e[An];return new _i(r,e)}return null}var Lp=class{constructor(){}supports(e){return I0(e)}create(e){return new Vp(e)}},z1=(n,e)=>e,Vp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||z1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<gE(r,i,o)?t:r,a=gE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!I0(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,i1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new jp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new yl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new yl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},jp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Bp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},yl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Bp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function mE(){return new Ag([new Lp])}var Ag=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:mE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mE()),deps:[[n,new Hp,new Oo]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();var N0=bg(null,"core",[]),P0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Nr))}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=vt({})}}return n})();function k0(n){let e=xr(n);if(!e)return null;let t=new ko(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var B0=null;function Ei(){return B0}function U0(n){B0??=n}var Ul=class{};var jt=new Q(""),Pg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>j(Q1),providedIn:"platform"})}}return n})(),$0=new Q(""),Q1=(()=>{class n extends Pg{constructor(){super(),this._doc=j(jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ei().getBaseHref(this._doc)}onPopState(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function kg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function O0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function rr(n){return n&&n[0]!=="?"?"?"+n:n}var Di=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>j(Og),providedIn:"root"})}}return n})(),H0=new Q(""),Og=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return kg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Pg),O(H0,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),q0=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=kg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Pg),O(H0,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),$o=(()=>{class n{constructor(t){this._subject=new bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=J1(O0(F0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rr(r))}normalize(t){return n.stripTrailingSlash(Z1(this._basePath,F0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=rr}static{this.joinWithSlash=kg}static{this.stripTrailingSlash=O0}static{this.\u0275fac=function(r){return new(r||n)(O(Di))}}static{this.\u0275prov=q({token:n,factory:()=>Y1(),providedIn:"root"})}}return n})();function Y1(){return new $o(O(Di))}function Z1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function F0(n){return n.replace(/\/index.html$/,"")}function J1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function z0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Nn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),L0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);L0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(He(Uo),He(kl),He(Ag))}}static{this.\u0275dir=Ra({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function L0(n,e){n.context.$implicit=e.item}var Bt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Mg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){V0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){V0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(He(Uo),He(kl))}}static{this.\u0275dir=Ra({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Mg=class{constructor(){this.$implicit=null,this.ngIf=null}};function V0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}var G0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=vt({})}}return n})(),Fg="browser",X1="server";function ek(n){return n===Fg}function Ci(n){return n===X1}var W0=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>ek(j(Ot))?new Rg(j(jt),window):new Ng})}}return n})(),Rg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=tk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function tk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Ng=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},$l=class{};var jg=class extends Ul{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Bg=class n extends jg{static makeCurrent(){U0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=rk();return t==null?null:ik(t)}resetBaseElement(){La=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return z0(document.cookie,e)}},La=null;function rk(){return La=La||document.querySelector("base"),La?La.getAttribute("href"):null}function ik(n){return new URL(n,document.baseURI).pathname}var Ug=class{addToWindow(e){er.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new te(5103,!1);return o},er.getAllAngularTestabilities=()=>e.getAllTestabilities(),er.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=er.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};er.frameworkStabilizers||(er.frameworkStabilizers=[]),er.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ei().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},ok=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),$g=new Q(""),Z0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O($g),O(ye))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Hl=class{constructor(e){this._doc=e}},Lg="ng-app-id",J0=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ci(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Lg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Lg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Lg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(jt),O(xl),O(ag,8),O(Ot))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Vg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qg=/%COMP%/g,X0="%COMP%",sk=`_nghost-${X0}`,ak=`_ngcontent-${X0}`,ck=!0,uk=new Q("",{providedIn:"root",factory:()=>ck});function lk(n){return ak.replace(qg,n)}function dk(n){return sk.replace(qg,n)}function eC(n,e){return e.map(t=>t.replace(qg,n))}var K0=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ci(a),this.defaultRenderer=new Va(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===bn.ShadowDom&&(r=Me(W({},r),{encapsulation:bn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ql?i.applyToHost(t):i instanceof ja&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case bn.Emulated:o=new ql(u,l,r,this.appId,h,s,a,p);break;case bn.ShadowDom:return new Hg(u,l,t,r,s,a,this.nonce,p);default:o=new ja(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(Z0),O(J0),O(xl),O(uk),O(jt),O(Ot),O(ye),O(ag))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Va=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Vg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Q0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Q0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Vg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Vg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(wi.DashCase|wi.Important)?e.style.setProperty(t,r,i&wi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&wi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Q0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Hg=class extends Va{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=eC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ja=class extends Va{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?eC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ql=class extends ja{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=lk(l),this.hostAttr=dk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},hk=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Y0=["alt","control","meta","shift"],fk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},gk=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ei().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Y0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=fk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Y0.forEach(s=>{if(s!==i){let a=pk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function mk(){Bg.makeCurrent()}function yk(){return new Xn}function vk(){return kD(document),document}var _k=[{provide:Ot,useValue:Fg},{provide:sg,useValue:mk,multi:!0},{provide:jt,useFactory:vk,deps:[]}],tC=bg(N0,"browser",_k),wk=new Q(""),Ik=[{provide:ka,useClass:Ug,deps:[]},{provide:Eg,useClass:Ll,deps:[ye,Vl,ka]},{provide:Ll,useClass:Ll,deps:[ye,Vl,ka]}],Ek=[{provide:wl,useValue:"root"},{provide:Xn,useFactory:yk,deps:[]},{provide:$g,useClass:hk,multi:!0,deps:[jt,ye,Ot]},{provide:$g,useClass:gk,multi:!0,deps:[jt]},K0,J0,Z0,{provide:Po,useExisting:K0},{provide:$l,useClass:ok,deps:[]},[]],nC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:xl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(wk,12))}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=vt({providers:[...Ek,...Ik],imports:[G0,P0]})}}return n})();var rC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Dk="firebase",Ck="10.14.1";Ir(Dk,Ck,"app");var Ho=new Rr("ANGULARFIRE2_VERSION");var Tk=(n,e)=>{let t=e?[e]:oI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},bi=class{constructor(){return Tk(bk)}},bk="app-check";function zg(){}var zl=class{zone;delegate;constructor(e,t=Uf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Gg=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zg,{},zg,zg)),t.pipe(rt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Gl=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new zl(Zone.current)),this.insideAngular=t.run(()=>new zl(Zone.current,ga)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(ye))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sk(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ut(n){return Ak(Sk())(n)}function Ak(n){return function(t){return t=t.lift(new Gg(n.ngZone)),t.pipe(dn(n.outsideAngular),Zt(n.insideAngular))}}var xk="firebase",Mk="10.14.1";Nt.registerVersion(xk,Mk,"app-compat");var Rk=["ngOnDestroy"],aC=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Rk.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Wl=class{constructor(e){return e}},qo=new Q("angularfire2.app.options"),zo=new Q("angularfire2.app.name");function Ba(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Nt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Nt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;Nk("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Wl(s)}var Nk=(n,...e)=>{Sg()&&typeof console<"u"&&console[n](...e)},Pk={provide:Wl,useFactory:Ba,deps:[qo,ye,[new Oo,zo]]},cC=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:qo,useValue:t},{provide:zo,useValue:r}]}}constructor(t){Nt.registerVersion("angularfire",Ho.full,"core"),Nt.registerVersion("angularfire",Ho.full,"app-compat"),Nt.registerVersion("angular",C0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Ot))};static \u0275mod=_t({type:n});static \u0275inj=vt({providers:[Pk]})}return n})();function Kl(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return kk(i,s)||(sC("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Ok?" You may need to reload as Firebase is not HMR aware.":""}`),sC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function kk(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Ok=typeof module<"u"&&!!module.hot,sC=(n,...e)=>{Sg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Vk=new Map,jk={activated:!1,tokenObservers:[]},Bk={initialized:!1,enabled:!1};function gn(n){return Vk.get(n)||Object.assign({},jk)}function fC(){return Bk}var Uk="https://content-firebaseappcheck.googleapis.com/v1";var $k="exchangeDebugToken",uC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},l9=24*60*60*1e3;var Kg=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new wf,this.pending.promise.catch(t=>{}),yield Hk(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Hk(n){return new Promise(e=>{setTimeout(e,n)})}var qk={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Pr=new rI("appCheck","AppCheck",qk);function pC(n){if(!gn(n).activated)throw Pr.create("use-before-activation",{appName:n.name})}function gC(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(v){throw Pr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw Pr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(v){throw Pr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Pr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function mC(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Uk}/projects/${t}/apps/${r}:${$k}?key=${i}`,body:{debug_token:e}}}var zk="firebase-app-check-database",Gk=1,Qg="firebase-app-check-store";var Ql=null;function Wk(){return Ql||(Ql=new Promise((n,e)=>{try{let t=indexedDB.open(zk,Gk);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Pr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Qg,{keyPath:"compositeKey"})}}}catch(t){e(Pr.create("storage-open",{originalErrorMessage:t?.message}))}}),Ql)}function Kk(n,e){return Qk(Yk(n),e)}function Qk(n,e){return M(this,null,function*(){let r=(yield Wk()).transaction(Qg,"readwrite"),o=r.objectStore(Qg).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Pr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Yk(n){return`${n.options.appId}-${n.name}`}var Yg=new gu("@firebase/app-check");function Wg(n,e){return pu()?Kk(n,e).catch(t=>{Yg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function yC(){return fC().enabled}function vC(){return M(this,null,function*(){let n=fC();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Zk={error:"UNKNOWN_ERROR"};function Jk(n){return eI.encodeString(JSON.stringify(n),!1)}function Zg(n,e=!1){return M(this,null,function*(){let t=n.app;pC(t);let r=gn(t),i=r.token,o;if(i&&!Ua(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Ua(u)?i=u:yield Wg(t,void 0))}if(!e&&i&&Ua(i))return{token:i.token};let s=!1;if(yC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gC(mC(t,yield vC()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Wg(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield gn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Yg.warn(u.message):Yg.error(u),o=u}let a;return i?o?Ua(i)?a={token:i.token,internalError:o}:a=dC(o):(a={token:i.token},r.token=i,yield Wg(t,i)):a=dC(o),s&&nO(t,a),a})}function Xk(n){return M(this,null,function*(){let e=n.app;pC(e);let{provider:t}=gn(e);if(yC()){let r=yield vC(),{token:i}=yield gC(mC(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function eO(n,e,t,r){let{app:i}=n,o=gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ua(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),lC(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>lC(n))}function _C(n,e){let t=gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lC(n){let{app:e}=n,t=gn(e),r=t.tokenRefresher;r||(r=tO(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tO(n){let{app:e}=n;return new Kg(()=>M(this,null,function*(){let t=gn(e),r;if(t.token?r=yield Zg(n,!0):r=yield Zg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},uC.RETRIAL_MIN_WAIT,uC.RETRIAL_MAX_WAIT)}function nO(n,e){let t=gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ua(n){return n.expireTimeMillis-Date.now()>0}function dC(n){return{token:Jk(Zk),error:n}}var Jg=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gn(this.app);for(let t of e)_C(this.app,t.next);return Promise.resolve()}};function rO(n,e){return new Jg(n,e)}function iO(n){return{getToken:e=>Zg(n,e),getLimitedUseToken:()=>Xk(n),addTokenListener:e=>eO(n,"INTERNAL",e),removeTokenListener:e=>_C(n.app,e)}}var oO="@firebase/app-check",sO="0.8.8";var aO="app-check",hC="app-check-internal";function cO(){da(new si(aO,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return rO(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(hC).initialize()})),da(new si(hC,n=>{let e=n.getProvider("app-check").getImmediate();return iO(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ir(oO,sO)}cO();var uO=["localhost","0.0.0.0","127.0.0.1"],E9=typeof window<"u"&&uO.includes(window.location.hostname);var Xg=new Q("angularfire2.auth.use-emulator"),em=new Q("angularfire2.auth.settings"),tm=new Q("angularfire2.auth.tenant-id"),nm=new Q("angularfire2.auth.langugage-code"),rm=new Q("angularfire2.auth.use-device-language"),im=new Q("angularfire.auth.persistence"),om=(n,e,t,r,i,o,s,a)=>Kl(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),IC=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,v){let b=new ze,R=ee(void 0).pipe(Zt(s.outsideAngular),$e(()=>o.runOutsideAngular(()=>import("./chunk-3GWKGN6G.js"))),ne(()=>Ba(t,o,r)),ne(N=>om(N,o,a,l,h,p,u,m)),Lu({bufferSize:1,refCount:!1}));if(Ci(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{R.pipe(Jt()).subscribe();let N=R.pipe($e(L=>L.getRedirectResult().then(J=>J,()=>null)),Ut,Lu({bufferSize:1,refCount:!1})),B=R.pipe($e(L=>new pe(J=>({unsubscribe:o.runOutsideAngular(()=>L.onAuthStateChanged(ie=>J.next(ie),ie=>J.error(ie),()=>J.complete()))})))),z=R.pipe($e(L=>new pe(J=>({unsubscribe:o.runOutsideAngular(()=>L.onIdTokenChanged(ie=>J.next(ie),ie=>J.error(ie),()=>J.complete()))}))));this.authState=N.pipe(Vu(B),dn(s.outsideAngular),Zt(s.insideAngular)),this.user=N.pipe(Vu(z),dn(s.outsideAngular),Zt(s.insideAngular)),this.idToken=this.user.pipe($e(L=>L?De(L.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe($e(L=>L?De(L.getIdTokenResult()):ee(null))),this.credential=qf(N,b,this.authState.pipe(dt(L=>!L))).pipe(ne(L=>L?.user?L:null),dn(s.outsideAngular),Zt(s.insideAngular))}return aC(this,R,o,{spy:{apply:(N,B,z)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&z.then(L=>b.next(L))}}})}static \u0275fac=function(r){return new(r||n)(O(qo),O(zo,8),O(Ot),O(ye),O(Gl),O(Xg,8),O(em,8),O(tm,8),O(nm,8),O(rm,8),O(im,8),O(bi,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var EC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DC={};var kr,sm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),qn=2;qn<arguments.length;qn++)_[qn-2]=arguments[qn];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(R(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=J(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=B(this,I),R(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(R(this))return R(I)?N(this).j(N(I)):N(N(this).j(I));if(R(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,qn=I.i(D)>>>16,zs=I.i(D)&65535;w[2*E+2*D]+=_*zs,z(w,2*E+2*D),w[2*E+2*D+1]+=T*zs,z(w,2*E+2*D+1),w[2*E+2*D+1]+=_*qn,z(w,2*E+2*D+1),w[2*E+2*D+2]+=T*qn,z(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function z(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function L(I,y){this.g=I,this.h=y}function J(I,y){if(b(y))throw Error("division by zero");if(b(I))return new L(p,p);if(R(I))return y=J(N(I),y),new L(N(y.g),N(y.h));if(R(y))return y=J(I,N(y)),new L(N(y.g),y.h);if(30<I.g.length){if(R(I)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ie(w),E=ie(E);var D=X(w,1),T=X(E,1);for(E=X(E,2),w=X(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=X(E,1),w=X(w,1)}return y=B(I,D.j(y)),new L(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);R(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new L(D,I)}n.A=function(I){return J(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ie(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function X(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sm=DC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,kr=DC.Integer=s}).apply(typeof EC<"u"?EC:typeof self<"u"?self:typeof window<"u"?window:{});var Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var am,dO,Go,cm,$a,Zl,um,lm,dm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yl=="object"&&Yl];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var V=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)V[Se-2]=arguments[Se];return d.prototype[C].apply(g,V)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let V=0;V<A;V++)c[C+V]=g[V]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function L(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var ie=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function X(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Wh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class qn{constructor(){this.h=this.g=null}add(d,f){let g=zs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var zs=new B(()=>new ox,c=>c.reset());class ox{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Gs,Ws=!1,Wh=new qn,Y_=()=>{let c=a.Promise.resolve(void 0);Gs=()=>{c.then(sx)}};var sx=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=zs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ws=!1};function yr(){this.s=this.s,this.C=this.C}yr.prototype.s=!1,yr.prototype.ma=function(){this.s||(this.s=!0,this.N())},yr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var ax=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ks(c,d){if(pt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ie){e:{try{J(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:cx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ks.aa.h.call(this)}}b(Ks,pt);var cx={2:"touch",3:"pen",4:"mouse"};Ks.prototype.h=function(){Ks.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Qs="closure_listenable_"+(1e6*Math.random()|0),ux=0;function lx(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++ux,this.da=this.fa=!1}function Yc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Zc(c){this.src=c,this.g={},this.h=0}Zc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var V=Qh(c,d,g,C);return-1<V?(d=c[V],f||(d.fa=!1)):(d=new lx(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Kh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Yc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Qh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Yh="closure_lm_"+(1e6*Math.random()|0),Zh={};function Z_(c,d,f,g,C){if(g&&g.once)return X_(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Z_(c,d[A],f,g,C);return null}return f=tf(f),c&&c[Qs]?c.K(d,f,l(g)?!!g.capture:!!g,C):J_(c,d,f,!1,g,C)}function J_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var V=l(C)?!!C.capture:!!C,Se=Xh(c);if(Se||(c[Yh]=Se=new Zc(c)),f=Se.add(d,f,g,V,A),f.proxy)return f;if(g=dx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)ax||(C=V),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(tw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function dx(){function c(f){return d.call(c.src,c.listener,f)}let d=hx;return c}function X_(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)X_(c,d[A],f,g,C);return null}return f=tf(f),c&&c[Qs]?c.L(d,f,l(g)?!!g.capture:!!g,C):J_(c,d,f,!0,g,C)}function ew(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)ew(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=tf(f),c&&c[Qs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Qh(A,f,g,C),-1<f&&(Yc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Xh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Qh(d,f,g,C)),(f=-1<c?d[c]:null)&&Jh(f))}function Jh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Qs])Kh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(tw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Xh(d))?(Kh(f,c),f.h==0&&(f.src=null,d[Yh]=null)):Yc(c)}}}function tw(c){return c in Zh?Zh[c]:Zh[c]="on"+c}function hx(c,d){if(c.da)c=!0;else{d=new Ks(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Jh(c),c=f.call(g,d)}return c}function Xh(c){return c=c[Yh],c instanceof Zc?c:null}var ef="__closure_events_fn_"+(1e9*Math.random()>>>0);function tf(c){return typeof c=="function"?c:(c[ef]||(c[ef]=function(d){return c.handleEvent(d)}),c[ef])}function gt(){yr.call(this),this.i=new Zc(this),this.M=this,this.F=null}b(gt,yr),gt.prototype[Qs]=!0,gt.prototype.removeEventListener=function(c,d,f,g){ew(this,c,d,f,g)};function Et(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new pt(d,c);else if(d instanceof pt)d.target=d.target||c;else{var C=d;d=new pt(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var V=d.g=f[A];C=Jc(V,g,!0,d)&&C}if(V=d.g=c,C=Jc(V,g,!0,d)&&C,C=Jc(V,g,!1,d)&&C,f)for(A=0;A<f.length;A++)V=d.g=f[A],C=Jc(V,g,!1,d)&&C}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Yc(f[g]);delete c.g[d],c.h--}}this.F=null},gt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},gt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Jc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var V=d[A];if(V&&!V.da&&V.capture==f){var Se=V.listener,ut=V.ha||V.src;V.fa&&Kh(c.i,V),C=Se.call(ut,g)!==!1&&C}}return C&&!g.defaultPrevented}function nw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function rw(c){c.g=nw(()=>{c.g=null,c.i&&(c.i=!1,rw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class fx extends yr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(c){yr.call(this),this.h=c,this.g={}}b(Ys,yr);var iw=[];function ow(c){X(c.g,function(d,f){this.g.hasOwnProperty(f)&&Jh(d)},c),c.g={}}Ys.prototype.N=function(){Ys.aa.N.call(this),ow(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nf=a.JSON.stringify,px=a.JSON.parse,gx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function rf(){}rf.prototype.h=null;function sw(c){return c.h||(c.h=c.i())}function aw(){}var Zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function of(){pt.call(this,"d")}b(of,pt);function sf(){pt.call(this,"c")}b(sf,pt);var ni={},cw=null;function Xc(){return cw=cw||new gt}ni.La="serverreachability";function uw(c){pt.call(this,ni.La,c)}b(uw,pt);function Js(c){let d=Xc();Et(d,new uw(d))}ni.STAT_EVENT="statevent";function lw(c,d){pt.call(this,ni.STAT_EVENT,c),this.stat=d}b(lw,pt);function Dt(c){let d=Xc();Et(d,new lw(d,c))}ni.Ma="timingevent";function dw(c,d){pt.call(this,ni.Ma,c),this.size=d}b(dw,pt);function Xs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ea(){this.g=!0}ea.prototype.xa=function(){this.g=!1};function mx(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var V="",Se=A.split("&"),ut=0;ut<Se.length;ut++){var Ee=Se[ut].split("=");if(1<Ee.length){var mt=Ee[0];Ee=Ee[1];var yt=mt.split("_");V=2<=yt.length&&yt[1]=="type"?V+(mt+"="+Ee+"&"):V+(mt+"=redacted&")}}else V=null;else V=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+V})}function yx(c,d,f,g,C,A,V){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+V})}function ro(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+_x(c,f)+(g?" "+g:"")})}function vx(c,d){c.info(function(){return"TIMEOUT: "+d})}ea.prototype.info=function(){};function _x(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var V=1;V<C.length;V++)C[V]=""}}}}return nf(f)}catch{return d}}var eu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},af;function tu(){}b(tu,rf),tu.prototype.g=function(){return new XMLHttpRequest},tu.prototype.i=function(){return{}},af=new tu;function vr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fw}function fw(){this.i=null,this.g="",this.h=!1}var pw={},cf={};function uf(c,d,f){c.L=1,c.v=ou(zn(d)),c.m=f,c.P=!0,gw(c,null)}function gw(c,d){c.F=Date.now(),nu(c),c.A=zn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),xw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new fw,c.g=Ww(c.j,f?d:null,!c.m),0<c.O&&(c.M=new fx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(iw[0]=C.toString()),C=iw);for(var A=0;A<C.length;A++){var V=Z_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Js(),mx(c.i,c.u,c.A,c.l,c.R,c.m)}vr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Gn(c)==3?d.j():this.Y(c)},vr.prototype.Y=function(c){try{if(c==this.g)e:{let yt=Gn(this.g);var d=this.g.Ba();let so=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Fw(this.g)))){this.J||yt!=4||d==7||(d==8||0>=so?Js(3):Js(2)),lf(this);var f=this.g.Z();this.X=f;t:if(mw(this)){var g=Fw(this.g);c="";var C=g.length,A=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),ta(this);var V="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=f==200,yx(this.i,this.u,this.A,this.l,this.R,yt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ut=this.g;if((Se=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Se)){var Ee=Se;break t}}Ee=null}if(f=Ee)ro(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,df(this,f);else{this.o=!1,this.s=3,Dt(12),ri(this),ta(this);break e}}if(this.P){f=!0;let un;for(;!this.J&&this.C<V.length;)if(un=wx(this,V),un==cf){yt==4&&(this.s=4,Dt(14),f=!1),ro(this.i,this.l,null,"[Incomplete Response]");break}else if(un==pw){this.s=4,Dt(15),ro(this.i,this.l,V,"[Invalid Chunk]"),f=!1;break}else ro(this.i,this.l,un,null),df(this,un);if(mw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||V.length!=0||this.h.h||(this.s=1,Dt(16),f=!1),this.o=this.o&&f,!f)ro(this.i,this.l,V,"[Invalid Chunked Response]"),ri(this),ta(this);else if(0<V.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),yf(mt),mt.M=!0,Dt(11))}}else ro(this.i,this.l,V,null),df(this,V);yt==4&&ri(this),this.o&&!this.J&&(yt==4?Hw(this.j,this):(this.o=!1,nu(this)))}else Lx(this.g),f==400&&0<V.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),ri(this),ta(this)}}}catch{}finally{}};function mw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?cf:(f=Number(d.substring(f,g)),isNaN(f)?pw:(g+=1,g+f>d.length?cf:(d=d.slice(g,g+f),c.C=g+f,d)))}vr.prototype.cancel=function(){this.J=!0,ri(this)};function nu(c){c.S=Date.now()+c.I,yw(c,c.I)}function yw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Xs(m(c.ba,c),d)}function lf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(vx(this.i,this.A),this.L!=2&&(Js(),Dt(17)),ri(this),this.s=2,ta(this)):yw(this,this.S-c)};function ta(c){c.j.G==0||c.J||Hw(c.j,c)}function ri(c){lf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ow(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function df(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||hf(f.h,c))){if(!c.K&&hf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)lu(f),cu(f);else break e;mf(f),Dt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Xs(m(f.Za,f),6e3));if(1>=ww(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else oi(f,11)}else if((c.K||f.g==c)&&lu(f),!z(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ee=C[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let mt=Ee[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let yt=Ee[4];yt!=null&&(f.Aa=yt,f.j.info("SVER="+f.Aa));let so=Ee[5];so!=null&&typeof so=="number"&&0<so&&(g=1.5*so,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let un=c.g;if(un){let hu=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var A=g.h;A.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ff(A,A.h),A.h=null))}if(g.D){let vf=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;vf&&(g.ya=vf,Ne(g.I,g.D,vf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var V=c;if(g.qa=Gw(g,g.J?g.ia:null,g.W),V.K){Iw(g.h,V);var Se=V,ut=g.L;ut&&(Se.I=ut),Se.B&&(lf(Se),nu(Se)),g.g=V}else Uw(g);0<f.i.length&&uu(f)}else Ee[0]!="stop"&&Ee[0]!="close"||oi(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?oi(f,7):gf(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}Js(4)}catch{}}var Ix=class{constructor(c,d){this.g=c,this.map=d}};function vw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _w(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ww(c){return c.h?1:c.g?c.g.size:0}function hf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function ff(c,d){c.g?c.g.add(d):c.h=d}function Iw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}vw.prototype.cancel=function(){if(this.i=Ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Ew(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function Ex(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Dx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Dw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Dx(c),g=Ex(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var Cw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ii(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ii){this.h=c.h,ru(this,c.j),this.o=c.o,this.g=c.g,iu(this,c.s),this.l=c.l;var d=c.i,f=new ia;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Tw(this,f),this.m=c.m}else c&&(d=String(c).match(Cw))?(this.h=!1,ru(this,d[1]||"",!0),this.o=na(d[2]||""),this.g=na(d[3]||"",!0),iu(this,d[4]),this.l=na(d[5]||"",!0),Tw(this,d[6]||"",!0),this.m=na(d[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}ii.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ra(d,bw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ra(d,bw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ra(f,f.charAt(0)=="/"?Sx:bx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ra(f,xx)),c.join("")};function zn(c){return new ii(c)}function ru(c,d,f){c.j=f?na(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function iu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Tw(c,d,f){d instanceof ia?(c.i=d,Mx(c.i,c.h)):(f||(d=ra(d,Ax)),c.i=new ia(d,c.h))}function Ne(c,d,f){c.i.set(d,f)}function ou(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function na(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ra(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Tx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Tx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bw=/[#\/\?@]/g,bx=/[#\?:]/g,Sx=/[#\?]/g,Ax=/[#\?@]/g,xx=/#/g;function ia(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function _r(c){c.g||(c.g=new Map,c.h=0,c.i&&Cx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ia.prototype,n.add=function(c,d){_r(this),this.i=null,c=io(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Sw(c,d){_r(c),d=io(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Aw(c,d){return _r(c),d=io(c,d),c.g.has(d)}n.forEach=function(c,d){_r(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){_r(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){_r(this);let d=[];if(typeof c=="string")Aw(this,c)&&(d=d.concat(this.g.get(io(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return _r(this),this.i=null,c=io(this,c),Aw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function xw(c,d,f){Sw(c,d),0<f.length&&(c.i=null,c.g.set(io(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),V=this.V(g);for(g=0;g<V.length;g++){var C=A;V[g]!==""&&(C+="="+encodeURIComponent(String(V[g]))),c.push(C)}}return this.i=c.join("&")};function io(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Mx(c,d){d&&!c.j&&(_r(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Sw(this,g),xw(this,C,f))},c)),c.j=d}function Rx(c,d){let f=new ea;if(a.Image){let g=new Image;g.onload=v(wr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(wr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(wr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(wr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Nx(c,d){let f=new ea,g=new AbortController,C=setTimeout(()=>{g.abort(),wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?wr(f,"TestPingServer: ok",!0,d):wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),wr(f,"TestPingServer: error",!1,d)})}function wr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function Px(){this.g=new gx}function kx(c,d,f){let g=f||"";try{Dw(c,function(C,A){let V=C;l(C)&&(V=nf(C)),d.push(g+A+"="+encodeURIComponent(V))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function oa(c){this.l=c.Ub||null,this.j=c.eb||!1}b(oa,rf),oa.prototype.g=function(){return new su(this.l,this.j)},oa.prototype.i=function(c){return function(){return c}}({});function su(c,d){gt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(su,gt),n=su.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,aa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?sa(this):aa(this),this.readyState==3&&Mw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,sa(this))},n.Qa=function(c){this.g&&(this.response=c,sa(this))},n.ga=function(){this.g&&sa(this)};function sa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,aa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function aa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rw(c){let d="";return X(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function pf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Rw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ne(c,d,f))}function Be(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Be,gt);var Ox=/^https?$/i,Fx=["POST","PUT"];n=Be.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():af.g(),this.v=this.o?sw(this.o):sw(af),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Nw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,V]of f)this.g.setRequestHeader(A,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ow(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Nw(this,A)}};function Nw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Pw(c),au(c)}function Pw(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),au(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),au(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?kw(this):this.bb())},n.bb=function(){kw(this)};function kw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Gn(c)!=4||c.Z()!=2)){if(c.u&&Gn(c)==4)nw(c.Ea,0,c);else if(Et(c,"readystatechange"),Gn(c)==4){c.h=!1;try{let V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=V===0){var C=String(c.D).match(Cw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Ox.test(C?C.toLowerCase():"")}f=g}if(f)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var A=2<Gn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Pw(c)}}finally{au(c)}}}}function au(c,d){if(c.g){Ow(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Et(c,"ready");try{f.onreadystatechange=g}catch{}}}function Ow(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Gn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),px(d)}};function Fw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Lx(c){let d={};c=(c.g&&2<=Gn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Lw(c){this.Aa=0,this.i=[],this.j=new ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,c),this.cb=ca("retryDelaySeedMs",1e4,c),this.Wa=ca("forwardChannelMaxRetries",2,c),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new vw(c&&c.concurrentRequestLimit),this.Da=new Px,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Dt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Gw(this,null,this.W),uu(this)};function gf(c){if(Vw(c),c.G==3){var d=c.U++,f=zn(c.I);if(Ne(f,"SID",c.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),ua(c,f),d=new vr(c,c.j,d),d.L=2,d.v=ou(zn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Ww(d.j,null),d.g.ea(d.v)),d.F=Date.now(),nu(d)}zw(c)}function cu(c){c.g&&(yf(c),c.g.cancel(),c.g=null)}function Vw(c){cu(c),c.u&&(a.clearTimeout(c.u),c.u=null),lu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function uu(c){if(!_w(c.h)&&!c.s){c.s=!0;var d=c.Ga;Gs||Y_(),Ws||(Gs(),Ws=!0),Wh.add(d,c),c.B=0}}function Vx(c,d){return ww(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Xs(m(c.Ga,c,d),qw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new vr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Bw(this,C,d),f=zn(this.I),Ne(f,"RID",c),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),ua(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Rw(A)))+"&"+d:this.m&&pf(f,this.m,A)),ff(this.h,C),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),C.T=!0,uf(C,f,null)):uf(C,f,d),this.G=2}}else this.G==3&&(c?jw(this,c):this.i.length==0||_w(this.h)||jw(this))};function jw(c,d){var f;d?f=d.l:f=c.U++;let g=zn(c.I);Ne(g,"SID",c.K),Ne(g,"RID",f),Ne(g,"AID",c.T),ua(c,g),c.m&&c.o&&pf(g,c.m,c.o),f=new vr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Bw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ff(c.h,f),uf(f,g,d)}function ua(c,d){c.H&&X(c.H,function(f,g){Ne(d,g,f)}),c.l&&Dw({},function(f,g){Ne(d,g,f)})}function Bw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let V=["count="+f];A==-1?0<f?(A=C[0].g,V.push("ofs="+A)):A=0:V.push("ofs="+A);let Se=!0;for(let ut=0;ut<f;ut++){let Ee=C[ut].g,mt=C[ut].map;if(Ee-=A,0>Ee)A=Math.max(0,C[ut].g-100),Se=!1;else try{kx(mt,V,"req"+Ee+"_")}catch{g&&g(mt)}}if(Se){g=V.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Uw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Gs||Y_(),Ws||(Gs(),Ws=!0),Wh.add(d,c),c.v=0}}function mf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Xs(m(c.Fa,c),qw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,$w(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Xs(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),cu(this),$w(this))};function yf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $w(c){c.g=new vr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=zn(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),ua(c,d),c.m&&c.o&&pf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ou(zn(d)),f.m=null,f.P=!0,gw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,cu(this),mf(this),Dt(19))};function lu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Hw(c,d){var f=null;if(c.g==d){lu(c),yf(c),c.g=null;var g=2}else if(hf(c.h,d))f=d.D,Iw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Xc(),Et(g,new dw(g,f)),uu(c)}else Uw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Vx(c,d)||g==2&&mf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:oi(c,5);break;case 4:oi(c,10);break;case 3:oi(c,6);break;default:oi(c,2)}}}function qw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function oi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new ii(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ru(g,"https"),ou(g),C?Rx(g.toString(),f):Nx(g.toString(),f)}else Dt(2);c.G=0,c.l&&c.l.sa(d),zw(c),Vw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function zw(c){if(c.G=0,c.ka=[],c.l){let d=Ew(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Gw(c,d,f){var g=f instanceof ii?zn(f):new ii(f);if(g.g!="")d&&(g.g=d+"."+g.g),iu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ii(null);g&&ru(A,g),d&&(A.g=d),C&&iu(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",c.la),ua(c,g),g}function Ww(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Be(new oa({eb:f})):new Be(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kw(){}n=Kw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function du(){}du.prototype.g=function(c,d){return new Ht(c,d)};function Ht(c,d){gt.call(this),this.g=new Lw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new oo(this)}b(Ht,gt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){gf(this.g)},Ht.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=nf(c),c=f);d.i.push(new Ix(d.Ya++,c)),d.G==3&&uu(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,gf(this.g),delete this.g,Ht.aa.N.call(this)};function Qw(c){of.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(Qw,of);function Yw(){sf.call(this),this.status=1}b(Yw,sf);function oo(c){this.g=c}b(oo,Kw),oo.prototype.ua=function(){Et(this.g,"a")},oo.prototype.ta=function(c){Et(this.g,new Qw(c))},oo.prototype.sa=function(c){Et(this.g,new Yw)},oo.prototype.ra=function(){Et(this.g,"b")},du.prototype.createWebChannel=du.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,dm=ir.createWebChannelTransport=function(){return new du},lm=ir.getStatEventTarget=function(){return Xc()},um=ir.Event=ni,Zl=ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eu.NO_ERROR=0,eu.TIMEOUT=8,eu.HTTP_ERROR=6,$a=ir.ErrorCode=eu,hw.COMPLETE="complete",cm=ir.EventType=hw,aw.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Go=ir.WebChannel=aw,dO=ir.FetchXmlHttpFactory=oa,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,am=ir.XhrIo=Be}).apply(typeof Yl<"u"?Yl:typeof self<"u"?self:typeof window<"u"?window:{});var CC="@firebase/firestore";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var Ds="10.14.0";var Ur=new gu("@firebase/firestore");function Zo(){return Ur.logLevel}function ST(n){Ur.setLogLevel(n)}function k(n,...e){if(Ur.logLevel<=En.DEBUG){let t=e.map(mv);Ur.debug(`Firestore (${Ds}): ${n}`,...t)}}function We(n,...e){if(Ur.logLevel<=En.ERROR){let t=e.map(mv);Ur.error(`Firestore (${Ds}): ${n}`,...t)}}function mn(n,...e){if(Ur.logLevel<=En.WARN){let t=e.map(mv);Ur.warn(`Firestore (${Ds}): ${n}`,...t)}}function mv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n="Unexpected state"){let e=`FIRESTORE (${Ds}) INTERNAL ASSERTION FAILED: `+n;throw We(e),new Error(e)}function Y(n,e){n||G()}function AT(n,e){n||G()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends nI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var it=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ad=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ym=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},vm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},_m=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new it;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new it,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>M(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new it)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new ad(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new tt(e)}},wm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Im=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new wm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Em=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Y(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string"),this.R=t.token,new Em(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function hO(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var cd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=hO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function ss(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function xT(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ud=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(),r===void 0?r=e.length-t:r>e.length-t&&G(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},we=class n extends ud{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},fO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ke=class n extends ud{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return fO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(we.fromString(e))}static fromName(e){return new n(we.fromString(e).popFirst(5))}static empty(){return new n(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return we.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new we(e.slice()))}};var as=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Cm(n){return n.fields.find(e=>e.kind===2)}function Ai(n){return n.fields.filter(e=>e.kind!==2)}as.UNKNOWN_ID=-1;var rs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ec=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,sn.min())}};function MT(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new sn(i,$.empty(),e)}function RT(n){return new sn(n.readTime,n.key,-1)}var sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),$.empty(),-1)}static max(){return new n(Z.max(),$.empty(),-1)}};function yv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var NT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ld=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Zr(n){return M(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==NT)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var dd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new it,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ki(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=vv(r.target.error);this.V.reject(new ki(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ki(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new bm(t)}},$r=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(la())===12.2&&We("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),xi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pu())return!1;if(n.v())return!0;let e=la(),t=n.S(e),r=0<t&&t<10,i=PT(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ki(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ki(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=dd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function PT(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Tm=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xi(this.B.delete())}},ki=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Jr(n){return n.name==="IndexedDbTransactionError"}var bm=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),xi(this.store.add(e))}get(e){return xi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),xi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),xi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=vv(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Tm(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function xi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=vv(r.target.error);t(i)}})}var TC=!1;function vv(n){let e=$r.S(la());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TC||(TC=!0,setTimeout(()=>{throw r},0)),r}}return n}var Sm=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Jr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Zr(t)}yield this.X(6e4)}))}},Am=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=RT(o);yv(s,r)>0&&(r=s)}),new sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Wt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ic(n){return n==null}function tc(n){return n===0&&1/n==-1/0}function kT(n){return typeof n=="number"&&Number.isInteger(n)&&!tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function At(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bC(e)),e=pO(n.get(t),e);return bC(e)}function pO(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function bC(n){return n+""}function Pn(n){let e=n.length;if(Y(e>=2),e===2)return Y(n.charAt(0)===""&&n.charAt(1)===""),we.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&G(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:G()}o=s+2}return new we(r)}var SC=["userId","batchId"];function nd(n,e){return[n,At(e)]}function OT(n,e,t){return[n,At(e),t]}var gO={},mO=["prefixPath","collectionGroup","readTime","documentId"],yO=["prefixPath","collectionGroup","documentId"],vO=["collectionGroup","readTime","prefixPath","documentId"],_O=["canonicalId","targetId"],wO=["targetId","path"],IO=["path","targetId"],EO=["collectionId","parent"],DO=["indexId","uid"],CO=["uid","sequenceNumber"],TO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bO=["indexId","uid","orderedDocumentKey"],SO=["userId","collectionPath","documentId"],AO=["userId","collectionPath","largestBatchId"],xO=["userId","collectionGroup","largestBatchId"],FT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MO=[...FT,"documentOverlays"],LT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VT=LT,_v=[...VT,"indexConfiguration","indexState","indexEntries"],RO=_v,NO=[..._v,"globals"];var nc=class extends ld{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ot(n,e){let t=U(n);return $r.F(t._e,e)}function AC(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ns(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ns(this.root,e,this.comparator,!1)}getReverseIterator(){return new ns(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ns(this.root,e,this.comparator,!0)}},ns=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,t,r,i,o){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hd(this.data.getIterator())}getIteratorFrom(e){return new hd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},hd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Wo(n){return n.hasNext()?n.getNext():void 0}var Kt=class n{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(Ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ss(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var fd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function BT(){return typeof atob<"u"}var Ye=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ye.EMPTY_BYTE_STRING=new Ye("");var PO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(Y(!!n),typeof n=="string"){let e=0,t=PO.exec(n);if(Y(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hr(n){return typeof n=="string"?Ye.fromBase64String(n):Ye.fromUint8Array(n)}function ih(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wv(n){let e=n.mapValue.fields.__previous_value__;return ih(e)?wv(e):e}function rc(n){let e=ar(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var xm=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},qr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var jr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rd={nullValue:"NULL_VALUE"};function Oi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ih(n)?4:UT(n)?9007199254740991:oh(n)?10:11:G()}function Vn(n,e){if(n===e)return!0;let t=Oi(n);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rc(n).isEqual(rc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ar(i.timestampValue),a=ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Hr(i.bytesValue).isEqual(Hr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?tc(s)===tc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ss(n.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(AC(s)!==AC(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Vn(s[u],a[u])))return!1;return!0}(n,e);default:return G()}}function ic(n,e){return(n.values||[]).find(t=>Vn(t,e))!==void 0}function zr(n,e){if(n===e)return 0;let t=Oi(n),r=Oi(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return xC(n.timestampValue,e.timestampValue);case 4:return xC(rc(n),rc(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Hr(o),u=Hr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(Oe(o.latitude),Oe(s.latitude));return a!==0?a:ae(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return MC(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,R=ae(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:MC(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===jr.mapValue&&s===jr.mapValue)return 0;if(o===jr.mapValue)return 1;if(s===jr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ae(u[p],h[p]);if(m!==0)return m;let v=zr(a[u[p]],l[h[p]]);if(v!==0)return v}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw G()}}function xC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=ar(n),r=ar(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function MC(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=zr(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function cs(n){return Mm(n)}function Mm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ar(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Hr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Mm(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Mm(t.fields[s])}`;return i+"}"}(n.mapValue):G()}function Fi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rm(n){return!!n&&"integerValue"in n}function oc(n){return!!n&&"arrayValue"in n}function RC(n){return!!n&&"nullValue"in n}function NC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function id(n){return!!n&&"mapValue"in n}function oh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Qa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qa(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $T={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function kO(n){return"nullValue"in n?rd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fi(qr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?oh(n)?$T:{mapValue:{}}:G()}function OO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fi(qr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?$T:"mapValue"in n?oh(n)?{mapValue:{}}:jr:G()}function PC(n,e){let t=zr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kC(n,e){let t=zr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var It=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qa(t)}setAll(e){let t=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Qa(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];id(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Qa(this.value))}};function HT(n){let e=[];return Gi(n.fields,(t,r)=>{let i=new Ke([t]);if(id(r)){let o=HT(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Kt(e)}var nt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),It.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),It.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),It.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var jn=class{constructor(e,t){this.position=e,this.inclusive=t}};function OC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=zr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function FC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vn(n.position[t],e.position[t]))return!1;return!0}var Li=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function FO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var pd=class{},fe=class n extends pd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new km(e,t,r):t==="array-contains"?new Lm(e,r):t==="in"?new gd(e,r):t==="not-in"?new Vm(e,r):t==="array-contains-any"?new jm(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Om(e,r):new Fm(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(zr(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(zr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends pd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return us(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function us(n){return n.op==="and"}function Nm(n){return n.op==="or"}function Iv(n){return qT(n)&&us(n)}function qT(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function Pm(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+cs(n.value);if(Iv(n))return n.filters.map(e=>Pm(e)).join(",");{let e=n.filters.map(t=>Pm(t)).join(",");return`${n.op}(${e})`}}function zT(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&zT(s,i.filters[a]),!0):!1}(n,e):void G()}function GT(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function WT(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${cs(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map(WT).join(" ,")+"}"}(n):"Filter"}var km=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Om=class extends fe{constructor(e,t){super(e,"in",t),this.keys=KT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Fm=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=KT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function KT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var Lm=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return oc(t)&&ic(t.arrayValue,this.value)}},gd=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ic(this.value.arrayValue,t)}},Vm=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ic(this.value.arrayValue,t)}},jm=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!oc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ic(this.value.arrayValue,r))}};var Bm=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Um(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Bm(n,e,t,r,i,o,s)}function Vi(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Pm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cs(r)).join(",")),e.ue=t}return e.ue}function Ec(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FC(n.startAt,e.startAt)&&FC(n.endAt,e.endAt)}function md(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function yd(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function LC(n,e,t){let r=rd,i=!0;for(let o of yd(n,e)){let s=rd,a=!0;switch(o.op){case"<":case"<=":s=kO(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=rd}PC({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];PC({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function VC(n,e,t){let r=jr,i=!0;for(let o of yd(n,e)){let s=jr,a=!0;switch(o.op){case">=":case">":s=OO(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=jr}kC({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];kC({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var yn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QT(n,e,t,r,i,o,s,a){return new yn(n,e,t,r,i,o,s,a)}function Cs(n){return new yn(n)}function jC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ev(n){return n.collectionGroup!==null}function is(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xe(Ke.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Li(o,r))}),t.has(Ke.keyField().canonicalString())||e.ce.push(new Li(Ke.keyField(),r))}return e.ce}function xt(n){let e=U(n);return e.le||(e.le=LO(e,is(n))),e.le}function LO(n,e){if(n.limitType==="F")return Um(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Li(i.field,o)});let t=n.endAt?new jn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jn(n.startAt.position,n.startAt.inclusive):null;return Um(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $m(n,e){let t=n.filters.concat([e]);return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vd(n,e,t){return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dc(n,e){return Ec(xt(n),xt(e))&&n.limitType===e.limitType}function YT(n){return`${Vi(xt(n))}|lt:${n.limitType}`}function Jo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>WT(i)).join(", ")}]`),Ic(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cs(i)).join(",")),`Target(${r})`}(xt(n))}; limitType=${n.limitType})`}function Cc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of is(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=OC(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,is(r),i)||r.endAt&&!function(s,a,u){let l=OC(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,is(r),i))}(n,e)}function ZT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JT(n){return(e,t)=>{let r=!1;for(let i of is(n)){let o=VO(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function VO(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?zr(u,l):G()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var Bn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return jT(this.inner)}size(){return this.innerSize}};var jO=new Pe($.comparator);function $t(){return jO}var XT=new Pe($.comparator);function Wa(...n){let e=XT;for(let t of n)e=e.insert(t.key,t);return e}function eb(n){let e=XT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kn(){return Ya()}function tb(){return Ya()}function Ya(){return new Bn(n=>n.toString(),(n,e)=>n.isEqual(e))}var BO=new Pe($.comparator),UO=new xe($.comparator);function ce(...n){let e=UO;for(let t of n)e=e.add(t);return e}var $O=new xe(ae);function Dv(){return $O}function Cv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function nb(n){return{integerValue:""+n}}function rb(n,e){return kT(e)?nb(e):Cv(n,e)}var ls=class{constructor(){this._=void 0}};function HO(n,e,t){return n instanceof Gr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ih(o)&&(o=wv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof cr?ob(n,e):n instanceof ur?sb(n,e):function(i,o){let s=ib(i,o),a=BC(s)+BC(i.Pe);return Rm(s)&&Rm(i.Pe)?nb(a):Cv(i.serializer,a)}(n,e)}function qO(n,e,t){return n instanceof cr?ob(n,e):n instanceof ur?sb(n,e):t}function ib(n,e){return n instanceof Wr?function(r){return Rm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Gr=class extends ls{},cr=class extends ls{constructor(e){super(),this.elements=e}};function ob(n,e){let t=ab(e);for(let r of n.elements)t.some(i=>Vn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ur=class extends ls{constructor(e){super(),this.elements=e}};function sb(n,e){let t=ab(e);for(let r of n.elements)t=t.filter(i=>!Vn(i,r));return{arrayValue:{values:t}}}var Wr=class extends ls{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function BC(n){return Oe(n.integerValue||n.doubleValue)}function ab(n){return oc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ji=class{constructor(e,t){this.field=e,this.transform=t}};function zO(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof cr&&i instanceof cr||r instanceof ur&&i instanceof ur?ss(r.elements,i.elements,Vn):r instanceof Wr&&i instanceof Wr?Vn(r.Pe,i.Pe):r instanceof Gr&&i instanceof Gr}(n.transform,e.transform)}var Hm=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function od(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ds=class{};function cb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Qr(n.key,qe.none()):new Kr(n.key,n.data,qe.none());{let t=n.data,r=It.empty(),i=new xe(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vn(n.key,r,new Kt(i.toArray()),qe.none())}}function GO(n,e,t){n instanceof Kr?function(i,o,s){let a=i.value.clone(),u=$C(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof vn?function(i,o,s){if(!od(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=$C(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(ub(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Za(n,e,t,r){return n instanceof Kr?function(o,s,a,u){if(!od(o.precondition,s))return a;let l=o.value.clone(),h=HC(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof vn?function(o,s,a,u){if(!od(o.precondition,s))return a;let l=HC(o.fieldTransforms,u,s),h=s.data;return h.setAll(ub(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return od(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function WO(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ib(r.transform,i||null);o!=null&&(t===null&&(t=It.empty()),t.set(r.field,o))}return t||null}function UC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ss(r,i,(o,s)=>zO(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Kr=class extends ds{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends ds{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ub(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $C(n,e,t){let r=new Map;Y(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,qO(s,a,t[i]))}return r}function HC(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,HO(o,s,e))}return r}var Qr=class extends ds{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},sc=class extends ds{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ac=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&GO(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Za(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Za(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=tb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=cb(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(t,r)=>UC(t,r))&&ss(this.baseMutations,e.baseMutations,(t,r)=>UC(t,r))}},qm=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Y(e.mutations.length===r.length);let i=function(){return BO}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var cc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,_e;function lb(n){switch(n){default:return G();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function db(n){if(n===void 0)return We("GRPC error has no .code"),x.UNKNOWN;switch(n){case Xe.OK:return x.OK;case Xe.CANCELLED:return x.CANCELLED;case Xe.UNKNOWN:return x.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return x.INTERNAL;case Xe.UNAVAILABLE:return x.UNAVAILABLE;case Xe.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Xe.NOT_FOUND:return x.NOT_FOUND;case Xe.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Xe.ABORTED:return x.ABORTED;case Xe.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Xe.DATA_LOSS:return x.DATA_LOSS;default:return G()}}(_e=Xe||(Xe={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var qC=null;function hb(){return new TextEncoder}var KO=new kr([4294967295,4294967295],0);function zC(n){let e=hb().encode(n),t=new sm;return t.update(e),new Uint8Array(t.digest())}function GC(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new kr([t,r],0),new kr([i,o],0)]}var Gm=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pi(`Invalid padding: ${t}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=kr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(kr.fromNumber(r)));return i.compare(KO)===1&&(i=new kr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=zC(e),[r,i]=GC(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=zC(e),[r,i]=GC(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Z.min(),i,new Pe(ae),$t(),ce())}},lc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var os=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},_d=class{constructor(e,t){this.targetId=e,this.me=t}},wd=class{constructor(e,t,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Id=class{constructor(){this.fe=0,this.ge=KC(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),t=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G()}}),new lc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=KC()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Y(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Wm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=$t(),this.qe=WC(),this.Qe=new Pe(ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(md(o))if(r===0){let s=new $(o.path);this.Ue(t,s,nt.newNoDocument(s,Z.min()))}else Y(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}qC?.et(function(h,p,m,v,b){var R,N,B,z,L,J;let ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(ie.bloomFilter={applied:b===0,hashCount:(R=X?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(z=(B=(N=X?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&z!==void 0?z:0,padding:(J=(L=X?.bits)===null||L===void 0?void 0:L.padding)!==null&&J!==void 0?J:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ie}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Hr(r).toUint8Array()}catch(u){if(u instanceof fd)return mn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Gm(s,i,o)}catch(u){return mn(u instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&md(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,nt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new uc(e,t,this.Qe,this.ke,r);return this.ke=$t(),this.qe=WC(),this.Qe=new Pe(ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Id,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xe(ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Id),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function WC(){return new Pe($.comparator)}function KC(){return new Pe($.comparator)}var QO={asc:"ASCENDING",desc:"DESCENDING"},YO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZO={and:"AND",or:"OR"},Km=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Qm(n,e){return n.useProto3Json||Ic(e)?e:{value:e}}function hs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JO(n,e){return hs(n,e.toTimestamp())}function Qe(n){return Y(!!n),Z.fromTimestamp(function(t){let r=ar(t);return new Ve(r.seconds,r.nanos)}(n))}function Tv(n,e){return Ym(n,e).canonicalString()}function Ym(n,e){let t=function(i){return new we(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function pb(n){let e=we.fromString(n);return Y(Cb(e)),e}function dc(n,e){return Tv(n.databaseId,e.path)}function Fn(n,e){let t=pb(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(yb(t))}function gb(n,e){return Tv(n.databaseId,e)}function mb(n){let e=pb(n);return e.length===4?we.emptyPath():yb(e)}function Zm(n){return new we(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yb(n){return Y(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function QC(n,e,t){return{name:dc(n,e),fields:t.value.mapValue.fields}}function vb(n,e,t){let r=Fn(n,e.name),i=Qe(e.updateTime),o=e.createTime?Qe(e.createTime):Z.min(),s=new It({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function XO(n,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;let o=Fn(r,i.found.name),s=Qe(i.found.updateTime),a=i.found.createTime?Qe(i.found.createTime):Z.min(),u=new It({mapValue:{fields:i.found.fields}});return nt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);let o=Fn(r,i.missing),s=Qe(i.readTime);return nt.newNoDocument(o,s)}(n,e):G()}function eF(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Y(h===void 0||typeof h=="string"),Ye.fromBase64String(h||"")):(Y(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ye.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:db(l.code);return new P(h,l.message||"")}(s);t=new wd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Fn(n,r.document.name),o=Qe(r.document.updateTime),s=r.document.createTime?Qe(r.document.createTime):Z.min(),a=new It({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new os(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Fn(n,r.document),o=r.readTime?Qe(r.readTime):Z.min(),s=nt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new os([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Fn(n,r.document),o=r.removedTargetIds||[];t=new os([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new zm(i,o),a=r.targetId;t=new _d(a,s)}}return t}function hc(n,e){let t;if(e instanceof Kr)t={update:QC(n,e.key,e.value)};else if(e instanceof Qr)t={delete:dc(n,e.key)};else if(e instanceof vn)t={update:QC(n,e.key,e.data),updateMask:sF(e.fieldMask)};else{if(!(e instanceof sc))return G();t={verify:dc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Gr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ur)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:JO(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(n,e.precondition)),t}function Jm(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Qe(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),u=new Gr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new cr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new ur(h)}else"increment"in a?u=new Wr(s,a.increment):G();let l=Ke.fromServerFormat(a.fieldPath);return new ji(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Fn(n,e.update.name),o=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Kt(l.map(h=>Ke.fromServerFormat(h)))}(e.updateMask);return new vn(i,o,s,t,r)}return new Kr(i,o,t,r)}if(e.delete){let i=Fn(n,e.delete);return new Qr(i,t)}if(e.verify){let i=Fn(n,e.verify);return new sc(i,t)}return G()}function tF(n,e){return n&&n.length>0?(Y(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Qe(i.updateTime):Qe(o);return s.isEqual(Z.min())&&(s=Qe(o)),new Hm(s,i.transformResults||[])}(t,e))):[]}function _b(n,e){return{documents:[gb(n,e.path)]}}function wb(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gb(n,i);let o=function(l){if(l.length!==0)return Db(be.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Xo(m.field),direction:rF(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Qm(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function Ib(n){let e=mb(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Y(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=Eb(p);return m instanceof be&&Iv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Li(es(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ic(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new jn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new jn(v,m)}(t.endAt)),QT(e,i,s,o,a,"F",u,l)}function nF(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Eb(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=es(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=es(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=es(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=es(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(es(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>Eb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(t.compositeFilter.op))}(n):G()}function rF(n){return QO[n]}function iF(n){return YO[n]}function oF(n){return ZO[n]}function Xo(n){return{fieldPath:n.canonicalString()}}function es(n){return Ke.fromServerFormat(n.fieldPath)}function Db(n){return n instanceof fe?function(t){if(t.op==="=="){if(NC(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if(RC(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NC(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if(RC(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:iF(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>Db(i));return r.length===1?r[0]:{compositeFilter:{op:oF(t.op),filters:r}}}(n):G()}function sF(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var fs=class n{constructor(e,t,r,i,o=Z.min(),s=Z.min(),a=Ye.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ed=class{constructor(e){this.ct=e}};function aF(n,e){let t;if(e.document)t=vb(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Ui(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let r=$.fromSegments(e.unknownDocument.path),i=Ui(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ve(i[0],i[1]);return Z.fromTimestamp(o)}(e.readTime)),t}function YC(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:dc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:hs(o,s.version.toTimestamp()),createTime:hs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bi(e.version)};else{if(!e.isUnknownDocument())return G();r.unknownDocument={path:t.path.toArray(),version:Bi(e.version)}}return r}function Dd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ui(n){let e=new Ve(n.seconds,n.nanoseconds);return Z.fromTimestamp(e)}function Mi(n,e){let t=(e.baseMutations||[]).map(o=>Jm(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Jm(n.ct,o)),i=Ve.fromMillis(e.localWriteTimeMs);return new ac(e.batchId,i,t,r)}function Ka(n){let e=Ui(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ui(n.lastLimboFreeSnapshotVersion):Z.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Y(o.documents.length===1),xt(Cs(mb(o.documents[0])))}(n.query):function(o){return xt(Ib(o))}(n.query),new fs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ye.fromBase64String(n.resumeToken))}function Tb(n,e){let t=Bi(e.snapshotVersion),r=Bi(e.lastLimboFreeSnapshotVersion),i;i=md(e.target)?_b(n.ct,e.target):wb(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bv(n){let e=Ib({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vd(e,e.limit,"L"):e}function hm(n,e){return new cc(e.largestBatchId,Jm(n.ct,e.overlayMutation))}function ZC(n,e){let t=e.path.lastSegment();return[n,At(e.path.popLast()),t]}function JC(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bi(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}var Xm=class{getBundleMetadata(e,t){return XC(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ui(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return XC(e).put(function(i){return{bundleId:i.id,createTime:Bi(Qe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return eT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:bv(o.bundledQuery),readTime:Ui(o.readTime)}}(r)})}saveNamedQuery(e,t){return eT(e).put(function(i){return{name:i.name,readTime:Bi(Qe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function XC(n){return ot(n,"bundles")}function eT(n){return ot(n,"namedQueries")}var Cd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ha(e).get(ZC(this.userId,t)).next(r=>r?hm(this.serializer,r):null)}getOverlays(e,t){let r=kn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new cc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(At(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ha(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=kn(),o=At(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ha(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=hm(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=kn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ha(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=hm(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Ha(e).put(function(i,o,s){let[a,u,l]=ZC(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:hc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Ha(n){return ot(n,"documentOverlays")}var ey=class{Pt(e){return ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ye.fromUint8Array(r):Ye.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var or=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),tc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ar(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Hr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?UT(e)?this.dt(t,Number.MAX_SAFE_INTEGER):oh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):G()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};or.vt=new or;function cF(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function tT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=cF(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var ty=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=tT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=tT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},ny=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},ry=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ri=class{constructor(){this.jt=new ty,this.Ht=new ny(this.jt),this.Jt=new ry(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ni=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Or(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=nT(n.arrayValue,e.arrayValue),t!==0?t:(t=nT(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function nT(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Td=class{constructor(e){this.Xt=new xe((t,r)=>Ke.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Y(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Cm(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ai(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(Ke.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new rs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new rs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new rs(r.field,r.dir==="asc"?0:1)));return new as(as.UNKNOWN_ID,this.collectionId,t,ec.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function bb(n){var e,t;if(Y(n instanceof fe||n instanceof be),n instanceof fe){if(n instanceof gd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>bb(i));return be.create(r,n.op)}function uF(n){if(n.getFilters().length===0)return[];let e=sy(bb(n));return Y(Sb(e)),iy(e)||oy(e)?[e]:e.getFilters()}function iy(n){return n instanceof fe}function oy(n){return n instanceof be&&Iv(n)}function Sb(n){return iy(n)||oy(n)||function(t){if(t instanceof be&&Nm(t)){for(let r of t.getFilters())if(!iy(r)&&!oy(r))return!1;return!0}return!1}(n)}function sy(n){if(Y(n instanceof fe||n instanceof be),n instanceof fe)return n;if(n.filters.length===1)return sy(n.filters[0]);let e=n.filters.map(r=>sy(r)),t=be.create(e,n.op);return t=bd(t),Sb(t)?t:(Y(t instanceof be),Y(us(t)),Y(t.filters.length>1),t.filters.reduce((r,i)=>Sv(r,i)))}function Sv(n,e){let t;return Y(n instanceof fe||n instanceof be),Y(e instanceof fe||e instanceof be),t=n instanceof fe?e instanceof fe?function(i,o){return be.create([i,o],"and")}(n,e):rT(n,e):e instanceof fe?rT(e,n):function(i,o){if(Y(i.filters.length>0&&o.filters.length>0),us(i)&&us(o))return GT(i,o.getFilters());let s=Nm(i)?i:o,a=Nm(i)?o:i,u=s.filters.map(l=>Sv(l,a));return be.create(u,"or")}(n,e),bd(t)}function rT(n,e){if(us(e))return GT(e,n.getFilters());{let t=e.filters.map(r=>Sv(n,r));return be.create(t,"or")}}function bd(n){if(Y(n instanceof fe||n instanceof be),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return bd(e[0]);if(qT(n))return n;let t=e.map(i=>bd(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var ay=class{constructor(){this.un=new fc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(sn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(sn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},fc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(we.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(we.comparator)).toArray()}};var Jl=new Uint8Array(0),cy=class{constructor(e,t){this.databaseId=t,this.cn=new fc,this.ln=new Bn(r=>Vi(r),(r,i)=>Ec(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:At(i)};return iT(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[xT(t),""],!1,!0);return iT(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Pn(s.parent))}return r})}addFieldIndex(e,t){let r=qa(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Qo(e);return o.next(a=>{s.put(JC(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=qa(e),i=Qo(e),o=Ko(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=qa(e),r=Ko(e),i=Qo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Td(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ko(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ce(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${Vi(t)}`);let h=function(L,J){let ie=Cm(J);if(ie===void 0)return null;for(let X of yd(L,ie.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,u),p=function(L,J){let ie=new Map;for(let X of Ai(J))for(let I of yd(L,X.fieldPath))switch(I.op){case"==":case"in":ie.set(X.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ie.set(X.fieldPath.canonicalString(),I.value),Array.from(ie.values())}return null}(l,u),m=function(L,J){let ie=[],X=!0;for(let I of Ai(J)){let y=I.kind===0?LC(L,I.fieldPath,L.startAt):VC(L,I.fieldPath,L.startAt);ie.push(y.value),X&&(X=y.inclusive)}return new jn(ie,X)}(l,u),v=function(L,J){let ie=[],X=!0;for(let I of Ai(J)){let y=I.kind===0?VC(L,I.fieldPath,L.endAt):LC(L,I.fieldPath,L.endAt);ie.push(y.value),X&&(X=y.inclusive)}return new jn(ie,X)}(l,u),b=this.In(u,l,m),R=this.In(u,l,v),N=this.Tn(u,l,p),B=this.En(u.indexId,h,b,m.inclusive,R,v.inclusive,N);return S.forEach(B,z=>r.G(z,t.limit).next(L=>{L.forEach(J=>{let ie=$.fromSegments(J.documentKey);s.has(ie)||(s=s.add(ie),a.push(ie))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=uF(be.create(e.filters,"and")).map(r=>Um(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Jl,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),R=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,R))}return h}An(e,t,r,i){let o=new Ni(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Ni(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Td(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new xe(Ke.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ri;for(let i of Ai(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);or.vt.It(o,s)}return r.zt()}dn(e){let t=new Ri;return or.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ri;return or.vt.It(Fi(this.databaseId,t),r.Yt(function(o){let s=Ai(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ri);let o=0;for(let s of Ai(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&oc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);or.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Ri;u.seed(a.zt()),or.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=qa(e),i=Qo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new ec(p.sequenceNumber,new sn(Ui(p.readTime),new $(Pn(p.documentKey)),p.largestBatchId)):ec.empty(),v=h.fields.map(([b,R])=>new rs(Ke.fromServerFormat(b),R));return new as(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ae(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=qa(e),o=Qo(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(JC(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Ko(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ko(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ko(e),o=new xe(Or);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Ni(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new xe(Or),i=this.Vn(t,e);if(i==null)return r;let o=Cm(t);if(o!=null){let s=e.data.field(o.fieldPath);if(oc(s))for(let a of s.arrayValue.values||[])r=r.add(new Ni(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ni(t.indexId,e.key,Jl,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let v=u.getIterator(),b=l.getIterator(),R=Wo(v),N=Wo(b);for(;R||N;){let B=!1,z=!1;if(R&&N){let L=h(R,N);L<0?z=!0:L>0&&(B=!0)}else R!=null?z=!0:B=!0;B?(p(N),N=Wo(b)):z?(m(R),R=Wo(v)):(R=Wo(v),N=Wo(b))}}(i,o,Or,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Qo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Or(s,a)).filter((s,a,u)=>!a||Or(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Or(s,e),u=Or(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Jl,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Jl,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Or(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(oT)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||G())).next(oT)}};function iT(n){return ot(n,"collectionParents")}function Ko(n){return ot(n,"indexEntries")}function qa(n){return ot(n,"indexConfiguration")}function Qo(n){return ot(n,"indexState")}function oT(n){Y(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;yv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new sn(e.readTime,e.documentKey,t)}var sT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},on=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Ab(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{Y(a===1)}));let l=[];for(let h of t.mutations){let p=OT(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Sd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw G();e=n.noDocument}return JSON.stringify(e).length}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);var Ad=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Y(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ts(e),s=Fr(e);return s.add({}).next(a=>{Y(typeof a=="number");let u=new ac(a,t,r,i),l=function(v,b,R){let N=R.baseMutations.map(z=>hc(v.ct,z)),B=R.mutations.map(z=>hc(v.ct,z));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,u),h=[],p=new xe((m,v)=>ae(m.canonicalString(),v.canonicalString()));for(let m of i){let v=OT(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,gO))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Fr(e).get(t).next(r=>r?(Y(r.userId===this.userId),Mi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Fr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Y(a.batchId>=r),o=Mi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Fr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Mi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=nd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ts(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Pn(h);if(l===this.userId&&t.path.isEqual(m))return Fr(e).get(p).next(v=>{if(!v)throw G();Y(v.userId===this.userId),o.push(Mi(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ae),i=[];return t.forEach(o=>{let s=nd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=ts(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,R=Pn(v);m===this.userId&&o.path.isEqual(R)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=nd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new xe(ae);return ts(e).J({range:s},(u,l,h)=>{let[p,m,v]=u,b=Pn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Fr(e).get(o).next(s=>{if(s===null)throw G();Y(s.userId===this.userId),r.push(Mi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ab(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ts(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Pn(o[1]);i.push(u)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,t){return xb(e,this.userId,t)}Nn(e){return Mb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function xb(n,e,t){let r=nd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ts(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Fr(n){return ot(n,"mutations")}function ts(n){return ot(n,"documentMutations")}function Mb(n){return ot(n,"mutationQueues")}var ps=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var uy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ps(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Z.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yo(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Yo(e).J((s,a)=>{let u=Ka(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Yo(e).J((r,i)=>{let o=Ka(i);t(o)})}qn(e){return aT(e).get("targetGlobalKey").next(t=>(Y(t!==null),t))}Qn(e,t){return aT(e).put("targetGlobalKey",t)}Kn(e,t){return Yo(e).put(Tb(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Vi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Yo(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Ka(a);Ec(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Lr(e);return t.forEach(s=>{let a=At(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Lr(e);return S.forEach(t,o=>{let s=At(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Lr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Lr(e),o=ce();return i.J({range:r,H:!0},(s,a,u)=>{let l=Pn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=At(t.path),i=IDBKeyRange.bound([r],[xT(r)],!1,!0),o=0;return Lr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Yo(e).get(t).next(r=>r?Ka(r):null)}};function Yo(n){return ot(n,"targets")}function aT(n){return ot(n,"targetGlobal")}function Lr(n){return ot(n,"targetDocuments")}function cT([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var ly=class{constructor(e){this.Un=e,this.buffer=new xe(cT),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},dy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Jr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Zr(t)}yield this.Hn(3e5)}))}},hy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Wt.oe);let r=new ly(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(sT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sT):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Zo()<=En.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function lF(n,e){return new hy(n,e)}var fy=class{constructor(e,t){this.db=e,this.garbageCollector=lF(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Xl(e,r)}removeReference(e,t,r){return Xl(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xl(e,t)}nr(e,t){return function(i,o){let s=!1;return Mb(i).Y(a=>xb(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Z.min()),Lr(e).delete(function(p){return[0,At(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xl(e,t)}tr(e,t){let r=Lr(e),i,o=Wt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Wt.oe&&t(new $(Pn(i)),o),o=l,i=u):o=Wt.oe}).next(()=>{o!==Wt.oe&&t(new $(Pn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Xl(n,e){return Lr(n).put(function(r,i){return{targetId:0,path:At(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var xd=class{constructor(){this.changes=new Bn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var py=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Si(e).put(r)}removeEntry(e,t,r){return Si(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Dd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return Si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(za(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return Si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(za(t))},(i,o)=>{r={document:this.ir(t,o),size:Sd(o)}}).next(()=>r)}getEntries(e,t){let r=$t();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=$t(),i=new Pe($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Sd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new xe(dT);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(za(i.first()),za(i.last())),s=i.getIterator(),a=s.getNext();return Si(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&dT(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(za(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Dd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Si(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=$t();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Cc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=$t(),s=lT(t,r),a=lT(t,sn.max());return Si(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new gy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uT(e).get("remoteDocumentGlobalKey").next(t=>(Y(!!t),t))}rr(e,t){return uT(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=aF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return nt.newInvalidDocument(e)}};function Rb(n){return new py(n)}var gy=class extends xd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Bn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new xe((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=YC(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Sd(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=YC(this.cr.serializer,s.convertToNoDocument(Z.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function uT(n){return ot(n,"remoteDocumentGlobal")}function Si(n){return ot(n,"remoteDocumentsV14")}function za(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lT(n,e){let t=e.documentKey.path.toArray();return[n,Dd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function dT(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ae(t[o],r[o]),i)return i;return i=ae(t.length,r.length),i||(i=ae(t[t.length-2],r[r.length-2]),i||ae(t[t.length-1],r[r.length-1]))}var my=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Md=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Za(r.mutation,i,Kt.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=kn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Wa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=kn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=$t(),s=Ya(),a=function(){return Ya()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof vn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Za(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):s.set(l.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new my(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ya(),i=new Pe((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Kt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=tb();h.forEach(m=>{if(!o.has(m)){let v=cb(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ev(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(kn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:eb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Wa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Wa();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new yn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,nt.newInvalidDocument(h)))});let a=Wa();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Za(h.mutation,l,Kt.empty(),Ve.now()),Cc(t,l)&&(a=a.insert(u,l))}),a})}};var yy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qe(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:bv(i.bundledQuery),readTime:Qe(i.readTime)}}(t)),S.resolve()}};var vy=class{constructor(){this.overlays=new Pe($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=kn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=kn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=kn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=kn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ce(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var _y=class{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var pc=class{constructor(){this.Tr=new xe(et.Er),this.dr=new xe(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new we([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new we([])),r=new et(t,e),i=new et(t,e+1),o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ae(e.wr,t.wr)}static Ar(e,t){return ae(e.wr,t.wr)||$.comparator(e.key,t.key)}};var wy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xe(et.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ac(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ae);return t.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new et(new $(o),0),a=new xe(ae);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Y(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new et(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Iy=class{constructor(e){this.Mr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=$t();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=$t(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||yv(RT(h),r)<=0||(i.has(h.key)||Cc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ey(this)}getSize(e){return S.resolve(this.size)}},Ey=class extends xd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Dy=class{constructor(e){this.persistence=e,this.Nr=new Bn(t=>Vi(t),Ec),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pc,this.targetCount=0,this.kr=ps.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ps(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Rd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Wt(0),this.Kr=!1,this.Kr=!0,this.$r=new _y,this.referenceDelegate=e(this),this.Ur=new Dy(this),this.indexManager=new ay,this.remoteDocumentCache=function(i){return new Iy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ed(t),this.Gr=new yy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new wy(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Cy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Cy=class extends ld{constructor(e){super(),this.currentSequenceNumber=e}},Nd=class n{constructor(e){this.persistence=e,this.Jr=new pc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Ty=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new dd("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SC,{unique:!0}),u.createObjectStore("documentMutations")}(e),hT(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),hT(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SC,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:SO});l.createIndex("collectionPathOverlayIndex",AO,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",xO,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:mO});l.createIndex("documentKeyIndex",yO),l.createIndex("collectionGroupIndex",vO)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:DO}).createIndex("sequenceNumberIndex",CO,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:TO}).createIndex("documentKeyIndex",bO,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Sd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Y(u.userId===o.userId);let l=Mi(this.serializer,u);return Ab(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new we(s),l=function(p){return[0,At(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:At(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:EO});let r=t.store("collectionParents"),i=new fc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:At(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new we(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Pn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Ka(i),s=Tb(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(we.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):G()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Rb(this.serializer),o=new Rd(Nd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ce();Mi(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new tt(l),p=Cd.lt(this.serializer,h),m=o.getIndexManager(h),v=Ad.lt(h,this.serializer,m,o.referenceDelegate);return new Md(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new nc(t,Wt.oe),u).next()})})}};function hT(n){n.createObjectStore("targetDocuments",{keyPath:wO}).createIndex("documentTargetsIndex",IO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_O,{unique:!0}),n.createObjectStore("targetGlobal")}var fm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",by=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fy(this,i),this.Ai=t+"main",this.serializer=new Ed(u),this.Ri=new $r(this.Ai,this.hi,new Ty(this.serializer)),this.$r=new ey,this.Ur=new uy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rb(this.serializer),this.Gr=new Xm,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&We("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,fm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Wt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ed(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Jr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ga(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return ed(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ot(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Ga(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,fm);return!1}}return!(!this.networkEnabled||!this.inForeground)||ed(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new nc(e,Wt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ed(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Ad.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Cd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?NO:u===16?RO:u===15?_v:u===14?VT:u===13?LT:u===12?MO:u===11?FT:void G()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new nc(a,this.Qr?this.Qr.next():Wt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw We(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,NT);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ga(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,fm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ga(e).put("owner",t)}static D(){return $r.D()}bi(e){let t=Ga(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(We(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;If()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return We("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){We("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ga(n){return ot(n,"owner")}function ed(n){return ot(n,"clientMetadata")}function Av(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Sy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ce(),i=ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Ay=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Pd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return If()?8:PT(la())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ay;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Zo()<=En.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Zo()<=En.DEBUG&&k("QueryEngine","Query:",Jo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zo()<=En.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xt(t))):S.resolve())}Yi(e,t){if(jC(t))return S.resolve(null);let r=xt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vd(t,null,"F"),r=xt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,vd(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return jC(t)||i.isEqual(Z.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Zo()<=En.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jo(t)),this.rs(e,s,t,MT(i,-1)).next(a=>a))})}ts(e,t){let r=new xe(JT(e));return t.forEach((i,o)=>{Cc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Zo()<=En.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.Ji.getDocumentsMatchingQuery(e,t,sn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var xy=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Pe(ae),this._s=new Bn(o=>Vi(o),Ec),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Md(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Nb(n,e,t,r){return new xy(n,e,t,r)}function Pb(n,e){return M(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function dF(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(u,b)).next(R=>{let N=l.docVersions.get(b);Y(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kb(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function hF(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ye.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(R,N,B){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let u=$t(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Ob(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(Z.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function Ob(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=$t();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function fF(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gs(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new fs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ms(n,e,t){return M(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Jr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function kd(n,e,t){let r=U(n),i=Z.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,xt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Z.min(),t?o:ce())).next(a=>(Vb(r,ZT(e),a),{documents:a,Ts:o})))}function Fb(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Lb(n,e){let t=U(n),r=t.us.get(e)||Z.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,MT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Vb(t,e,i),i))}function Vb(n,e,t){let r=n.us.get(e)||Z.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function pF(n,e,t,r){return M(this,null,function*(){let i=U(n),o=ce(),s=$t();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield gs(i,function(h){return xt(Cs(we.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Ob(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function gF(r,i){return M(this,arguments,function*(n,e,t=ce()){let o=yield gs(n,xt(bv(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Qe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ye.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function fT(n,e){return`firestore_clients_${n}_${e}`}function pT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pm(n,e){return`firestore_targets_${n}_${e}`}var Od=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(We("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ja=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(We("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Fd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Dv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=kT(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(We("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},My=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(We("SharedClientState",`Failed to parse online state: ${e}`),null)}},gc=class{constructor(){this.activeTargetIds=Dv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Xa=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pe(ae),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=fT(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new gc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(fT(this.persistenceKey,r));if(i){let o=Fd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(pm(this.persistenceKey,e));if(i){let o=Ja.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void We("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Wt.oe;if(o!=null)try{let a=JSON.parse(o);Y(typeof a=="number"),s=a}catch(a){We("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Wt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Od(this.currentUser,e,t,r),o=pT(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=pT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=pm(this.persistenceKey,e),o=new Ja(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Fd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Od.Rs(new tt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Ja.Rs(i,t)}Ls(e){return My.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Dv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Ld=class{constructor(){this.so=new gc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ry=class{_o(e){}shutdown(){}};var Vd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var td=null;function gm(){return td===null?td=function(){return 268435456+Math.round(2147483648*Math.random())}():td++,"0x"+td.toString(16)}var mF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ny=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var wt="WebChannelConnection",Py=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=gm(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw mn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ds}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=mF[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=gm();return new Promise((s,a)=>{let u=new am;u.setWithCredentials(!0),u.listenOnce(cm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $a.NO_ERROR:let h=u.getResponseJson();k(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case $a.TIMEOUT:k(wt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case $a.HTTP_ERROR:let p=u.getStatus();if(k(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{k(wt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(wt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=gm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dm(),a=lm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,b=new Ny({Io:N=>{v?k(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(wt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,B,z)=>{N.listen(B,L=>{try{z(L)}catch(J){setTimeout(()=>{throw J},0)}})};return R(p,Go.EventType.OPEN,()=>{v||(k(wt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),R(p,Go.EventType.CLOSE,()=>{v||(v=!0,k(wt,`RPC '${e}' stream ${i} transport closed`),b.So())}),R(p,Go.EventType.ERROR,N=>{v||(v=!0,mn(wt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),R(p,Go.EventType.MESSAGE,N=>{var B;if(!v){let z=N.data[0];Y(!!z);let L=z,J=L.error||((B=L[0])===null||B===void 0?void 0:B.error);if(J){k(wt,`RPC '${e}' stream ${i} received error:`,J);let ie=J.status,X=function(w){let E=Xe[w];if(E!==void 0)return db(E)}(ie),I=J.message;X===void 0&&(X=x.INTERNAL,I="Unknown error status: "+ie+" with message "+J.message),v=!0,b.So(new P(X,I)),p.close()}else k(wt,`RPC '${e}' stream ${i} received:`,z),b.bo(z)}}),R(a,um.STAT_EVENT,N=>{N.stat===Zl.PROXY?k(wt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Zl.NOPROXY&&k(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function jb(){return typeof window<"u"?window:null}function sd(){return typeof document<"u"?document:null}function Tc(n){return new Km(n,!0)}var mc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var jd=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(We(t.toString()),We("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ky=class extends jd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=eF(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?Qe(s.readTime):Z.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Zm(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=md(u)?{documents:_b(o,u)}:{query:wb(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=fb(o,s.resumeToken);let l=Qm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){a.readTime=hs(o,s.snapshotVersion.toTimestamp());let l=Qm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=nF(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Zm(this.serializer),t.removeTarget=e,this.a_(t)}},Oy=class extends jd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Y(!!e.streamToken),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=tF(e.writeResults,e.commitTime),r=Qe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Zm(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>hc(this.serializer,r))};this.a_(t)}};var Fy=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ym(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ym(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Ly=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(We(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Vy=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){Xr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return M(this,null,function*(){let l=U(u);l.L_.add(4),yield Ts(l),l.q_.set("Unknown"),l.L_.delete(4),yield bc(l)})}(this))}))}),this.q_=new Ly(r,i)}};function bc(n){return M(this,null,function*(){if(Xr(n))for(let e of n.B_)yield e(!0)})}function Ts(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function sh(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Rv(t)?Mv(t):Ss(t).r_()&&xv(t,e))}function ys(n,e){let t=U(n),r=Ss(t);t.N_.delete(e),r.r_()&&Bb(t,e),t.N_.size===0&&(r.r_()?r.o_():Xr(t)&&t.q_.set("Unknown"))}function xv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ss(n).A_(e)}function Bb(n,e){n.Q_.xe(e),Ss(n).R_(e)}function Mv(n){n.Q_=new Wm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ss(n).start(),n.q_.v_()}function Rv(n){return Xr(n)&&!Ss(n).n_()&&n.N_.size>0}function Xr(n){return U(n).L_.size===0}function Ub(n){n.Q_=void 0}function yF(n){return M(this,null,function*(){n.q_.set("Online")})}function vF(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{xv(n,e)})})}function _F(n,e){return M(this,null,function*(){Ub(n),Rv(n)?(n.q_.M_(e),Mv(n)):n.q_.set("Unknown")})}function wF(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof wd&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bd(n,r)}else if(e instanceof os?n.Q_.Ke(e):e instanceof _d?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Z.min()))try{let r=yield kb(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ye.EMPTY_BYTE_STRING,h.snapshotVersion)),Bb(o,u);let p=new fs(h.target,u,l,h.sequenceNumber);xv(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Bd(n,r)}})}function Bd(n,e,t){return M(this,null,function*(){if(!Jr(e))throw e;n.L_.add(1),yield Ts(n),n.q_.set("Offline"),t||(t=()=>kb(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield bc(n)}))})}function $b(n,e){return e().catch(t=>Bd(n,t,e))}function bs(n){return M(this,null,function*(){let e=U(n),t=Yr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;IF(e);)try{let i=yield fF(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,EF(e,i)}catch(i){yield Bd(e,i)}Hb(e)&&qb(e)})}function IF(n){return Xr(n)&&n.O_.length<10}function EF(n,e){n.O_.push(e);let t=Yr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Hb(n){return Xr(n)&&!Yr(n).n_()&&n.O_.length>0}function qb(n){Yr(n).start()}function DF(n){return M(this,null,function*(){Yr(n).p_()})}function CF(n){return M(this,null,function*(){let e=Yr(n);for(let t of n.O_)e.m_(t.mutations)})}function TF(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=qm.from(r,e,t);yield $b(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bs(n)})}function bF(n,e){return M(this,null,function*(){e&&Yr(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return lb(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Yr(r).s_(),yield $b(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield bs(r)}})}(n,e)),Hb(n)&&qb(n)})}function gT(n,e){return M(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Xr(t);t.L_.add(3),yield Ts(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield bc(t)})}function jy(n,e){return M(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield bc(t)):e||(t.L_.add(2),yield Ts(t),t.q_.set("Unknown"))})}function Ss(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new ky(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:yF.bind(null,n),Ro:vF.bind(null,n),mo:_F.bind(null,n),d_:wF.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),Rv(n)?Mv(n):n.q_.set("Unknown")):(yield n.K_.stop(),Ub(n))}))),n.K_}function Yr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new Oy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DF.bind(null,n),mo:bF.bind(null,n),f_:CF.bind(null,n),g_:TF.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield bs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var By=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function As(n,e){if(We("AsyncQueue",`${e}: ${n}`),Jr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Ud=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Wa(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var $d=class{constructor(){this.W_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},vs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ud.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Uy=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},$y=class{constructor(){this.queries=mT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=mT(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function mT(){return new Bn(n=>YT(n),Dc)}function Nv(n,e){return M(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Uy,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=As(s,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&kv(t)})}function Pv(n,e){return M(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function SF(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&kv(t)}function AF(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function kv(n){n.Y_.forEach(e=>{e.next()})}var Hy,yT;(yT=Hy||(Hy={})).ea="default",yT.Cache="cache";var yc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new vs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hy.Cache}};var qy=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Hd=class{constructor(e){this.serializer=e}Es(e){return Fn(this.serializer,e)}ds(e){return e.metadata.exists?vb(this.serializer,e.document,!1):nt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Qe(e)}},zy=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zb(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=we.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Hd(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ce()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield pF(this.localStore,new Hd(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield gF(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function zb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var qd=class{constructor(e){this.key=e}},zd=class{constructor(e){this.key=e}},Gd=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=JT(e),this.Ra=new Ud(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new $d,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Cc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==R&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return R(v)-R(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new vs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $d,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new zd(r))}),this.da.forEach(r=>{e.has(r)||t.push(new qd(r))}),t}ba(e){this.Ta=e.Ts,this.da=ce();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return vs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Gy=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Wy=class{constructor(e){this.key=e,this.va=!1}},Ky=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Bn(a=>YT(a),Dc),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe($.comparator),this.Na=new Map,this.La=new pc,this.Ba={},this.ka=new Map,this.qa=ps.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function xF(n,e,t=!0){return M(this,null,function*(){let r=ah(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Gb(r,e,t,!0),i})}function MF(n,e){return M(this,null,function*(){let t=ah(n);yield Gb(t,e,!0,!1)})}function Gb(n,e,t,r){return M(this,null,function*(){let i=yield gs(n.localStore,xt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Ov(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&sh(n.remoteStore,i),a})}function Ov(n,e,t,r,i){return M(this,null,function*(){n.Ka=(p,m,v)=>function(R,N,B,z){return M(this,null,function*(){let L=N.view.ma(B);L.ns&&(L=yield kd(R.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,L)));let J=z&&z.targetChanges.get(N.targetId),ie=z&&z.targetMismatches.get(N.targetId)!=null,X=N.view.applyChanges(L,R.isPrimaryClient,J,ie);return Qy(R,N.targetId,X.wa),X.snapshot})}(n,p,m,v);let o=yield kd(n.localStore,e,!0),s=new Gd(e,o.Ts),a=s.ma(o.documents),u=lc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Qy(n,t,l.wa);let h=new Gy(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function RF(n,e,t){return M(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Dc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ms(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ys(r.remoteStore,i.targetId),_s(r,i.targetId)}).catch(Zr))):(_s(r,i.targetId),yield ms(r.localStore,i.targetId,!0))})}function NF(n,e){return M(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ys(t.remoteStore,r.targetId))})}function PF(n,e,t){return M(this,null,function*(){let r=jv(n);try{let i=yield function(s,a){let u=U(s),l=Ve.now(),h=a.reduce((v,b)=>v.add(b.key),ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=$t(),R=ce();return u.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,z)=>{z.isValidDocument()||(R=R.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let z of a){let L=WO(z,p.get(z.key).overlayedDocument);L!=null&&B.push(new vn(z.key,L,HT(L.value.mapValue),qe.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:eb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Pe(ae)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield hr(r,i.changes),yield bs(r.remoteStore)}catch(i){let o=As(i,"Failed to persist write");t.reject(o)}})}function Wb(n,e){return M(this,null,function*(){let t=U(n);try{let r=yield hF(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Y(s.va):i.removedDocuments.size>0&&(Y(s.va),s.va=!1))}),yield hr(t,r,e)}catch(r){yield Zr(r)}})}function vT(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&kv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kF(n,e,t){return M(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,nt.newNoDocument(o,Z.min()));let a=ce().add(o),u=new uc(Z.min(),new Map,new Pe(ae),s,a);yield Wb(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Vv(r)}else yield ms(r.localStore,e,!1).then(()=>_s(r,e,t)).catch(Zr)})}function OF(n,e){return M(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield dF(t.localStore,e);Lv(t,r,null),Fv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hr(t,i)}catch(i){yield Zr(i)}})}function FF(n,e,t){return M(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Y(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Lv(r,e,t),Fv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hr(r,i)}catch(i){yield Zr(i)}})}function LF(n,e){return M(this,null,function*(){let t=U(n);Xr(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=As(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Fv(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Lv(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function _s(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Kb(n,r)})}function Kb(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ys(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Vv(n))}function Qy(n,e,t){for(let r of t)r instanceof qd?(n.La.addReference(r.key,e),VF(n,r)):r instanceof zd?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Kb(n,r.key)):G()}function VF(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Vv(n))}function Vv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(we.fromString(e)),r=n.qa.next();n.Na.set(r,new Wy(t)),n.Oa=n.Oa.insert(t,r),sh(n.remoteStore,new fs(xt(Cs(t.path)),r,"TargetPurposeLimboResolution",Wt.oe))}}function hr(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Sy.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return M(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Jr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,R)}}})}(r.localStore,o))})}function jF(n,e){return M(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield Pb(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hr(t,r.hs)}})}function BF(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function UF(n,e){return M(this,null,function*(){let t=U(n),r=yield kd(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Qy(t,e.targetId,i.wa),i})}function $F(n,e){return M(this,null,function*(){let t=U(n);return Lb(t.localStore,e).then(r=>hr(t,r))})}function HF(n,e,t,r){return M(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield bs(i.remoteStore):t==="acknowledged"||t==="rejected"?(Lv(i,e,r||null),Fv(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):G(),yield hr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function qF(n,e){return M(this,null,function*(){let t=U(n);if(ah(t),jv(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield _T(t,r.toArray());t.Qa=!0,yield jy(t.remoteStore,!0);for(let o of i)sh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(_s(t,s),ms(t.localStore,s,!0))),ys(t.remoteStore,s)}),yield i,yield _T(t,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{ys(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Pe($.comparator)}(t),t.Qa=!1,yield jy(t.remoteStore,!1)}})}function _T(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield gs(r.localStore,xt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield UF(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield Fb(r.localStore,s);a=yield gs(r.localStore,l),yield Ov(r,Qb(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Qb(n){return QT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zF(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function GF(n,e,t,r){return M(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Lb(i.localStore,ZT(o[0])),a=uc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ye.EMPTY_BYTE_STRING);yield hr(i,s,a);break}case"rejected":yield ms(i.localStore,e,!0),_s(i,e,r);break;default:G()}})}function WF(n,e,t){return M(this,null,function*(){let r=ah(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield Fb(r.localStore,i),s=yield gs(r.localStore,o);yield Ov(r,Qb(o),s.targetId,!1,s.resumeToken),sh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ms(r.localStore,i,!1).then(()=>{ys(r.remoteStore,i),_s(r,i)}).catch(Zr))}})}function ah(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kF.bind(null,e),e.Ca.d_=SF.bind(null,e.eventManager),e.Ca.$a=AF.bind(null,e.eventManager),e}function jv(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FF.bind(null,e),e}function KF(n,e,t){let r=U(n);(function(o,s,a){return M(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,b){let R=U(v),N=Qe(b.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",B=>R.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(zb(u));let l=new zy(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield hr(o,p.Ia,void 0),yield function(v,b){let R=U(v);return R.persistence.runTransaction("Save bundle","readwrite",N=>R.Gr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return mn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Yy=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=Tc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Nb(this.persistence,new Pd,t.initialUser,this.serializer)}Ga(t){return new Rd(Nd.Zr,this.serializer)}Wa(t){return new Ld}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Wd=class n extends Yy{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield _f(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield jv(this.Ja.syncEngine),yield bs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Nb(this.persistence,new Pd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new dy(r,e.asyncQueue,t)}Ha(e,t){let r=new Am(t,this.persistence);return new Sm(e.asyncQueue,r)}Ga(e){let t=Av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new by(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jb(),sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ld}},Zy=class n extends Wd{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield _f(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Xa&&(this.sharedClientState.syncEngine={no:HF.bind(null,t),ro:GF.bind(null,t),io:WF.bind(null,t),Qi:zF.bind(null,t),eo:$F.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield qF(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=jb();if(!Xa.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xa(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Bv=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jF.bind(null,this.syncEngine),yield jy(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new $y}()}createDatastore(t){let r=Tc(t.databaseInfo.databaseId),i=function(s){return new Py(s)}(t.databaseInfo);return function(s,a,u,l){return new Fy(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Vy(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>vT(this.syncEngine,r,0),function(){return Vd.D()?new Vd:new Ry}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new Ky(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ts(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function wT(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ws=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):We("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Jy=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new it,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new qy(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Xy=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=U(i),a={documents:o.map(p=>dc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,we.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=XO(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Y(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new sc(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=U(r),s={writes:i.map(a=>hc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,we.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw G();t=Z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Z.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var ev=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new mc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Xy(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ic(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lb(t)}return!1}};var tv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=As(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function mm(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield Pb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function IT(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Uv(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gT(e.remoteStore,i)),n._onlineComponents=e})}function Uv(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mn("Error using user provided cache. Falling back to memory cache: "+t),yield mm(n,new Yy)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield mm(n,new Yy);return n._offlineComponents})}function ch(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield IT(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield IT(n,new Bv))),n._onlineComponents})}function Yb(n){return Uv(n).then(e=>e.persistence)}function $v(n){return Uv(n).then(e=>e.localStore)}function Zb(n){return ch(n).then(e=>e.remoteStore)}function Hv(n){return ch(n).then(e=>e.syncEngine)}function QF(n){return ch(n).then(e=>e.datastore)}function Is(n){return M(this,null,function*(){let e=yield ch(n),t=e.eventManager;return t.onListen=xF.bind(null,e.syncEngine),t.onUnlisten=RF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NF.bind(null,e.syncEngine),t})}function YF(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield Yb(n),t=yield Zb(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),bc(o)}(t)}))}function ZF(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield Yb(n),t=yield Zb(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=U(i);o.L_.add(0),yield Ts(o),o.q_.set("Offline")})}(t)}))}function JF(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=As(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield $v(n),e,t)})),t.promise}function Jb(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new ws({next:m=>{h.Za(),s.enqueueAndForget(()=>Pv(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new yc(Cs(a.path),h,{includeMetadataChanges:!0,_a:!0});return Nv(o,p)}(yield Is(n),n.asyncQueue,e,t,r)})),r.promise}function XF(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield kd(i,o,!0),u=new Gd(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=As(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield $v(n),e,t)})),t.promise}function Xb(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new ws({next:m=>{h.Za(),s.enqueueAndForget(()=>Pv(o,p)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new yc(a,h,{includeMetadataChanges:!0,_a:!0});return Nv(o,p)}(yield Is(n),n.asyncQueue,e,t,r)})),r.promise}function eL(n,e){let t=new ws(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield Is(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield Is(n),t)}))}}function tL(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?hb().encode(s):s,function(h,p){return new Jy(h,p)}(function(h,p){if(h instanceof Uint8Array)return wT(h,p);if(h instanceof ArrayBuffer)return wT(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Tc(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){KF(yield Hv(n),i,r)}))}function nL(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield $v(n),e)}))}function eS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ET=new Map;function qv(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zv(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DT(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CT(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G()}function Ie(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=uh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Kd=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$i=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ym;switch(r.type){case"firstParty":return new Im(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ET.get(t);r&&(k("ComponentProvider","Removing Datastore"),ET.delete(t),r.terminate())}(this),Promise.resolve()}};function nS(n,e,t,r={}){var i;let o=(n=Ie(n,$i))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=tt.MOCK_USER;else{a=tI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tt(l)}n._authCredentials=new vm(new ad(a,u))}}var ht=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Re=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ln(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ln=class n extends ht{constructor(e,t,r){super(e,t,Cs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Gv(n,e,...t){if(n=Fe(n),qv("collection","path",e),n instanceof $i){let r=we.fromString(e,...t);return CT(r),new Ln(n,null,r)}{if(!(n instanceof Re||n instanceof Ln))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return CT(r),new Ln(n.firestore,null,r)}}function rS(n,e){if(n=Ie(n,$i),qv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ht(n,null,function(r){return new yn(we.emptyPath(),r)}(e))}function Sc(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=cd.newId()),qv("doc","path",e),n instanceof $i){let r=we.fromString(e,...t);return DT(r),new Re(n,null,new $(r))}{if(!(n instanceof Re||n instanceof Ln))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return DT(r),new Re(n.firestore,n instanceof Ln?n.converter:null,new $(r))}}function Wv(n,e){return n=Fe(n),e=Fe(e),(n instanceof Re||n instanceof Ln)&&(e instanceof Re||e instanceof Ln)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Kv(n,e){return n=Fe(n),e=Fe(e),n instanceof ht&&e instanceof ht&&n.firestore===e.firestore&&Dc(n._query,e._query)&&n.converter===e.converter}var Qd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mc(this,"async_queue_retry"),this.Vu=()=>{let r=sd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=sd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=sd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new it;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Jr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw We("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=By.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function nv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var rv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new it,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var iS=-1,je=class extends $i{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qd(e),this._firestoreClient=void 0,yield e}})}};function ft(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oS(n),n._firestoreClient}function oS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new xm(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new tv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function sS(n,e){mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return cS(n,Bv.provider,{build:r=>new Wd(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function aS(n){return M(this,null,function*(){mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();cS(n,Bv.provider,{build:t=>new Zy(t,e.cacheSizeBytes)})})}function cS(n,e,t){if((n=Ie(n,je))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},oS(n)}function uS(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new it;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!$r.D())return Promise.resolve();let i=r+"main";yield $r.delete(i)})}(Av(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function lS(n){return function(t){let r=new it;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return LF(yield Hv(t),r)})),r.promise}(ft(n=Ie(n,je)))}function dS(n){return YF(ft(n=Ie(n,je)))}function hS(n){return ZF(ft(n=Ie(n,je)))}function fS(n,e){let t=ft(n=Ie(n,je)),r=new rv;return tL(t,n._databaseId,e,r),r}function pS(n,e){return nL(ft(n=Ie(n,je)),e).then(t=>t?new ht(n,null,t.query):null)}var Un=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ye.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _n=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var lr=class{constructor(e){this._methodName=e}};var Hi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var vc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var rL=/^__.*__$/,iv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kr(e,this.data,t,this.fieldTransforms)}},Yd=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var Zd=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gS(this.Cu)&&rL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},ov=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Tc(e)}Qu(e,t,r,i=!1){return new Zd({Cu:e,methodName:t,qu:r,path:Ke.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wi(n){let e=n._freezeSettings(),t=Tc(n._databaseId);return new ov(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);Zv("Data must be an object, but it was:",s,r);let a=vS(r,s),u,l;if(o.merge)u=new Kt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=lv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wS(h,m)||h.push(m)}u=new Kt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new iv(new It(a),u,l)}var _c=class n extends lr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function mS(n,e,t){return new Zd({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var sv=class n extends lr{_toFieldTransform(e){return new ji(e.path,new Gr)}isEqual(e){return e instanceof n}},av=class n extends lr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=mS(this,e,!0),r=this.Ku.map(o=>Ki(o,t)),i=new cr(r);return new ji(e.path,i)}isEqual(e){return e instanceof n&&Ef(this.Ku,e.Ku)}},cv=class n extends lr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=mS(this,e,!0),r=this.Ku.map(o=>Ki(o,t)),i=new ur(r);return new ji(e.path,i)}isEqual(e){return e instanceof n&&Ef(this.Ku,e.Ku)}},uv=class n extends lr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Wr(e.serializer,rb(e.serializer,this.$u));return new ji(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Qv(n,e,t,r){let i=n.Qu(1,e,t);Zv("Data must be an object, but it was:",i,r);let o=[],s=It.empty();Gi(r,(u,l)=>{let h=Jv(e,u,t);l=Fe(l);let p=i.Nu(h);if(l instanceof _c)o.push(h);else{let m=Ki(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Kt(o);return new Yd(s,a,i.fieldTransforms)}function Yv(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[lv(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(lv(e,o[m])),u.push(o[m+1]);let l=[],h=It.empty();for(let m=a.length-1;m>=0;--m)if(!wS(l,a[m])){let v=a[m],b=u[m];b=Fe(b);let R=s.Nu(v);if(b instanceof _c)l.push(v);else{let N=Ki(b,R);N!=null&&(l.push(v),h.set(v,N))}}let p=new Kt(l);return new Yd(h,p,s.fieldTransforms)}function yS(n,e,t,r=!1){return Ki(t,n.Qu(r?4:3,e))}function Ki(n,e){if(_S(n=Fe(n)))return Zv("Unsupported field value:",e,n),vS(n,e);if(n instanceof lr)return function(r,i){if(!gS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ki(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:hs(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hs(i.serializer,o)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:fb(i.serializer,r._byteString)};if(r instanceof Re){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Tv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Cv(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${uh(r)}`)}(n,e)}function vS(n,e){let t={};return jT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(n,(r,i)=>{let o=Ki(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _S(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof Hi||n instanceof Un||n instanceof Re||n instanceof lr||n instanceof vc)}function Zv(n,e,t){if(!_S(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=uh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function lv(n,e,t){if((e=Fe(e))instanceof _n)return e._internalPath;if(typeof e=="string")return Jv(n,e);throw Jd("Field path arguments must be of type string or ",n,!1,void 0,t)}var iL=new RegExp("[~\\*/\\[\\]]");function Jv(n,e,t){if(e.search(iL)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _n(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function wS(n,e){return n.some(t=>t.isEqual(e))}var qi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(dh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},dv=class extends qi{data(){return super.data()}};function dh(n,e){return typeof e=="string"?Jv(n,e):e instanceof _n?e._internalPath:e._delegate._internalPath}function IS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wc=class{},zi=class extends wc{};function fr(n,e,...t){let r=[];e instanceof wc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof hv).length,a=o.filter(u=>u instanceof Xd).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Xd=class n extends zi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return RS(e._query,t),new ht(e.firestore,e.converter,$m(e._query,t))}_parse(e){let t=Wi(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){bT(p,h);let v=[];for(let b of p)v.push(TT(u,o,b));m={arrayValue:{values:v}}}else m=TT(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||bT(p,h),m=yS(a,s,p,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ES(n,e,t){let r=e,i=dh("where",n);return Xd._create(i,r,t)}var hv=class n extends wc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:be.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)RS(s,u),s=$m(s,u)}(e._query,t),new ht(e.firestore,e.converter,$m(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var fv=class n extends zi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Li(o,s)}(e._query,this._field,this._direction);return new ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new yn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function DS(n,e="asc"){let t=e,r=dh("orderBy",n);return fv._create(r,t)}var eh=class n extends zi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ht(e.firestore,e.converter,vd(e._query,this._limit,this._limitType))}};function CS(n){return tS("limit",n),eh._create("limit",n,"F")}function TS(n){return tS("limitToLast",n),eh._create("limitToLast",n,"L")}var th=class n extends zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=MS(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function bS(...n){return th._create("startAt",n,!0)}function SS(...n){return th._create("startAfter",n,!1)}var nh=class n extends zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=MS(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function AS(...n){return nh._create("endBefore",n,!1)}function xS(...n){return nh._create("endAt",n,!0)}function MS(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof qi)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of is(o))if(p.field.isKeyField())h.push(Fi(s,u.key));else{let m=u.data.field(p.field);if(ih(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new jn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Wi(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let R=h[b];if(m[b].field.isKeyField()){if(typeof R!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!Ev(s)&&R.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let N=s.path.child(we.fromString(R));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(Fi(a,B))}else{let N=yS(u,l,R);v.push(N)}}return new jn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function TT(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ev(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(we.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fi(n,new $(r))}if(t instanceof Re)return Fi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uh(t)}.`)}function bT(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RS(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Es=class{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new vc(o)}convertGeoPoint(e){return new Hi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=wv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){let t=ar(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=we.fromString(e);Y(Cb(r));let i=new qr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||We(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function hh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pv=class extends Es{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};var sr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},an=class extends qi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Br(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(dh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Br=class extends an{data(e={}){return super.data(e)}},wn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Br(this._firestore,this._userDataWriter,r.key,r,new sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Br(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Br(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:oL(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function oL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function Xv(n,e){return n instanceof an&&e instanceof an?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wn&&e instanceof wn&&n._firestore===e._firestore&&Kv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function NS(n){n=Ie(n,Re);let e=Ie(n.firestore,je);return Jb(ft(e),n._key).then(t=>r_(e,n,t))}var dr=class extends Es{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};function PS(n){n=Ie(n,Re);let e=Ie(n.firestore,je),t=ft(e),r=new dr(e);return JF(t,n._key).then(i=>new an(e,r,n._key,i,new sr(i!==null&&i.hasLocalMutations,!0),n.converter))}function kS(n){n=Ie(n,Re);let e=Ie(n.firestore,je);return Jb(ft(e),n._key,{source:"server"}).then(t=>r_(e,n,t))}function OS(n){n=Ie(n,ht);let e=Ie(n.firestore,je),t=ft(e),r=new dr(e);return IS(n._query),Xb(t,n._query).then(i=>new wn(e,r,n,i))}function FS(n){n=Ie(n,ht);let e=Ie(n.firestore,je),t=ft(e),r=new dr(e);return XF(t,n._query).then(i=>new wn(e,r,n,i))}function LS(n){n=Ie(n,ht);let e=Ie(n.firestore,je),t=ft(e),r=new dr(e);return Xb(t,n._query,{source:"server"}).then(i=>new wn(e,r,n,i))}function e_(n,e,t){n=Ie(n,Re);let r=Ie(n.firestore,je),i=hh(n.converter,e,t);return xs(r,[lh(Wi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function t_(n,e,t,...r){n=Ie(n,Re);let i=Ie(n.firestore,je),o=Wi(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof _n?Yv(o,"updateDoc",n._key,e,t,r):Qv(o,"updateDoc",n._key,e),xs(i,[s.toMutation(n._key,qe.exists(!0))])}function VS(n){return xs(Ie(n.firestore,je),[new Qr(n._key,qe.none())])}function jS(n,e){let t=Ie(n.firestore,je),r=Sc(n),i=hh(n.converter,e);return xs(t,[lh(Wi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function n_(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||nv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(nv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Re)l=Ie(n.firestore,je),h=Cs(n._key.path),u={next:p=>{e[s]&&e[s](r_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ie(n,ht);l=Ie(p.firestore,je),h=p._query;let m=new dr(l);u={next:v=>{e[s]&&e[s](new wn(l,m,p,v))},error:e[s+1],complete:e[s+2]},IS(n._query)}return function(m,v,b,R){let N=new ws(R),B=new yc(v,N,b);return m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return Nv(yield Is(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return Pv(yield Is(m),B)}))}}(ft(l),h,a,u)}function BS(n,e){return eL(ft(n=Ie(n,je)),nv(e)?e:{next:e})}function xs(n,e){return function(r,i){let o=new it;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return PF(yield Hv(r),i,o)})),o.promise}(ft(n),e)}function r_(n,e,t){let r=t.docs.get(e._key),i=new dr(n);return new an(n,i,e._key,r,new sr(t.hasPendingWrites,t.fromCache),e.converter)}var sL={maxAttempts:5};var rh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wi(e)}set(e,t,r){this._verifyNotCommitted();let i=Vr(e,this._firestore),o=hh(i.converter,t,r),s=lh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Vr(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof _n?Yv(this._dataReader,"WriteBatch.update",o._key,t,r,i):Qv(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Vr(e,this._firestore);return this._mutations=this._mutations.concat(new Qr(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Vr(n,e){if((n=Fe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var gv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Wi(t)}get(t){let r=Vr(t,this._firestore),i=new pv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new qi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new qi(this._firestore,i,r._key,null,r.converter);throw G()})}set(t,r,i){let o=Vr(t,this._firestore),s=hh(o.converter,r,i),a=lh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Vr(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof _n?Yv(this._dataReader,"Transaction.update",s._key,r,i,o):Qv(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Vr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Vr(e,this._firestore),r=new dr(this._firestore);return super.get(e).then(i=>new an(this._firestore,r,t._key,i._document,new sr(!1,!1),t.converter))}};function US(n,e,t){n=Ie(n,je);let r=Object.assign(Object.assign({},sL),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new it;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield QF(o);new ev(o.asyncQueue,l,a,s,u).au()})),u.promise}(ft(n),i=>e(new gv(n,i)),r)}function $S(){return new _c("deleteField")}function HS(){return new sv("serverTimestamp")}function qS(...n){return new av("arrayUnion",n)}function zS(...n){return new cv("arrayRemove",n)}function GS(n){return new uv("increment",n)}(function(e,t=!0){(function(i){Ds=i})(iI),da(new si("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new je(new _m(r.getProvider("auth-internal")),new Dm(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ir(CC,"4.7.3",e),Ir(CC,"4.7.3","esm2017")})();var aL="@firebase/firestore-compat",cL="0.3.38";function u_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WS(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function KS(){if(!BT())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var fh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return KS(),new n(Un.fromBase64String(e))}static fromUint8Array(e){return WS(),new n(Un.fromUint8Array(e))}toBase64(){return KS(),this._delegate.toBase64()}toUint8Array(){return WS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function i_(n){return uL(n,["next","error","complete"])}function uL(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var o_=class{enableIndexedDbPersistence(e,t){return sS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return aS(e._delegate)}clearIndexedDbPersistence(e){return uS(e._delegate)}},ph=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){nS(this._delegate,e,t,r)}enableNetwork(){return dS(this._delegate)}disableNetwork(){return hS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,zv("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return lS(this._delegate)}onSnapshotsInSync(e){return BS(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ns(this,Gv(this._delegate,e))}catch(t){throw Mt(t,"collection()","Firestore.collection()")}}doc(e){try{return new $n(this,Sc(this._delegate,e))}catch(t){throw Mt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ji(this,rS(this._delegate,e))}catch(t){throw Mt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return US(this._delegate,t=>e(new gh(this,t)))}batch(){return ft(this._delegate),new mh(new rh(this._delegate,e=>xs(this._delegate,e)))}loadBundle(e){return fS(this._delegate,e)}namedQuery(e){return pS(this._delegate,e).then(t=>t?new Ji(this,t):null)}},Ms=class extends Es{constructor(e){super(),this.firestore=e}convertBytes(e){return new fh(new Un(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return $n.forKey(t,this.firestore,null)}};function lL(n){ST(n)}var gh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ms(e)}get(e){let t=Qi(e);return this._delegate.get(t).then(r=>new Yi(this._firestore,new an(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Qi(e);return r?(u_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qi(e);return this._delegate.delete(t),this}},mh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Qi(e);return r?(u_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Rs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Br(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ms(e),t),i.set(t,o)),o}};Rs.INSTANCES=new WeakMap;var $n=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ms(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Re(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Re(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ns(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ns(this.firestore,Gv(this._delegate,e))}catch(t){throw Mt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Re?Wv(this._delegate,e):!1}set(e,t){t=u_("DocumentReference.set",t);try{return t?e_(this._delegate,e,t):e_(this._delegate,e)}catch(r){throw Mt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?t_(this._delegate,e):t_(this._delegate,e,t,...r)}catch(i){throw Mt(i,"updateDoc()","DocumentReference.update()")}}delete(){return VS(this._delegate)}onSnapshot(...e){let t=QS(e),r=YS(e,i=>new Yi(this.firestore,new an(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return n_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=PS(this._delegate):e?.source==="server"?t=kS(this._delegate):t=NS(this._delegate),t.then(r=>new Yi(this.firestore,new an(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Rs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Mt(n,e,t){return n.message=n.message.replace(e,t),n}function QS(n){for(let e of n)if(typeof e=="object"&&!i_(e))return e;return{}}function YS(n,e){var t,r;let i;return i_(n[0])?i=n[0]:i_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Yi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $n(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Xv(this._delegate,e._delegate)}},Zi=class extends Yi{data(e){let t=this._delegate.data(e);return this._delegate._converter||AT(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ji=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ms(e)}where(e,t,r){try{return new n(this.firestore,fr(this._delegate,ES(e,t,r)))}catch(i){throw Mt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,fr(this._delegate,DS(e,t)))}catch(r){throw Mt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,fr(this._delegate,CS(e)))}catch(t){throw Mt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,fr(this._delegate,TS(e)))}catch(t){throw Mt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,fr(this._delegate,bS(...e)))}catch(t){throw Mt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,fr(this._delegate,SS(...e)))}catch(t){throw Mt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,fr(this._delegate,AS(...e)))}catch(t){throw Mt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,fr(this._delegate,xS(...e)))}catch(t){throw Mt(t,"endAt()","Query.endAt()")}}isEqual(e){return Kv(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=FS(this._delegate):e?.source==="server"?t=LS(this._delegate):t=OS(this._delegate),t.then(r=>new Ac(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=QS(e),r=YS(e,i=>new Ac(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return n_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Rs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},s_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ac=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new s_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zi(this._firestore,r))})}isEqual(e){return Xv(this._delegate,e._delegate)}},Ns=class n extends Ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new $n(this.firestore,e):null}doc(e){try{return e===void 0?new $n(this.firestore,Sc(this._delegate)):new $n(this.firestore,Sc(this._delegate,e))}catch(t){throw Mt(t,"doc()","CollectionReference.doc()")}}add(e){return jS(this._delegate,e).then(t=>new $n(this.firestore,t))}isEqual(e){return Wv(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Rs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Qi(n){return Ie(n,Re)}var a_=class n{constructor(...e){this._delegate=new _n(...e)}static documentId(){return new n(Ke.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof _n?this._delegate._internalPath.isEqual(e._internalPath):!1}};var c_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=HS();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=$S();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=qS(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=zS(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=GS(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var dL={Firestore:ph,GeoPoint:Hi,Timestamp:Ve,Blob:fh,Transaction:gh,WriteBatch:mh,DocumentReference:$n,DocumentSnapshot:Yi,Query:Ji,QueryDocumentSnapshot:Zi,QuerySnapshot:Ac,CollectionReference:Ns,FieldPath:a_,FieldValue:c_,setLogLevel:lL,CACHE_SIZE_UNLIMITED:iS};function hL(n,e){n.INTERNAL.registerComponent(new si("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},dL)))}function fL(n){hL(n,(e,t)=>new ph(e,t,new o_)),n.registerVersion(aL,cL)}fL(Nt);function pL(n,e=ga){return new pe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function ZS(n,e){return pL(n,e)}function gL(n,e){return ZS(n,e).pipe(hi(void 0),va(),ne(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function h_(n,e){return ZS(n,e).pipe(ne(t=>({payload:t,type:"query"})))}var yh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=nA(r,t);return new _h(i,o,this.afs)}snapshotChanges(){return gL(this.ref,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return this.snapshotChanges().pipe(ne(({payload:t})=>e.idField?Me(W({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return De(this.ref.get(e)).pipe(Ut)}};function vh(n,e){return h_(n,e).pipe(hi(void 0),va(),ne(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function JS(n,e,t){return vh(n,t).pipe(di((r,i)=>mL(r,i.map(o=>o.payload),e),[]),Gf(),ne(r=>r.map(i=>({type:i.type,payload:i}))))}function mL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=yL(n,r))}),n}function l_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function yL(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return l_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return l_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return l_(n,e.oldIndex,1);break}return n}function XS(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var _h=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ne(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(hi(void 0),va(),dt(([r,i])=>i.length>0||!r),ne(([,r])=>r),Ut)}auditTrail(e){return this.stateChanges(e).pipe(di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=XS(e);return JS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return h_(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.payload.docs.map(r=>e.idField?Me(W({},r.data()),{[e.idField]:r.id}):r.data())),Ut)}get(e){return De(this.query.get(e)).pipe(Ut)}add(e){return this.ref.add(e)}doc(e){return new yh(this.ref.doc(e),this.afs)}},d_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?vh(this.query,this.afs.schedulers.outsideAngular).pipe(Ut):vh(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.filter(r=>e.indexOf(r.type)>-1)),dt(t=>t.length>0),Ut)}auditTrail(e){return this.stateChanges(e).pipe(di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=XS(e);return JS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return h_(this.query,this.afs.schedulers.outsideAngular).pipe(ne(r=>r.payload.docs.map(i=>e.idField?W({[e.idField]:i.id},i.data()):i.data())),Ut)}get(e){return De(this.query.get(e)).pipe(Ut)}},eA=new Q("angularfire2.enableFirestorePersistence"),tA=new Q("angularfire2.firestore.persistenceSettings"),vL=new Q("angularfire2.firestore.settings"),_L=new Q("angularfire2.firestore.use-emulator");function nA(n,e=t=>t){return{query:e(n),ref:n}}var Rt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,v,b,R,N,B,z){this.schedulers=u;let L=Ba(t,a,r),J=h;p&&om(L,a,m,b,R,N,v,B),[this.firestore,this.persistenceEnabled$]=Kl(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let ie=a.runOutsideAngular(()=>L.firestore());if(o&&ie.settings(o),J&&ie.useEmulator(...J),i&&!Ci(s)){let X=()=>{try{return De(ie.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ee(!1)}};return[ie,a.runOutsideAngular(X)]}else return[ie,ee(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=nA(i,r),a=this.schedulers.ngZone.run(()=>o);return new _h(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new d_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new yh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(qo),O(zo,8),O(eA,8),O(vL,8),O(Ot),O(ye),O(Gl),O(tA,8),O(_L,8),O(IC,8),O(Xg,8),O(em,8),O(tm,8),O(nm,8),O(rm,8),O(im,8),O(bi,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),rA=(()=>{class n{constructor(){Nt.registerVersion("angularfire",Ho.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eA,useValue:!0},{provide:tA,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=_t({type:n});static \u0275inj=vt({providers:[Rt]})}return n})();var iA={production:!1,firebaseConfig:{apiKey:"AIzaSyAStJ9MJTp7qXh5pMGDHA-rHWEXV8pH-hg",authDomain:"my-cv-d46a9.firebaseapp.com",projectId:"my-cv-d46a9",storageBucket:"my-cv-d46a9.firebasestorage.app",messagingSenderId:"152770660667",appId:"1:152770660667:web:24fa743241c0cd5ad18f1e"}};var ue="primary",Hc=Symbol("RouteTitle"),y_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Vs(n){return new y_(n)}function wL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function IL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hn(n[t],e[t]))return!1;return!0}function Hn(n,e){let t=n?v_(n):void 0,r=e?v_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!gA(n[i],e[i]))return!1;return!0}function v_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function gA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function mA(n){return n.length>0?n[n.length-1]:null}function ti(n){return Hf(n)?n:Oa(n)?De(Promise.resolve(n)):ee(n)}var EL={exact:vA,subset:_A},yA={exact:DL,subset:CL,ignored:()=>!0};function oA(n,e,t){return EL[t.paths](n.root,e.root,t.matrixParams)&&yA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function DL(n,e){return Hn(n,e)}function vA(n,e,t){if(!to(n.segments,e.segments)||!Eh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!vA(n.children[r],e.children[r],t))return!1;return!0}function CL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gA(n[t],e[t]))}function _A(n,e,t){return wA(n,e,e.segments,t)}function wA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!to(i,t)||e.hasChildren()||!Eh(i,t,r))}else if(n.segments.length===t.length){if(!to(n.segments,t)||!Eh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!_A(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!to(n.segments,i)||!Eh(n.segments,i,r)||!n.children[ue]?!1:wA(n.children[ue],e,o,r)}}function Eh(n,e,t){return e.every((r,i)=>yA[t](n[i].parameters,r.parameters))}var gr=class{constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){return SL.serialize(this)}},Ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dh(this)}},eo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Vs(this.parameters),this._parameterMap}toString(){return EA(this)}};function TL(n,e){return to(n,e)&&n.every((t,r)=>Hn(t.parameters,e[r].parameters))}function to(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function bL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var qc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new js,providedIn:"root"})}}return n})(),js=class{parse(e){let t=new w_(e);return new gr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${xc(e.root,!0)}`,r=ML(e.queryParams),i=typeof e.fragment=="string"?`#${AL(e.fragment)}`:"";return`${t}${r}${i}`}},SL=new js;function Dh(n){return n.segments.map(e=>EA(e)).join("/")}function xc(n,e){if(!n.hasChildren())return Dh(n);if(e){let t=n.children[ue]?xc(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${xc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=bL(n,(r,i)=>i===ue?[xc(n.children[ue],!1)]:[`${i}:${xc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${Dh(n)}/${t[0]}`:`${Dh(n)}/(${t.join("//")})`}}function IA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wh(n){return IA(n).replace(/%3B/gi,";")}function AL(n){return encodeURI(n)}function __(n){return IA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ch(n){return decodeURIComponent(n)}function sA(n){return Ch(n.replace(/\+/g,"%20"))}function EA(n){return`${__(n.path)}${xL(n.parameters)}`}function xL(n){return Object.entries(n).map(([e,t])=>`;${__(e)}=${__(t)}`).join("")}function ML(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${wh(t)}=${wh(i)}`).join("&"):`${wh(t)}=${wh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var RL=/^[^\/()?;#]+/;function f_(n){let e=n.match(RL);return e?e[0]:""}var NL=/^[^\/()?;=#]+/;function PL(n){let e=n.match(NL);return e?e[0]:""}var kL=/^[^=?&#]+/;function OL(n){let e=n.match(kL);return e?e[0]:""}var FL=/^[^&#]+/;function LL(n){let e=n.match(FL);return e?e[0]:""}var w_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new Ce(e,t)),r}parseSegment(){let e=f_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new eo(Ch(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=PL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=f_(this.remaining);i&&(r=i,this.capture(r))}e[Ch(t)]=Ch(r)}parseQueryParam(e){let t=OL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=LL(this.remaining);s&&(r=s,this.capture(r))}let i=sA(t),o=sA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=f_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ue]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function DA(n){return n.segments.length>0?new Ce([],{[ue]:n}):n}function CA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=CA(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return VL(t)}function VL(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new Ce(n.segments.concat(e.segments),e.children)}return n}function Oc(n){return n instanceof gr}function jL(n,e,t=null,r=null){let i=TA(n);return bA(i,e,t,r)}function TA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=DA(r);return e??i}function bA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return p_(i,i,i,t,r);let o=BL(e);if(o.toRoot())return p_(i,i,new Ce([],{}),t,r);let s=UL(o,i,n),a=s.processChildren?Nc(s.segmentGroup,s.index,o.commands):AA(s.segmentGroup,s.index,o.commands);return p_(i,s.segmentGroup,a,t,r)}function Th(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fc(n){return typeof n=="object"&&n!=null&&n.outlets}function p_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=SA(n,e,t);let a=DA(CA(s));return new gr(a,o,i)}function SA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=SA(o,e,t)}),new Ce(n.segments,r)}var bh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Th(r[0]))throw new te(4003,!1);let i=r.find(Fc);if(i&&i!==mA(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new bh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new bh(t,e,r)}var Os=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function UL(n,e,t){if(n.isAbsolute)return new Os(e,!0,0);if(!t)return new Os(e,!1,NaN);if(t.parent===null)return new Os(t,!0,0);let r=Th(n.commands[0])?0:1,i=t.segments.length-1+r;return $L(t,i,n.numberOfDoubleDots)}function $L(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new Os(r,!1,i-o)}function HL(n){return Fc(n[0])?n[0].outlets:{[ue]:n}}function AA(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return Nc(n,e,t);let r=qL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[ue]=new Ce(n.segments.slice(r.pathIndex),n.children),Nc(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?I_(n,e,t):r.match?Nc(n,0,i):I_(n,e,t)}function Nc(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=HL(t),i={};if(Object.keys(r).some(o=>o!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let o=Nc(n.children[ue],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=AA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function qL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Fc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!cA(u,l,s))return o;r+=2}else{if(!cA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function I_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Fc(o)){let u=zL(o.outlets);return new Ce(r,u)}if(i===0&&Th(t[0])){let u=n.segments[e];r.push(new eo(u.path,aA(t[0]))),i++;continue}let s=Fc(o)?o.outlets[ue]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Th(a)?(r.push(new eo(s,aA(a))),i+=2):(r.push(new eo(s,{})),i++)}return new Ce(r,{})}function zL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=I_(new Ce([],{}),0,r))}),e}function aA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function cA(n,e,t){return n==t.path&&Hn(e,t.parameters)}var Pc="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),cn=class{constructor(e,t){this.id=e,this.url=t}},Bs=class extends cn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mr=class extends cn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Yt||{}),Sh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Sh||{}),pr=class extends cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ei=class extends cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},Lc=class extends cn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ah=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},E_=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D_=class extends cn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},C_=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T_=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b_=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},S_=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},A_=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x_=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},M_=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},R_=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Vc=class{},Us=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function GL(n,e){return n.providers&&!n._injector&&(n._injector=Ol(n.providers,e,`Route: ${n.path}`)),n._injector??e}function In(n){return n.outlet||ue}function WL(n,e){let t=n.filter(r=>In(r)===e);return t.push(...n.filter(r=>In(r)!==e)),t}function zc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var N_=class{get injector(){return zc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Gc(this.rootInjector),this.attachRef=null}},Gc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new N_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(qt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Mh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=P_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=P_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=k_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return k_(e,this._root).map(t=>t.value)}};function P_(n,e){if(n===e.value)return e;for(let t of e.children){let r=P_(n,t);if(r)return r}return null}function k_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=k_(n,t);if(r.length)return r.unshift(e),r}return[]}var Qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ks(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Rh=class extends Mh{constructor(e,t){super(e),this.snapshot=t,H_(this,e)}toString(){return this.snapshot.toString()}};function xA(n){let e=KL(n),t=new lt([new eo("",{})]),r=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new $s(t,r,o,s,i,ue,n,e.root);return a.snapshot=e.root,new Rh(new Qt(a,[]),e)}function KL(n){let e={},t={},r={},i="",o=new Fs([],e,r,i,t,ue,n,null,{});return new Ph("",new Qt(o,[]))}var $s=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[Hc]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),n.params),data:W(W({},e.data),n.data),resolve:W(W(W(W({},n.data),e.data),i?.data),n._resolvedData)}:r={params:W({},n.params),data:W({},n.data),resolve:W(W({},n.data),n._resolvedData??{})},i&&RA(i)&&(r.resolve[Hc]=i.title),r}var Fs=class{get title(){return this.data?.[Hc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ph=class extends Mh{constructor(e,t){super(t),this.url=e,H_(this,t)}toString(){return MA(this._root)}};function H_(n,e){e.value._routerState=n,e.children.forEach(t=>H_(n,t))}function MA(n){let e=n.children.length>0?` { ${n.children.map(MA).join(", ")} } `:"";return`${n.value}${e}`}function g_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hn(e.params,t.params)||n.paramsSubject.next(t.params),IL(e.url,t.url)||n.urlSubject.next(t.url),Hn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function O_(n,e){let t=Hn(n.params,e.params)&&TL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||O_(n.parent,e.parent))}function RA(n){return typeof n.title=="string"||n.title===null}var QL=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new bt,this.deactivateEvents=new bt,this.attachEvents=new bt,this.detachEvents=new bt,this.parentContexts=j(Gc),this.location=j(Uo),this.changeDetector=j(Fa),this.inputBinder=j(Vh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new F_(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ra({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Dl]})}}return n})(),F_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$s?this.route:e===Gc?this.childContexts:this.parent.get(e,t)}},Vh=new Q(""),uA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ma([r.queryParams,r.params,r.data]).pipe($e(([o,s,a],u)=>(a=W(W(W({},o),s),a),u===0?ee(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=k0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function YL(n,e,t){let r=jc(n,e._root,t?t._root:void 0);return new Rh(r,e)}function jc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ZL(n,e,t);return new Qt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>jc(n,a)),s}}let r=JL(e.value),i=e.children.map(o=>jc(n,o));return new Qt(r,i)}}function ZL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jc(n,r,i);return jc(n,r)})}function JL(n){return new $s(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var Bc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},NA="ngNavigationCancelingError";function kh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Oc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PA(!1,Yt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function PA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[NA]=!0,t.cancellationCode=e,t}function XL(n){return kA(n)&&Oc(n.url)}function kA(n){return!!n&&n[NA]}var eV=(n,e,t,r)=>ne(i=>(new L_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),L_=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),g_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ks(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ks(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ks(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ks(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new R_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new x_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(g_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),g_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Oh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ls=class{constructor(e,t){this.component=e,this.route=t}};function tV(n,e,t){let r=n._root,i=e?e._root:null;return Mc(r,i,t,[r.value])}function nV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function qs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!IE(n)?n:e.get(n):r}function Mc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ks(e);return n.children.forEach(s=>{rV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>kc(a,t.getContext(s),i)),i}function rV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=iV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Oh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Mc(n,e,a?a.children:null,r,i):Mc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ls(a.outlet.component,s))}else s&&kc(e,a,i),i.canActivateChecks.push(new Oh(r)),o.component?Mc(n,null,a?a.children:null,r,i):Mc(n,null,t,r,i);return i}function iV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!to(n.url,e.url);case"pathParamsOrQueryParamsChange":return!to(n.url,e.url)||!Hn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!O_(n,e)||!Hn(n.queryParams,e.queryParams);case"paramsChange":default:return!O_(n,e)}}function kc(n,e,t){let r=ks(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?kc(s,e.children.getContext(o),t):kc(s,null,t):kc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ls(e.outlet.component,i)):t.canDeactivateChecks.push(new Ls(null,i)):t.canDeactivateChecks.push(new Ls(null,i))}function Wc(n){return typeof n=="function"}function oV(n){return typeof n=="boolean"}function sV(n){return n&&Wc(n.canLoad)}function aV(n){return n&&Wc(n.canActivate)}function cV(n){return n&&Wc(n.canActivateChild)}function uV(n){return n&&Wc(n.canDeactivate)}function lV(n){return n&&Wc(n.canMatch)}function OA(n){return n instanceof Kn||n?.name==="EmptyError"}var Ih=Symbol("INITIAL_VALUE");function Hs(){return $e(n=>ma(n.map(e=>e.pipe(Qn(1),hi(Ih)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===Ih)return Ih;if(t===!1||dV(t))return t}return!0}),dt(e=>e!==Ih),Qn(1)))}function dV(n){return Oc(n)||n instanceof Bc}function hV(n,e){return Ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(Me(W({},t),{guardsResult:!0})):fV(s,r,i,n).pipe(Ze(a=>a&&oV(a)?pV(r,o,n,e):ee(a)),ne(a=>Me(W({},t),{guardsResult:a})))})}function fV(n,e,t,r){return De(n).pipe(Ze(i=>_V(i.component,i.route,t,e,r)),Jt(i=>i!==!0,!0))}function pV(n,e,t,r){return De(e).pipe(li(i=>vo(mV(i.route.parent,r),gV(i.route,r),vV(n,i.path,t),yV(n,i.route,t))),Jt(i=>i!==!0,!0))}function gV(n,e){return n!==null&&e&&e(new M_(n)),ee(!0)}function mV(n,e){return n!==null&&e&&e(new A_(n)),ee(!0)}function yV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>Ou(()=>{let s=zc(e)??t,a=qs(o,s),u=aV(a)?a.canActivate(e,n):xn(s,()=>a(e,n));return ti(u).pipe(Jt())}));return ee(i).pipe(Hs())}function vV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>nV(s)).filter(s=>s!==null).map(s=>Ou(()=>{let a=s.guards.map(u=>{let l=zc(s.node)??t,h=qs(u,l),p=cV(h)?h.canActivateChild(r,n):xn(l,()=>h(r,n));return ti(p).pipe(Jt())});return ee(a).pipe(Hs())}));return ee(o).pipe(Hs())}function _V(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=zc(e)??i,l=qs(a,u),h=uV(l)?l.canDeactivate(n,e,t,r):xn(u,()=>l(n,e,t,r));return ti(h).pipe(Jt())});return ee(s).pipe(Hs())}function wV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=qs(s,n),u=sV(a)?a.canLoad(e,t):xn(n,()=>a(e,t));return ti(u)});return ee(o).pipe(Hs(),FA(r))}function FA(n){return Lf(rt(e=>{if(typeof e!="boolean")throw kh(n,e)}),ne(e=>e===!0))}function IV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=qs(s,n),u=lV(a)?a.canMatch(e,t):xn(n,()=>a(e,t));return ti(u)});return ee(o).pipe(Hs(),FA(r))}var Uc=class{constructor(e){this.segmentGroup=e||null}},$c=class extends Error{constructor(e){super(),this.urlTree=e}};function Ps(n){return yo(new Uc(n))}function EV(n){return yo(new te(4e3,!1))}function DV(n){return yo(PA(!1,Yt.GuardRejected))}var V_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[ue])return EV(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:R}=i,N=xn(o,()=>a({params:v,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof gr)throw new $c(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new $c(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new gr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},j_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CV(n,e,t,r,i){let o=LA(n,e,t);return o.matched?(r=GL(e,r),IV(r,e,t,i).pipe(ne(s=>s===!0?o:W({},j_)))):ee(o)}function LA(n,e,t){if(e.path==="**")return TV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?W({},j_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wL)(t,n,e);if(!i)return W({},j_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?W(W({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function TV(n){return{matched:!0,parameters:n.length>0?mA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function lA(n,e,t,r){return t.length>0&&AV(n,t,r)?{segmentGroup:new Ce(e,SV(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&xV(n,t,r)?{segmentGroup:new Ce(n.segments,bV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function bV(n,e,t,r){let i={};for(let o of t)if(jh(n,e,o)&&!r[In(o)]){let s=new Ce([],{});i[In(o)]=s}return W(W({},r),i)}function SV(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&In(r)!==ue){let i=new Ce([],{});t[In(r)]=i}return t}function AV(n,e,t){return t.some(r=>jh(n,e,r)&&In(r)!==ue)}function xV(n,e,t){return t.some(r=>jh(n,e,r))}function jh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function MV(n,e,t){return e.length===0&&!n.children[t]}var B_=class{};function RV(n,e,t,r,i,o,s="emptyOnly"){return new U_(n,e,t,r,i,s,o).recognize()}var NV=31,U_=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new V_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=lA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:r})=>{let i=new Qt(r,t),o=new Ph("",i),s=jL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Fs([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(ne(r=>({children:r,rootSnapshot:t})),Dr(r=>{if(r instanceof $c)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Uc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ne(s=>s instanceof Qt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(li(s=>{let a=r.children[s],u=WL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),di((s,a)=>(s.push(...a),s)),Cr(null),Wf(),Ze(s=>{if(s===null)return Ps(r);let a=VA(s);return PV(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return De(t).pipe(li(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Dr(l=>{if(l instanceof Uc)return ee(null);throw l}))),Jt(u=>!!u),Dr(u=>{if(OA(u))return MV(r,i,o)?ee(new B_):Ps(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return In(r)!==s&&(s===ue||!jh(i,o,r))?Ps(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ps(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=LA(t,i,o);if(!u)return Ps(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NV&&(this.allowRedirects=!1));let v=new Fs(o,l,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,dA(i),In(i),i.component??i._loadedComponent??null,i,hA(i)),b=Nh(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Ze(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=CV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($e(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,b=new Fs(m,p,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,dA(r),In(r),r.component??r._loadedComponent??null,r,hA(r)),R=Nh(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(R.params),b.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:B}=lA(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(ne(L=>new Qt(b,L)));if(l.length===0&&B.length===0)return ee(new Qt(b,[]));let z=In(r)===o;return this.processSegment(h,l,N,B,z?ue:o,!0,b).pipe(ne(L=>new Qt(b,L instanceof Qt?[L]:[])))}))):Ps(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):wV(e,t,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,t).pipe(rt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):DV(t))):ee({routes:[],injector:e})}};function PV(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function kV(n){let e=n.value.routeConfig;return e&&e.path===""}function VA(n){let e=[],t=new Set;for(let r of n){if(!kV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=VA(r.children);e.push(new Qt(r.value,i))}return e.filter(r=>!t.has(r))}function dA(n){return n.data||{}}function hA(n){return n.resolve||{}}function OV(n,e,t,r,i,o){return Ze(s=>RV(n,e,t,r,s.extractedUrl,i,o).pipe(ne(({state:a,tree:u})=>Me(W({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function FV(n,e){return Ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of jA(u))s.add(l);let a=0;return De(s).pipe(li(u=>o.has(u)?LV(u,r,n,e):(u.data=Nh(u,u.parent,n).resolve,ee(void 0))),rt(()=>a++),_o(1),Ze(u=>a===s.size?ee(t):Tt))})}function jA(n){let e=n.children.map(t=>jA(t)).flat();return[n,...e]}function LV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!RA(i)&&(o[Hc]=i.title),VV(o,n,e,r).pipe(ne(s=>(n._resolvedData=s,n.data=Nh(n,n.parent,t).resolve,null)))}function VV(n,e,t,r){let i=v_(n);if(i.length===0)return ee({});let o={};return De(i).pipe(Ze(s=>jV(n[s],e,t,r).pipe(Jt(),rt(a=>{if(a instanceof Bc)throw kh(new js,a);o[s]=a}))),_o(1),zf(o),Dr(s=>OA(s)?Tt:yo(s)))}function jV(n,e,t,r){let i=zc(e)??r,o=qs(n,i),s=o.resolve?o.resolve(e,t):xn(i,()=>o(e,t));return ti(s)}function m_(n){return $e(e=>{let t=n(e);return t?De(t).pipe(ne(()=>e)):ee(e)})}var BA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[Hc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>j(BV),providedIn:"root"})}}return n})(),BV=(()=>{class n extends BA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(rC))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kc=new Q("",{providedIn:"root",factory:()=>({})}),UV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["ng-component"]],standalone:!0,features:[D0],decls:1,vars:0,template:function(r,i){r&1&&Gt(0,"router-outlet")},dependencies:[QL],encapsulation:2})}}return n})();function q_(n){let e=n.children&&n.children.map(q_),t=e?Me(W({},n),{children:e}):W({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=UV),t}var Fh=new Q(""),z_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Bl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ti(t.loadComponent()).pipe(ne(UA),rt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ya(()=>{this.componentLoaders.delete(t)})),i=new fo(r,()=>new ze).pipe(ho());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=$V(r,this.compiler,t,this.onLoadEndListener).pipe(ya(()=>{this.childrenLoaders.delete(r)})),s=new fo(o,()=>new ze).pipe(ho());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $V(n,e,t,r){return ti(n.loadChildren()).pipe(ne(UA),Ze(i=>i instanceof xa||Array.isArray(i)?ee(i):De(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Fh,[],{optional:!0,self:!0}).flat()),{routes:s.map(q_),injector:o}}))}function HV(n){return n&&typeof n=="object"&&"default"in n}function UA(n){return HV(n)?n.default:n}var G_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>j(qV),providedIn:"root"})}}return n})(),qV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$A=new Q(""),HA=new Q("");function zV(n,e,t){let r=n.get(HA),i=n.get(jt);return n.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),GV(n))),{onViewTransitionCreated:u}=r;return u&&xn(n,()=>u({transition:a,from:e,to:t})),s})}function GV(n){return new Promise(e=>{wg({read:()=>setTimeout(e)},{injector:n})})}var WV=new Q(""),W_=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=j(z_),this.environmentInjector=j(qt),this.urlSerializer=j(qc),this.rootContexts=j(Gc),this.location=j($o),this.inputBindingEnabled=j(Vh,{optional:!0})!==null,this.titleStrategy=j(BA),this.options=j(Kc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(G_),this.createViewTransition=j($A,{optional:!0}),this.navigationErrorHandler=j(WV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let t=i=>this.events.next(new b_(i)),r=i=>this.events.next(new S_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Me(W(W({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Pc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dt(o=>o.id!==0),ne(o=>Me(W({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{let s=!1,a=!1;return ee(o).pipe($e(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Yt.SupersededByNewNavigation),Tt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Me(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ei(u.id,this.urlSerializer.serialize(u.rawUrl),p,Sh.IgnoredSameUrlNavigation)),u.resolve(!1),Tt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ee(u).pipe($e(p=>{let m=this.transitions?.getValue();return this.events.next(new Bs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Tt:Promise.resolve(p)}),OV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),rt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Me(W({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Ah(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:R}=u,N=new Bs(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=xA(this.rootComponentType).snapshot;return this.currentTransition=o=Me(W({},u),{targetSnapshot:B,urlAfterRedirects:m,extras:Me(W({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ee(o)}else{let p="";return this.events.next(new ei(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Sh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Tt}}),rt(u=>{let l=new E_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ne(u=>(this.currentTransition=o=Me(W({},u),{guards:tV(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),hV(this.environmentInjector,u=>this.events.next(u)),rt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw kh(this.urlSerializer,u.guardsResult);let l=new D_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),dt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Yt.GuardRejected),!1)),m_(u=>{if(u.guards.canActivateChecks.length)return ee(u).pipe(rt(l=>{let h=new C_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),$e(l=>{let h=!1;return ee(l).pipe(FV(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Yt.NoDataFromResolver)}}))}),rt(l=>{let h=new T_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),m_(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(rt(m=>{h.component=m}),ne(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ma(l(u.targetSnapshot.root)).pipe(Cr(null),Qn(1))}),m_(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?De(h).pipe(ne(()=>o)):ee(o)}),ne(u=>{let l=YL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Me(W({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),rt(()=>{this.events.next(new Vc)}),eV(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Qn(1),rt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Qf(this.transitionAbortSubject.pipe(rt(u=>{throw u}))),ya(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Dr(u=>{if(a=!0,kA(u))this.events.next(new pr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),XL(u)?this.events.next(new Us(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Lc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=xn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Bc){let{message:p,cancellationCode:m}=kh(this.urlSerializer,h);this.events.next(new pr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Us(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Tt}))}))}cancelNavigationTransition(t,r,i){let o=new pr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KV(n){return n!==Pc}var QV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>j(YV),providedIn:"root"})}}return n})(),$_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},YV=(()=>{class n extends $_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ng(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>j(ZV),providedIn:"root"})}}return n})(),ZV=(()=>{class n extends qA{constructor(){super(...arguments),this.location=j($o),this.urlSerializer=j(qc),this.options=j(Kc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(G_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Bs)this.stateMemento=this.createStateMemento();else if(t instanceof ei)this.rawUrlTree=r.initialUrl;else if(t instanceof Ah){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Vc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof pr&&(t.code===Yt.GuardRejected||t.code===Yt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Lc?this.restoreHistory(r,!0):t instanceof mr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof gr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=W(W({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=W(W({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ng(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Rc||{});function zA(n,e){n.events.pipe(dt(t=>t instanceof mr||t instanceof pr||t instanceof Lc||t instanceof ei),ne(t=>t instanceof mr||t instanceof ei?Rc.COMPLETE:(t instanceof pr?t.code===Yt.Redirect||t.code===Yt.SupersededByNewNavigation:!1)?Rc.REDIRECTING:Rc.FAILED),dt(t=>t!==Rc.REDIRECTING),Qn(1)).subscribe(()=>{e()})}function JV(n){throw n}var XV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},e2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},no=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Fl),this.stateManager=j(qA),this.options=j(Kc,{optional:!0})||{},this.pendingTasks=j(jo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(W_),this.urlSerializer=j(qc),this.location=j($o),this.urlHandlingStrategy=j(G_),this._events=new ze,this.errorHandler=this.options.errorHandler||JV,this.navigated=!1,this.routeReuseStrategy=j(QV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(Fh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(Vh,{optional:!0}),this.eventsSubscription=new Ue,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pr&&r.code!==Yt.Redirect&&r.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof mr)this.navigated=!0;else if(r instanceof Us){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=W({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||KV(i.source)},s);this.scheduleNavigation(a,Pc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}n2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=W({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(q_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=W(W({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=TA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return bA(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Oc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Pc,null,r)}navigate(t,r={skipLocationChange:!1}){return t2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=W({},XV):r===!1?i=W({},e2):i=r,Oc(t))return oA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return oA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return zA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function t2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}function n2(n){return!(n instanceof Vc)&&!(n instanceof Us)}var Lh=class{};var r2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(dt(t=>t instanceof mr),li(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ol(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return De(i).pipe(Er())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let o=i.pipe(Ze(s=>s===null?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return De([o,s]).pipe(Er())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(no),O(Bl),O(qt),O(Lh),O(z_))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GA=new Q(""),i2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof mr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ei&&t.code===Sh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){YD()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function o2(n){return n.routerState.root}function Qc(n,e){return{\u0275kind:n,\u0275providers:e}}function s2(){let n=j(rn);return e=>{let t=n.get(Nr);if(e!==t.components[0])return;let r=n.get(no),i=n.get(WA);n.get(K_)===1&&r.initialNavigation(),n.get(KA,null,de.Optional)?.setUpPreloading(),n.get(GA,null,de.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var WA=new Q("",{factory:()=>new ze}),K_=new Q("",{providedIn:"root",factory:()=>1});function a2(){return Qc(2,[{provide:K_,useValue:0},{provide:jl,multi:!0,deps:[rn],useFactory:e=>{let t=e.get($0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(no),o=e.get(WA);zA(i,()=>{r(!0)}),e.get(W_).afterPreactivation=()=>(r(!0),o.closed?ee(void 0):o),i.initialNavigation()}))}}])}function c2(){return Qc(3,[{provide:jl,multi:!0,useFactory:()=>{let e=j(no);return()=>{e.setUpLocationChangeListener()}}},{provide:K_,useValue:2}])}var KA=new Q("");function u2(n){return Qc(0,[{provide:KA,useExisting:r2},{provide:Lh,useExisting:n}])}function l2(){return Qc(8,[uA,{provide:Vh,useExisting:uA}])}function d2(n){let e=[{provide:$A,useValue:zV},{provide:HA,useValue:W({skipNextTransition:!!n?.skipInitialTransition},n)}];return Qc(9,e)}var fA=new Q("ROUTER_FORROOT_GUARD"),h2=[$o,{provide:qc,useClass:js},no,Gc,{provide:$s,useFactory:o2,deps:[no]},z_,[]],Q_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[h2,[],{provide:Fh,multi:!0,useValue:t},{provide:fA,useFactory:m2,deps:[[no,new Oo,new Hp]]},{provide:Kc,useValue:r||{}},r?.useHash?p2():g2(),f2(),r?.preloadingStrategy?u2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?y2(r):[],r?.bindToComponentInputs?l2().\u0275providers:[],r?.enableViewTransitions?d2().\u0275providers:[],v2()]}}static forChild(t){return{ngModule:n,providers:[{provide:Fh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(fA,8))}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=vt({})}}return n})();function f2(){return{provide:GA,useFactory:()=>{let n=j(W0),e=j(ye),t=j(Kc),r=j(W_),i=j(qc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new i2(i,r,n,e,t)}}}function p2(){return{provide:Di,useClass:q0}}function g2(){return{provide:Di,useClass:Og}}function m2(n){return"guarded"}function y2(n){return[n.initialNavigation==="disabled"?c2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?a2().\u0275providers:[]]}var pA=new Q("");function v2(){return[{provide:pA,useFactory:s2},{provide:Cg,multi:!0,useExisting:pA}]}var _2=[],QA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=vt({imports:[Q_.forRoot(_2),Q_]})}}return n})();var Bh=(()=>{class n{constructor(t){this.afs=t,this.headerCollection=this.afs.collection("header"),this.header$=this.headerCollection.valueChanges()}getHeaderData(){return this.header$}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function I2(n,e){if(n&1&&(K(0,"div",2)(1,"div",3)(2,"h2"),H(3),F(),K(4,"p"),H(5),F(),K(6,"p")(7,"strong"),H(8,"Email:"),F(),H(9),F(),K(10,"p")(11,"strong"),H(12,"Tel\xE9fono:"),F(),H(13),F(),K(14,"p")(15,"strong"),H(16,"Ubicaci\xF3n:"),F(),H(17),F(),K(18,"p")(19,"strong"),H(20,"Redes Sociales:"),F(),H(21),F()(),K(22,"div",4),Gt(23,"img",5),F()()),n&2){let t=Ft();re(3),Ii(t.header.name),re(2),Ii(t.header.goalLife),re(4),ve(" ",t.header.email,""),re(4),ve(" ",t.header.phoneNumber,""),re(4),ve(" ",t.header.location,""),re(4),ve(" ",t.header.socialNetwork,""),re(2),Ge("src",t.header.photoUrl,VD)}}function E2(n,e){n&1&&(K(0,"div",6)(1,"p"),H(2,"Cargando datos del header..."),F()())}var YA=(()=>{class n{constructor(t){this.headerService=t,this.header=null}ngOnInit(){this.headerService.getHeaderData().subscribe(t=>{t&&t.length>0&&(this.header=t[0])})}static{this.\u0275fac=function(r){return new(r||n)(He(Bh))}}static{this.\u0275cmp=at({type:n,selectors:[["app-header"]],decls:3,vars:2,consts:[["loading",""],["class","header-container",4,"ngIf","ngIfElse"],[1,"header-container"],[1,"header-info"],[1,"header-image"],["alt","Foto de perfil",3,"src"],[1,"loading-header"]],template:function(r,i){if(r&1&&Je(0,I2,24,7,"div",1)(1,E2,3,0,"ng-template",null,0,Vt),r&2){let o=Lt(2);Ge("ngIf",i.header)("ngIfElse",o)}},dependencies:[Bt],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:40px;flex-wrap:wrap}.header-info[_ngcontent-%COMP%]{flex:1}.header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#2c3e50;font-size:28px}.header-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:16px;color:#333}.header-image[_ngcontent-%COMP%]{flex-shrink:0;text-align:center}.header-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;object-fit:cover;border:4px solid #3498db;box-shadow:0 4px 10px #00000026}.loading-header[_ngcontent-%COMP%]{text-align:center;padding:20px;font-style:italic}"]})}}return n})();var Uh=(()=>{class n{constructor(t){this.firestore=t}getWorkExperiences(){return this.firestore.collection("work-experience").valueChanges({idField:"id"})}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T2(n,e){if(n&1&&(K(0,"div",3)(1,"div",4)(2,"div",5)(3,"h3"),H(4),F(),K(5,"span"),H(6),F()(),K(7,"div",6)(8,"p")(9,"strong"),H(10,"Logro:"),F(),H(11),F(),K(12,"p")(13,"strong"),H(14,"Periodo:"),F(),H(15),F(),K(16,"p")(17,"strong"),H(18,"Ubicaci\xF3n:"),F(),H(19),F()()()()),n&2){let t=Ft();re(4),Ii(t.experiences[0].position),re(2),Ii(t.experiences[0].company),re(5),ve(" ",t.experiences[0].accomplishment,""),re(4),Ig(" ",t.experiences[0].startDate," - ",t.experiences[0].endDate,""),re(4),ve(" ",t.experiences[0].location,"")}}function b2(n,e){n&1&&(K(0,"div",7)(1,"p"),H(2,"Cargando experiencias laborales..."),F()())}var ZA=(()=>{class n{constructor(t){this.workExpService=t,this.experiences=[]}ngOnInit(){this.workExpService.getWorkExperiences().subscribe(t=>{this.experiences=t})}static{this.\u0275fac=function(r){return new(r||n)(He(Uh))}}static{this.\u0275cmp=at({type:n,selectors:[["app-work-experience"]],decls:5,vars:2,consts:[["loading",""],[1,"section-title"],["class","work-experience-container",4,"ngIf","ngIfElse"],[1,"work-experience-container"],[1,"experience-card"],[1,"experience-header"],[1,"experience-details"],[1,"loading-section"]],template:function(r,i){if(r&1&&(K(0,"div",1),H(1,"Experiencia Laboral"),F(),Je(2,T2,20,6,"div",2)(3,b2,3,0,"ng-template",null,0,Vt)),r&2){let o=Lt(4);re(2),Ge("ngIf",i.experiences&&i.experiences.length>0)("ngIfElse",o)}},dependencies:[Bt],styles:[".work-experience-container[_ngcontent-%COMP%]{padding:10px}.experience-card[_ngcontent-%COMP%]{border-left:6px solid #2ecc71;background-color:#fdfdfd;padding:20px;border-radius:10px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.experience-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:22px}.experience-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#7f8c8d;font-style:italic;font-size:15px}.experience-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#333}.loading-section[_ngcontent-%COMP%]{text-align:center;padding:20px;font-style:italic}"]})}}return n})();var $h=(()=>{class n{constructor(t){this.afs=t,this.educationCollection=this.afs.collection("education"),this.education$=this.educationCollection.valueChanges()}getEducationData(){return this.education$}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function x2(n,e){if(n&1&&(K(0,"div",5)(1,"p")(2,"strong"),H(3,"\u{1F393} Grado Acad\xE9mico:"),F(),H(4),F(),K(5,"p")(6,"strong"),H(7,"\u{1F3EB} Instituci\xF3n:"),F(),H(8),F(),K(9,"p")(10,"strong"),H(11,"\u{1F4DA} Cursos Relevantes:"),F(),H(12),F(),K(13,"p")(14,"strong"),H(15,"\u{1F3C5} Premios y Reconocimientos:"),F(),H(16),F(),K(17,"p")(18,"strong"),H(19,"\u{1F4C8} Promedio:"),F(),H(20),F(),K(21,"p")(22,"strong"),H(23,"\u{1F9EA} Proyectos Acad\xE9micos:"),F(),H(24),F()()),n&2){let t=e.$implicit;re(4),ve(" ",t.gradoAcademico,""),re(4),ve(" ",t.institucion,""),re(4),ve(" ",t.cursoRelevantes,""),re(4),ve(" ",t.premiosReconocimientos,""),re(4),ve(" ",t.promedio,""),re(4),ve(" ",t.proyectosAcademicos,"")}}function M2(n,e){if(n&1&&(K(0,"div",3),Je(1,x2,25,6,"div",4),F()),n&2){let t=Ft();re(),Ge("ngForOf",t.educationList)}}function R2(n,e){n&1&&(K(0,"div",6)(1,"p"),H(2,"Cargando datos de Educaci\xF3n..."),F()())}var JA=(()=>{class n{constructor(t){this.educationService=t,this.educationList=[]}ngOnInit(){this.educationService.getEducationData().subscribe(t=>{this.educationList=t})}static{this.\u0275fac=function(r){return new(r||n)(He($h))}}static{this.\u0275cmp=at({type:n,selectors:[["app-education"]],decls:5,vars:2,consts:[["loading",""],[1,"section-title"],["class","education-container",4,"ngIf","ngIfElse"],[1,"education-container"],["class","education-block",4,"ngFor","ngForOf"],[1,"education-block"],[1,"loading-section"]],template:function(r,i){if(r&1&&(K(0,"div",1),H(1,"Educaci\xF3n"),F(),Je(2,M2,2,1,"div",2)(3,R2,3,0,"ng-template",null,0,Vt)),r&2){let o=Lt(4);re(2),Ge("ngIf",i.educationList&&i.educationList.length>0)("ngIfElse",o)}},dependencies:[Nn,Bt],styles:[".certificates-container[_ngcontent-%COMP%], .education-container[_ngcontent-%COMP%]{padding:10px}.certificate-block[_ngcontent-%COMP%], .education-block[_ngcontent-%COMP%]{background-color:#f8f9fa;border-left:5px solid #e67e22;padding:15px;margin-bottom:15px;border-radius:8px}.certificate-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .education-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#2c3e50;font-size:15px}"]})}}return n})();var Hh=(()=>{class n{constructor(t){this.afs=t,this.skillsCollection=this.afs.collection("skills"),this.skills$=this.skillsCollection.valueChanges()}getSkillsData(){return this.skills$}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k2(n,e){if(n&1&&(K(0,"div",5)(1,"p")(2,"strong"),H(3,"\u{1F9E0} Programaci\xF3n:"),F(),H(4),F(),K(5,"p")(6,"strong"),H(7,"\u{1F91D} Habilidades Sociales:"),F(),H(8),F()()),n&2){let t=e.$implicit;re(4),ve(" ",t.skillsPrograming,""),re(4),ve(" ",t.socialSkills,"")}}function O2(n,e){if(n&1&&(K(0,"div",3),Je(1,k2,9,2,"div",4),F()),n&2){let t=Ft();re(),Ge("ngForOf",t.skills)}}function F2(n,e){n&1&&(K(0,"div",6)(1,"p"),H(2,"Cargando datos de skills..."),F()())}var XA=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[]}ngOnInit(){this.skillsService.getSkillsData().subscribe(t=>{this.skills=t})}static{this.\u0275fac=function(r){return new(r||n)(He(Hh))}}static{this.\u0275cmp=at({type:n,selectors:[["app-skills"]],decls:5,vars:2,consts:[["loading",""],[1,"section-title"],["class","skills-container",4,"ngIf","ngIfElse"],[1,"skills-container"],["class","skill-block",4,"ngFor","ngForOf"],[1,"skill-block"],[1,"loading-section"]],template:function(r,i){if(r&1&&(K(0,"div",1),H(1,"Habilidades"),F(),Je(2,O2,2,1,"div",2)(3,F2,3,0,"ng-template",null,0,Vt)),r&2){let o=Lt(4);re(2),Ge("ngIf",i.skills&&i.skills.length>0)("ngIfElse",o)}},dependencies:[Nn,Bt],styles:[".skills-container[_ngcontent-%COMP%]{padding:10px}.skill-block[_ngcontent-%COMP%]{background-color:#ecf0f1;border-left:5px solid #9b59b6;padding:15px;margin-bottom:15px;border-radius:8px}.skill-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#2c3e50;font-size:15px}"]})}}return n})();var qh=(()=>{class n{constructor(t){this.afs=t,this.certificatesCollection=this.afs.collection("certificates"),this.certificates$=this.certificatesCollection.valueChanges()}getCertificatesData(){return this.certificates$}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function j2(n,e){if(n&1&&(K(0,"div",5)(1,"p")(2,"strong"),H(3,"\u{1F4DC} Certificaci\xF3n:"),F(),H(4),F(),K(5,"p")(6,"strong"),H(7,"\u{1F4C5} Fecha de Obtenci\xF3n:"),F(),H(8),F(),K(9,"p")(10,"strong"),H(11,"\u{1F3EB} Instituci\xF3n:"),F(),H(12),F()()),n&2){let t=e.$implicit;re(4),ve(" ",t.certificacion,""),re(4),ve(" ",t.fechaObtencion,""),re(4),ve(" ",t.institucion,"")}}function B2(n,e){if(n&1&&(K(0,"div",3),Je(1,j2,13,3,"div",4),F()),n&2){let t=Ft();re(),Ge("ngForOf",t.certificates)}}function U2(n,e){n&1&&(K(0,"div",6)(1,"p"),H(2,"Cargando certificados..."),F()())}var ex=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[]}ngOnInit(){this.certificatesService.getCertificatesData().subscribe(t=>{this.certificates=t})}static{this.\u0275fac=function(r){return new(r||n)(He(qh))}}static{this.\u0275cmp=at({type:n,selectors:[["app-certificates"]],decls:5,vars:2,consts:[["loading",""],[1,"section-title"],["class","certificates-container",4,"ngIf","ngIfElse"],[1,"certificates-container"],["class","certificate-block",4,"ngFor","ngForOf"],[1,"certificate-block"],[1,"loading-section"]],template:function(r,i){if(r&1&&(K(0,"div",1),H(1,"Certificados"),F(),Je(2,B2,2,1,"div",2)(3,U2,3,0,"ng-template",null,0,Vt)),r&2){let o=Lt(4);re(2),Ge("ngIf",i.certificates&&i.certificates.length>0)("ngIfElse",o)}},dependencies:[Nn,Bt],styles:[".certificates-container[_ngcontent-%COMP%], .education-container[_ngcontent-%COMP%]{padding:10px}.certificate-block[_ngcontent-%COMP%], .education-block[_ngcontent-%COMP%]{background-color:#f8f9fa;border-left:5px solid #e67e22;padding:15px;margin-bottom:15px;border-radius:8px}.certificate-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .education-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#2c3e50;font-size:15px}"]})}}return n})();var zh=(()=>{class n{constructor(t){this.afs=t,this.languagesCollection=this.afs.collection("languages"),this.languages$=this.languagesCollection.valueChanges()}getLanguagesData(){return this.languages$}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q2(n,e){if(n&1&&(K(0,"div",5)(1,"p")(2,"strong"),H(3,"\u{1F30D} Idioma:"),F(),H(4),F(),K(5,"p")(6,"strong"),H(7,"\u{1F4C8} Nivel de Competencia:"),F(),H(8),F(),K(9,"p")(10,"strong"),H(11,"\u{1F4DC} Certificaciones o Pruebas:"),F(),H(12),F()()),n&2){let t=e.$implicit;re(4),ve(" ",t.idioma,""),re(4),ve(" ",t.nivelDeCompetencia,""),re(4),ve(" ",t.certificacionesOPruebasdeIdioma,"")}}function z2(n,e){if(n&1&&(K(0,"div",3),Je(1,q2,13,3,"div",4),F()),n&2){let t=Ft();re(),Ge("ngForOf",t.languages)}}function G2(n,e){n&1&&(K(0,"div",6)(1,"p"),H(2,"Cargando informaci\xF3n de idiomas..."),F()())}var tx=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[]}ngOnInit(){this.languagesService.getLanguagesData().subscribe(t=>{this.languages=t})}static{this.\u0275fac=function(r){return new(r||n)(He(zh))}}static{this.\u0275cmp=at({type:n,selectors:[["app-languages"]],decls:5,vars:2,consts:[["loading",""],[1,"section-title"],["class","languages-container",4,"ngIf","ngIfElse"],[1,"languages-container"],["class","language-block",4,"ngFor","ngForOf"],[1,"language-block"],[1,"loading-section"]],template:function(r,i){if(r&1&&(K(0,"div",1),H(1,"Idiomas"),F(),Je(2,z2,2,1,"div",2)(3,G2,3,0,"ng-template",null,0,Vt)),r&2){let o=Lt(4);re(2),Ge("ngIf",i.languages&&i.languages.length>0)("ngIfElse",o)}},dependencies:[Nn,Bt],styles:[".interests-container[_ngcontent-%COMP%], .languages-container[_ngcontent-%COMP%]{padding:10px}.interest-block[_ngcontent-%COMP%]{background-color:#fdf6e3;border-left:5px solid #f39c12;padding:15px;margin-bottom:15px;border-radius:8px}.language-block[_ngcontent-%COMP%]{background-color:#e8f8f5;border-left:5px solid #1abc9c;padding:15px;margin-bottom:15px;border-radius:8px}.interest-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .language-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#2c3e50;font-size:15px}"]})}}return n})();var Gh=(()=>{class n{constructor(t){this.afs=t,this.interestsCollection=this.afs.collection("interests"),this.interests$=this.interestsCollection.valueChanges()}getInterestsData(){return this.interests$}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q2(n,e){if(n&1&&(K(0,"div",5)(1,"p")(2,"strong"),H(3,"\u{1F3AF} Actividades Extracurriculares:"),F(),H(4),F(),K(5,"p")(6,"strong"),H(7,"\u{1F3AD} Cultura y Eventos:"),F(),H(8),F(),K(9,"p")(10,"strong"),H(11,"\u26BD Deportes:"),F(),H(12),F(),K(13,"p")(14,"strong"),H(15,"\u{1F3A8} Hobbies y Actividades:"),F(),H(16),F(),K(17,"p")(18,"strong"),H(19,"\u{1F4BC} Intereses Profesionales:"),F(),H(20),F()()),n&2){let t=e.$implicit;re(4),ve(" ",t.actividadesExtracurriculares,""),re(4),ve(" ",t.culturaYEventos,""),re(4),ve(" ",t.deportes,""),re(4),ve(" ",t.hobbiesYActividades,""),re(4),ve(" ",t.interesesProfesionales,"")}}function Y2(n,e){if(n&1&&(K(0,"div",3),Je(1,Q2,21,5,"div",4),F()),n&2){let t=Ft();re(),Ge("ngForOf",t.interests)}}function Z2(n,e){n&1&&(K(0,"div",6)(1,"p"),H(2,"Cargando datos de intereses..."),F()())}var nx=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[]}ngOnInit(){this.interestsService.getInterestsData().subscribe(t=>{this.interests=t})}static{this.\u0275fac=function(r){return new(r||n)(He(Gh))}}static{this.\u0275cmp=at({type:n,selectors:[["app-interests"]],decls:5,vars:2,consts:[["loading",""],[1,"section-title"],["class","interests-container",4,"ngIf","ngIfElse"],[1,"interests-container"],["class","interest-block",4,"ngFor","ngForOf"],[1,"interest-block"],[1,"loading-section"]],template:function(r,i){if(r&1&&(K(0,"div",1),H(1,"Intereses"),F(),Je(2,Y2,2,1,"div",2)(3,Z2,3,0,"ng-template",null,0,Vt)),r&2){let o=Lt(4);re(2),Ge("ngIf",i.interests&&i.interests.length>0)("ngIfElse",o)}},dependencies:[Nn,Bt],styles:[".interests-container[_ngcontent-%COMP%], .languages-container[_ngcontent-%COMP%]{padding:10px}.interest-block[_ngcontent-%COMP%]{background-color:#fdf6e3;border-left:5px solid #f39c12;padding:15px;margin-bottom:15px;border-radius:8px}.language-block[_ngcontent-%COMP%]{background-color:#e8f8f5;border-left:5px solid #1abc9c;padding:15px;margin-bottom:15px;border-radius:8px}.interest-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .language-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#2c3e50;font-size:15px}"]})}}return n})();var rx=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["app-root"]],decls:20,vars:0,consts:[[1,"cv-container"],[1,"cv-table"],["colspan","2"]],template:function(r,i){r&1&&(K(0,"div",0)(1,"table",1)(2,"tr")(3,"td",2),Gt(4,"app-header"),F()(),K(5,"tr")(6,"td"),Gt(7,"app-work-experience"),F(),K(8,"td"),Gt(9,"app-skills"),F()(),K(10,"tr")(11,"td"),Gt(12,"app-education"),F(),K(13,"td"),Gt(14,"app-certificates"),F()(),K(15,"tr")(16,"td"),Gt(17,"app-languages"),F(),K(18,"td"),Gt(19,"app-interests"),F()()()())},dependencies:[YA,ZA,JA,XA,ex,tx,nx]})}}return n})();var ix=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n,bootstrap:[rx]})}static{this.\u0275inj=vt({providers:[Bh,Uh,$h,Hh,qh,zh,Gh],imports:[nC,QA,cC.initializeApp(iA.firebaseConfig),rA]})}}return n})();tC().bootstrapModule(ix,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
